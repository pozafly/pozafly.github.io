<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.15.0"/><meta name="description" content="모던 프론트엔드 웹 개발에 필요한 세팅을 직접 해보면서 어떤 옵션과 기능이 있는지 알아보자." data-gatsby-head="true"/><meta property="og:site_name" content="Pozafly&#x27;s Blog" data-gatsby-head="true"/><meta property="og:type" content="article" data-gatsby-head="true"/><meta property="og:title" content="Webpack5 JavaScript 보일러플레이트 만들기" data-gatsby-head="true"/><meta property="og:description" content="모던 프론트엔드 웹 개발에 필요한 세팅을 직접 해보면서 어떤 옵션과 기능이 있는지 알아보자." data-gatsby-head="true"/><meta property="og:url" content="https://pozafly.github.io/environment/webpack-boilerplate/" data-gatsby-head="true"/><meta property="og:image" content="https://pozafly.github.io/static/398ff7eccce15fa106b9755da8007778/c106f/main.png" data-gatsby-head="true"/><meta property="article:published_time" content="2023-04-05T00:00:00.000Z" data-gatsby-head="true"/><meta property="article:tag" content="Bundler" data-gatsby-head="true"/><meta name="github:card" content="summary_large_image" data-gatsby-head="true"/><meta name="github:title" content="Webpack5 JavaScript 보일러플레이트 만들기" data-gatsby-head="true"/><meta name="github:description" content="모던 프론트엔드 웹 개발에 필요한 세팅을 직접 해보면서 어떤 옵션과 기능이 있는지 알아보자." data-gatsby-head="true"/><meta name="github:url" content="https://pozafly.github.io/environment/webpack-boilerplate/" data-gatsby-head="true"/><meta name="github:image" content="https://pozafly.github.io/static/398ff7eccce15fa106b9755da8007778/c106f/main.png" data-gatsby-head="true"/><meta name="github:label1" content="Written by" data-gatsby-head="true"/><meta name="github:data1" content="Pozafly" data-gatsby-head="true"/><meta name="github:label2" content="Filed under" data-gatsby-head="true"/><meta name="github:data2" content="Bundler" data-gatsby-head="true"/><meta name="github:site" content="@pozafly" data-gatsby-head="true"/><meta name="github:creator" content="@pozafly" data-gatsby-head="true"/><meta property="og:image:width" content="1" data-gatsby-head="true"/><meta property="og:image:height" content="0.5230769230769231" data-gatsby-head="true"/><style data-href="/styles.d4d27a32d6eda6a27949.css" data-identity="gatsby-global-css">@font-face{font-display:swap;font-family:Pretendard;font-weight:700;src:local("Pretendard Bold"),url(/fonts/pretendard/Pretendard-Bold.subset.woff2) format("woff2")}@font-face{font-display:swap;font-family:Pretendard;font-weight:600;src:local("Pretendard SemiBold"),url(/fonts/pretendard/Pretendard-SemiBold.subset.woff2) format("woff2")}@font-face{font-display:swap;font-family:Pretendard;font-weight:500;src:local("Pretendard Medium"),url(/fonts/pretendard/Pretendard-Medium.subset.woff2) format("woff2")}@font-face{font-display:swap;font-family:Pretendard;font-weight:400;src:local("Pretendard Regular"),url(/fonts/pretendard/Pretendard-Regular.subset.woff2) format("woff2")}@font-face{font-display:swap;font-family:Pretendard;font-weight:300;src:local("Pretendard Light"),url(/fonts/pretendard/Pretendard-Light.subset.woff2) format("woff2")}</style><link rel="icon" href="/favicon-32x32.png?v=a62d45ddbe29cf42da820a576d9375e1" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=a62d45ddbe29cf42da820a576d9375e1"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=a62d45ddbe29cf42da820a576d9375e1"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=a62d45ddbe29cf42da820a576d9375e1"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=a62d45ddbe29cf42da820a576d9375e1"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=a62d45ddbe29cf42da820a576d9375e1"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=a62d45ddbe29cf42da820a576d9375e1"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=a62d45ddbe29cf42da820a576d9375e1"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=a62d45ddbe29cf42da820a576d9375e1"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .auto-link.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .auto-link.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .auto-link svg,
    h2 .auto-link svg,
    h3 .auto-link svg,
    h4 .auto-link svg,
    h5 .auto-link svg,
    h6 .auto-link svg {
      visibility: hidden;
    }
    h1:hover .auto-link svg,
    h2:hover .auto-link svg,
    h3:hover .auto-link svg,
    h4:hover .auto-link svg,
    h5:hover .auto-link svg,
    h6:hover .auto-link svg,
    h1 .auto-link:focus svg,
    h2 .auto-link:focus svg,
    h3 .auto-link:focus svg,
    h4 .auto-link:focus svg,
    h5 .auto-link:focus svg,
    h6 .auto-link:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 100)
          }), 0)
        }
      }
    })
  </script><link rel="canonical" href="https://pozafly.github.io/environment/webpack-boilerplate/" data-baseprotocol="https:" data-basehost="pozafly.github.io"/><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-SLQNH3ND3J"></script><script>
      
      function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-SLQNH3ND3J',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
      if(!(navigator.doNotTrack == "1" || window.doNotTrack == "1")) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-SLQNH3ND3J', {"anonymize_ip":true,"cookie_expires":0,"send_page_view":false});
      }
      </script><link rel="preload" href="/fonts/pretendard/Pretendard-Bold.subset.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/pretendard/Pretendard-SemiBold.subset.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/pretendard/Pretendard-Medium.subset.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/pretendard/Pretendard-Regular.subset.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/pretendard/Pretendard-Light.subset.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><title data-gatsby-head="true">Webpack5 JavaScript 보일러플레이트 만들기</title></head><body><script>
  (function() {
    window.__onThemeChange = function() {}; // 컴포넌트에서 정의할 테마 변경 콜백

    let preferredTheme; // 초기화에 사용할 테마
    try {
      const saved = localStorage.getItem('theme') // 로컬 스토리지에 있는 것 사용
      if (saved) {
        preferredTheme = saved.toLowerCase()
      }
    } catch (err) { }

    // 테마 설정 함수
    window.__setPreferredTheme = function(newTheme) {
      window.__theme = newTheme; // 테마는 전역 변수에 저장
      preferredTheme = newTheme;
      document.body.className = newTheme; // 바디에 클래스 추가
      window.__onThemeChange(newTheme); // 콜백 실행

      try {
        localStorage.setItem('theme', newTheme);
      } catch (err) {}
    }

    // 컬러모드 미디어 쿼리 객체를 가져온다
    const darkQuery = window.matchMedia('(prefers-color-scheme: dark)');

    // 컬러모드 변경 탐지 이벤트 리스터 추가
    darkQuery.addListener(function(e) {
      window.__setPreferredTheme(e.matches ? 'dark' : 'light')
    });

    // 테마 설정. 저장된 테마가 없으면 시스템 설정을 사용한다.
    window.__setPreferredTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
  })();
  </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="post-template"><style data-emotion="css-global 10pnfog">html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,dl,dt,dd,ol,fieldset,form,label,legend,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;font:inherit;font-size:16px;vertical-align:baseline;border:0;}html .error-front-page,body .error-front-page,div .error-front-page,span .error-front-page,applet .error-front-page,object .error-front-page,iframe .error-front-page,h1 .error-front-page,h2 .error-front-page,h3 .error-front-page,h4 .error-front-page,h5 .error-front-page,h6 .error-front-page,p .error-front-page,blockquote .error-front-page,pre .error-front-page,a .error-front-page,abbr .error-front-page,acronym .error-front-page,address .error-front-page,big .error-front-page,cite .error-front-page,code .error-front-page,del .error-front-page,dfn .error-front-page,em .error-front-page,img .error-front-page,ins .error-front-page,kbd .error-front-page,q .error-front-page,s .error-front-page,samp .error-front-page,small .error-front-page,strike .error-front-page,strong .error-front-page,sub .error-front-page,sup .error-front-page,tt .error-front-page,var .error-front-page,dl .error-front-page,dt .error-front-page,dd .error-front-page,ol .error-front-page,fieldset .error-front-page,form .error-front-page,label .error-front-page,legend .error-front-page,article .error-front-page,aside .error-front-page,canvas .error-front-page,details .error-front-page,embed .error-front-page,figure .error-front-page,figcaption .error-front-page,footer .error-front-page,header .error-front-page,hgroup .error-front-page,menu .error-front-page,nav .error-front-page,output .error-front-page,ruby .error-front-page,section .error-front-page,summary .error-front-page,time .error-front-page,mark .error-front-page,audio .error-front-page,video .error-front-page{font-size:1.6rem;}html{overflow:hidden scroll;box-sizing:border-box;font-size:62.5%;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgb(0 0 0 / 0);}body{overflow-x:hidden;font-size:1.6rem;-moz-font-feature-settings:'liga' on;font-weight:400;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;line-height:1.6em;color:var(--body-color);letter-spacing:0;background:var(--background-color);text-rendering:optimizeLegibility;word-break:break-word;}body::-webkit-scrollbar{width:6px;background-color:transparent;}body::-webkit-scrollbar-thumb{background-color:hsl(230 5% 35%);border-radius:8px;}body.light{--body-color:#303a3e;--background-color:#fff;--main-color:#000;--link-color:#0a0b0c;--border-top-color:#e4eaed;--nav-background:rgb(255 255 255 / 0.4);--nav-border-color:rgb(0 0 0 / 0.05);--header-color:var(--background-color);--header-after:var(--background-color);--header-before:rgb(0 0 0 / 0.15);--author-border:#fff;--home-header-color:#15171A;--home-header-border-bottom:#eaeff1;--header-author-link:#15171A;--no-image-border:#eaeff1;--strong-font-weight:600;--anchor-color:#0b63f0;--anchor-secondary-color:#768086;--loader-color:hsla(230 40% 10% / 0.8);--loader-color2:hsla(230 40% 10% / 0.2);--image-border-color:hsl(230 25% 94%);--image-border-color__dark:hsl(230 6% 23%);--post-card-title:rgb(21 23 26);--post-card-description:rgb(48 58 62);--post-card-by-line:#434952;--strong-color:#0a0b0c;--figcaption-color:#000;--table-first-of-type:linear-gradient(
        to right,
        rgb(255 255 255) 50%,
        rgb(255 255 255 / 0) 100%
      );--table-last-of-type:linear-gradient(
        to left,
        rgb(255 255 255) 50%,
        rgb(255 255 255 / 0) 100%
      );--table-th-background:#f4f8fb;--table-th-border:#e1edf4;--tag-boxshadow:hsl(218 53% 10% / 0.12);--tag-background:#f5f5f5;--post-full-border:#e4eaed;--post-full-meta-link:#2c3036;--post-full-meta-link-hover:#15171A;--post-full-title:#0b0c0e;--highlight-background:#fafafa;--highlight-border:#d1d1d1;--pre-code-color:#000;--little-code-background:var(--highlight-background);--little-code-border:#d1d1d1;--prism-background:hsl(0 0% 90.66%);--prism-border-left:hsl(0 0% 82.88%);--about-box-shadow:10px 10px 30px #bebebe,-10px -10px 30px #fff;--post-card-opacity:0;--post-card-background:rgb(0 0 0 / 0.1);--post-card-after-opacity:1;}body.dark{--body-color:rgba(255 255 255 / 0.75);--background-color:#191b1f;--main-color:#fff;--link-color:rgba(255 255 255 / 0.9);--border-top-color:#2b2f36;--nav-background:rgba(25 27 31 / 0.4);--nav-border-color:rgba(255 255 255 / 0.05);--header-color:#0a0b0c;--header-after:#191b1f;--header-before:rgba(0 0 0 / 0.6);--author-border:#1a1c20;--home-header-color:rgba(255 255 255 / 0.9);--home-header-border-bottom:#272a30;--header-author-link:rgba(255 255 255 / 0.75);--no-image-border:#3b4049;--strong-font-weight:500;--anchor-color:#2071f3;--anchor-secondary-color:#90a2aa;--loader-color:hsl(230 40% 90% / 0.8);--loader-color2:hsl(230 40% 90% / 0.2);--image-border-color:hsl(230 6% 23%);--image-border-color__dark:hsl(230 6% 23%);--post-card-title:rgba(255 255 255 / 0.85);--post-card-description:#768086;--post-card-by-line:rgba(255 255 255 / 0.75);--strong-color:#f2f2f2;--figcaption-color:rgba(255 255 255 / 0.6);--table-first-of-type:linear-gradient(
        to right,
        #191b1f 50%,
        #191b1f 100%
      );--table-last-of-type:linear-gradient(270deg, #191b1f 50%, rgb(25 27 31));--table-th-background:#2b2f36;--table-th-border:var(--table-th-background);--tag-background:#1f2125;--tag-boxshadow:#090f1a;--post-full-border:#3b4049;--post-full-meta-link:rgb(255 255 255 / 0.75);--post-full-meta-link-hover:#fff;--post-full-title:rgb(255 255 255 / 0.9);--highlight-background:rgb(32 36 39);--highlight-border:none;--pre-code-color:#c9d1d9;--little-code-background:rgb(96 98 100 / 0.4);--little-code-border:none;--prism-background:rgb(0 0 0 / 0.4);--prism-border-left:#818181;--about-box-shadow:10px 20px 20px hsl(0 0 0 / 0.3);--post-card-opacity:0.6;--post-card-background:rgb(0 0 0 / 0.3);--post-card-after-opacity:0.1;}html,body{font-family:Pretendard,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Noto Sans','Ubuntu','Droid Sans','Helvetica Neue',sans-serif;}a{color:var(--anchor-color);-webkit-text-decoration:none;text-decoration:none;background-color:transparent;}a:hover{-webkit-text-decoration:underline;text-decoration:underline;}a:active,a:hover{outline:0;}ol,ul{max-width:100%;padding-left:1.3em;list-style:none;}blockquote,q{quotes:none;}blockquote:before,blockquote:after,q:before,q:after{content:none;}table{border-spacing:0;border-collapse:collapse;}img{max-width:100%;border:0;}*,*:before,*:after{box-sizing:inherit;}b,strong{font-weight:var(--strong-font-weight);}i,em,dfn{font-style:italic;}small{font-size:80%;}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline;}sup{top:-0.5em;}sub{bottom:-0.25em;}mark{background-color:#fdffb6;}code,kbd,pre,samp{font-family:monospace;font-size:1em;}button,input,optgroup,select,textarea{margin:0;font:inherit;color:inherit;}button{overflow:visible;border:none;}button,select{text-transform:none;}button,html input[type='button'],input[type='reset'],input[type='submit']{cursor:pointer;-webkit-appearance:button;}button[disabled],html input[disabled]{cursor:default;}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0;}input{line-height:normal;}input:focus{outline:none;}input[type='checkbox'],input[type='radio']{box-sizing:border-box;padding:0;}input[type='number']::-webkit-inner-spin-button,input[type='number']::-webkit-outer-spin-button{height:auto;}input[type='search']{box-sizing:content-box;-webkit-appearance:textfield;}input[type='search']::-webkit-search-cancel-button,input[type='search']::-webkit-search-decoration{-webkit-appearance:none;}legend{padding:0;border:0;}textarea{resize:vertical;overflow:auto;}td,th{padding:0;}hr{position:relative;display:block;width:100%;height:1px;margin:2.5em 0 3.5em;padding:0;border:0;border-top:1px solid var(--border-top-color);}audio,canvas,iframe,img,svg,video{vertical-align:middle;}svg:not(:root){overflow:hidden;}fieldset{margin:0;padding:0;border:0;}p,ul,ol,dl,blockquote{margin:0 0 1.5em;}ul{list-style:disc;}ol{list-style:decimal;}ol ol,ul ul,ul ol,ol ul{margin:0.5em 0 1em;}li{margin:0.4em 0;padding-left:0.3em;line-height:1.6em;}dt{float:left;width:120px;margin:0 20px 0 0;font-weight:500;color:#15171A;text-align:right;}dd{margin:0 0 5px;text-align:left;}blockquote{margin:1.5em 0;padding:0 1.6em;border-left:#e5eff5 0.5em solid;}blockquote p{margin:0.8em 0;font-size:1.2em;font-weight:400;}blockquote small{display:inline-block;margin:0.8em 0 0.8em 1.5em;font-size:0.9em;opacity:0.8;}blockquote cite{font-weight:700;}blockquote cite a{font-weight:400;}h1,h2,h3,h4,h5,h6{margin-top:0;font-weight:600;line-height:1.15;text-rendering:optimizeLegibility;}h1 a.auto-link,h2 a.auto-link,h3 a.auto-link,h4 a.auto-link,h5 a.auto-link,h6 a.auto-link{box-shadow:none!important;}h1 a.auto-link:hover,h2 a.auto-link:hover,h3 a.auto-link:hover,h4 a.auto-link:hover,h5 a.auto-link:hover,h6 a.auto-link:hover{box-shadow:none!important;}h1 a.auto-link svg,h2 a.auto-link svg,h3 a.auto-link svg,h4 a.auto-link svg,h5 a.auto-link svg,h6 a.auto-link svg{opacity:0;fill:var(--link-color)!important;-webkit-transition:0.25s ease;transition:0.25s ease;}h1:hover a.auto-link svg,h2:hover a.auto-link svg,h3:hover a.auto-link svg,h4:hover a.auto-link svg,h5:hover a.auto-link svg,h6:hover a.auto-link svg{opacity:1;}h1{margin:0 0 0.5em;font-size:5.5rem;font-weight:600;}@media (max-width: 500px){h1{font-size:2.2rem;}}h2{margin:1.5em 0 0.5em;font-size:2.2rem;}@media (max-width: 500px){h2{font-size:1.8rem;}}h3{margin:1.5em 0 0.5em;font-size:1.8rem;font-weight:500;}@media (max-width: 500px){h3{font-size:1.7rem;}}h4{margin:1.5em 0 0.5em;font-size:1.6rem;font-weight:500;}h5{margin:1.5em 0 0.5em;font-size:1.4rem;font-weight:500;}h6{margin:1.5em 0 0.5em;font-size:1.4rem;font-weight:500;}.medium-zoom-overlay{-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);}.gatsby-resp-image-background-image{border-radius:6px;}.gatsby-resp-image-wrapper{margin:40px 0;}@media (max-width: 800px){.gatsby-resp-image-wrapper{width:100%;margin:initial;}}.medium-zoom-image{box-shadow:none!important;}.copyright{font-size:1.4rem;}.copyright a{font-size:inherit;}</style><style data-emotion="css vva9px">.css-vva9px .site-main{margin-top:64px;padding-bottom:4vw;background:var(--background-color);}</style><style data-emotion="css 163jdes">.css-163jdes{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}.css-163jdes .site-main{margin-top:64px;padding-bottom:4vw;background:var(--background-color);}</style><div class="css-163jdes e1xu36er0"><header class="site-header"><style data-emotion="css 1kbvt30">.css-1kbvt30{position:relative;padding:0 5vw;position:fixed;z-index:1000;top:0;right:0;left:0;background:var(--nav-background);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px);border-bottom:1px solid var(--nav-border-color);}</style><div class="css-1kbvt30"><style data-emotion="css 8aaawc">.css-8aaawc{width:100%;max-width:1040px;margin:0 auto;}</style><div class="css-8aaawc"><style data-emotion="css tetqay">.css-tetqay{position:relative;z-index:100;overflow-y:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;height:52px;font-size:1.3rem;}</style><nav class="css-tetqay"><style data-emotion="css qxzoul">.css-qxzoul{overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-right:10px;font-weight:500;text-transform:uppercase;letter-spacing:0.2px;white-space:nowrap;-webkit-overflow-scrolling:touch;-ms-overflow-scrolling:touch;}@media (max-width: 700px){.css-qxzoul{margin-right:0;}}</style><div class="site-nav-left css-qxzoul esgr0m44"><style data-emotion="css yn94hc">.css-yn94hc{position:relative;z-index:100;display:inline-block;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:32px;padding:12px 0;font-size:1.7rem;font-weight:700;line-height:1.8rem;color:#fff;text-transform:none;letter-spacing:-0.5px;}.css-yn94hc:hover{-webkit-text-decoration:none;text-decoration:none;}.css-yn94hc img{display:block;width:auto;height:21px;}@media (max-width: 700px){.css-yn94hc{margin-right:18px;}}</style><a class="site-nav-logo css-yn94hc" href="/"><img src="/static/a62d45ddbe29cf42da820a576d9375e1/aef42/alien.png" alt="Pozafly&#x27;s Blog" width="21" height="21"/></a><style data-emotion="css 1xdepn">.css-1xdepn{position:relative;-webkit-align-self:flex-start;-ms-flex-item-align:flex-start;align-self:flex-start;}</style><div class="css-1xdepn esgr0m43"><style data-emotion="css f30i1v">.css-f30i1v{position:absolute;z-index:1000;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0 0 0 -12px;padding:0;list-style:none;-webkit-transition:all 1s cubic-bezier(0.19, 1, 0.22, 1);transition:all 1s cubic-bezier(0.19, 1, 0.22, 1);}.css-f30i1v li{display:block;margin:0;padding:0;}.css-f30i1v li a{position:relative;display:block;padding:10px 12px;font-size:1.2rem;color:var(--main-color);opacity:0.7;-webkit-transition:opacity 0.2s ease-in-out;transition:opacity 0.2s ease-in-out;}@media (max-width: 700px){.css-f30i1v li a{padding:10px 8px;}}.css-f30i1v li a:hover{-webkit-text-decoration:none;text-decoration:none;opacity:1;}.css-f30i1v .nav-current{opacity:1;}</style><ul role="menu" class="css-f30i1v"><li role="menuitem"><a href="/">Home</a></li><li role="menuitem"><a href="/about/">About</a></li><li role="menuitem"><a href="/tags/">Tags</a></li><li role="menuitem"><a href="/tags/diary/">Diary</a></li></ul><style data-emotion="css 289bqd">.css-289bqd{position:absolute;top:10px;-webkit-transform:translateY(175%);-moz-transform:translateY(175%);-ms-transform:translateY(175%);transform:translateY(175%);font-size:1.7rem;font-weight:400;color:var(--main-color);text-transform:none;visibility:hidden;opacity:0;-webkit-transition:all 1s cubic-bezier(0.19, 1, 0.22, 1);transition:all 1s cubic-bezier(0.19, 1, 0.22, 1);}.css-289bqd .dash{left:-25px;}.css-289bqd .dash:before{content:'- ';opacity:0.5;}@media (max-width: 700px){.css-289bqd{overflow:hidden;max-width:calc(100vw - 126px);text-overflow:ellipsis;white-space:nowrap;}}</style><span class="nav-post-title css-289bqd esgr0m40">Webpack5 JavaScript 보일러플레이트 만들기</span></div></div><style data-emotion="css 1wxq7hc">.css-1wxq7hc{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:0 1 auto;-ms-flex:0 1 auto;flex:0 1 auto;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;}</style><div class="css-1wxq7hc esgr0m42"><style data-emotion="css 150gfpr">.css-150gfpr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}@media (max-width: 700px){.css-150gfpr .not-mobile{display:none;}}</style><div class="css-150gfpr esgr0m41"><style data-emotion="css u4kwjs">.css-u4kwjs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;margin:0;padding:10px;opacity:0.8;-webkit-transition:opacity 0.35s ease;transition:opacity 0.35s ease;}.css-u4kwjs:hover{opacity:1;}.css-u4kwjs svg{height:1.8rem;fill:var(--main-color);-webkit-transition:fill 0.45s ease;transition:fill 0.45s ease;}.css-u4kwjs.is-white svg{fill:#fff;}</style><a class="not-mobile css-u4kwjs" href="https://github.com/pozafly" title="Github" target="_blank" rel="noopener noreferrer"><svg width="21px" height="21px" viewBox="0 0 1024 1024" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z" transform="scale(64)"></path></svg></a><style data-emotion="css-global 8o55qm">body .theme-toggler{overflow:hidden;margin:6px;padding:2px;background:transparent;border-radius:50%;-webkit-transition:all 0.3s ease;transition:all 0.3s ease;}body .theme-toggler #switch{position:relative;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;width:21px;height:21px;padding:0;background:transparent;border:0;}body .theme-toggler .mode{position:relative;width:18px;height:18px;opacity:0.8;background:#000;-webkit-clip-path:path(
          'M17.5306 13.5882C16.6384 13.8558 15.689 14 14.7044 14C9.5004 14 5.28174 9.97061 5.28174 5.00005C5.28174 3.32422 5.76127 1.75538 6.59643 0.411865C2.77326 1.55853 0 4.96994 0 9.00001C0 13.9706 4.21866 18 9.42265 18C12.8721 18 15.8887 16.2296 17.5306 13.5882Z'
        );clip-path:path(
          'M17.5306 13.5882C16.6384 13.8558 15.689 14 14.7044 14C9.5004 14 5.28174 9.97061 5.28174 5.00005C5.28174 3.32422 5.76127 1.75538 6.59643 0.411865C2.77326 1.55853 0 4.96994 0 9.00001C0 13.9706 4.21866 18 9.42265 18C12.8721 18 15.8887 16.2296 17.5306 13.5882Z'
        );border-radius:50%;-webkit-transition:all 0.45s ease;transition:all 0.45s ease;}body .theme-toggler .mode:before{content:'';position:absolute;z-index:-1;top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);-moz-transform:translateX(-50%) translateY(-50%);-ms-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);width:5px;height:5px;opacity:0;background:inherit;border-radius:50%;-webkit-transition:box-shadow 0.4s 0s ease;transition:box-shadow 0.4s 0s ease;}body .theme-toggler .mode:after{content:'';position:absolute;top:-20%;left:30%;width:90%;height:90%;background:rgb(255 255 255 / 1);border-radius:50%;-webkit-transition:all 0.3s ease;transition:all 0.3s ease;}body .theme-toggler .mode:hover{opacity:1;}body .theme-toggler:hover{background:rgb(215 215 215 / 0.9);}body .theme-toggler.is-white .mode{background:#fff;}body .theme-toggler.is-white:hover{background:rgb(215 215 215 / 0.2);}body.dark .theme-toggler{background:transparent;}body.dark .theme-toggler:hover{background:rgb(255 255 255 / 0.1);}body.dark .theme-toggler .mode{-webkit-transform:scale(0.5);-moz-transform:scale(0.5);-ms-transform:scale(0.5);transform:scale(0.5);overflow:initial;opacity:0.8;background:white;-webkit-clip-path:none;clip-path:none;}body.dark .theme-toggler .mode:before{opacity:1;box-shadow:0 -16px 0 0 white,0 16px 0 0 white,-16px 0 0 0 white,16px 0 0 0 white,12px 12px 0 0 white,12px -12px 0 0 white,-12px 12px 0 0 white,-12px -12px 0 0 white;}body.dark .theme-toggler .mode:after{-webkit-transform:translateX(50%) translateY(-50%);-moz-transform:translateX(50%) translateY(-50%);-ms-transform:translateX(50%) translateY(-50%);transform:translateX(50%) translateY(-50%);opacity:0;-webkit-transition:background 0.45s ease;transition:background 0.45s ease;}body.dark .theme-toggler.is-white .mode:before{box-shadow:0 -16px 0 0 white,0 16px 0 0 white,-16px 0 0 0 white,16px 0 0 0 white,12px 12px 0 0 white,12px -12px 0 0 white,-12px 12px 0 0 white,-12px -12px 0 0 white;}</style><button class="theme-toggler " aria-label="theme toggle button" type="button"><div id="switch"><div class="mode"></div></div></button></div></div></nav></div></div></header><style data-emotion="css 1h9yqcb">.css-1h9yqcb{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;position:relative;padding:0 5vw;}</style><main id="site-main" class="site-main css-1h9yqcb"><div class="css-8aaawc"><style data-emotion="css 150a24d">.css-150a24d{position:relative;}</style><article class="css-150a24d"><style data-emotion="css iltggy">.css-iltggy{position:relative;margin:0 auto;padding:70px 100px 50px;word-break:keep-all;border-top-left-radius:3px;border-top-right-radius:3px;}@media (max-width: 1170px){.css-iltggy{padding:60px 11vw 50px;}}@media (max-width: 800px){.css-iltggy{padding-right:5vw;padding-left:5vw;}}@media (max-width: 500px){.css-iltggy{padding:20px 0 35px;}}</style><header class="post-full-header css-iltggy edf4ga72"><style data-emotion="css 1njwbu9">.css-1njwbu9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;font-size:1.2rem;font-weight:600;line-height:1.4em;color:#738a94;}.css-1njwbu9 a{font-size:1.2rem;color:var(--anchor-secondary-color);}</style><section class="post-full-tags css-1njwbu9 emmlh0d3"><a href="/tags/bundler/">Bundler</a>,  <a href="/tags/webpack/">Webpack</a>,  <a href="/tags/environment/">Environment</a></section><style data-emotion="css 18a1ftz">.css-18a1ftz{margin:0 0 0.2em;color:var(--post-full-title);word-break:keep-all;}@media (max-width: 500px){.css-18a1ftz{margin-top:0.2em;font-size:3.3rem;}}</style><h1 class="post-full-title css-18a1ftz edf4ga71">Webpack5 JavaScript 보일러플레이트 만들기</h1><style data-emotion="css d62skr">.css-d62skr{margin:20px 0 0;font-size:2rem;font-weight:300;line-height:1.4em;color:var(--post-card-description);}@media (max-width: 500px){.css-d62skr{font-size:1.9rem;line-height:1.5em;}}</style><p class="post-full-custom-excerpt css-d62skr emmlh0d2">모던 프론트엔드 웹 개발에 필요한 세팅을 직접 해보면서 어떤 옵션과 기능이 있는지 알아보자.</p><style data-emotion="css sglr6c">.css-sglr6c{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:35px 0 0;padding-top:15px;border-top:1px solid var(--post-full-border);}.css-sglr6c .post-full-byline-content{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}.css-sglr6c .post-full-byline-content .author-list{-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;padding:0 12px 0 0;}.css-sglr6c .post-full-byline-meta{margin:2px 0 0;font-size:1.4rem;line-height:1.2em;color:#768086;letter-spacing:0.2px;}.css-sglr6c .post-full-byline-meta .author-name{margin:0 0 3px;font-size:1.4rem;font-weight:500;line-height:1.3em;}.css-sglr6c .post-full-byline-meta .author-name a{font-size:13px;color:var(--post-full-meta-link);}.css-sglr6c .post-full-byline-meta .author-name a:hover{color:var(--post-full-meta-link-hover);}.css-sglr6c .post-full-byline-meta .byline-reading-time,.css-sglr6c .post-full-byline-meta .byline-meta-date,.css-sglr6c .post-full-byline-meta .byline-modified-time{font-size:13px;}.css-sglr6c .post-full-byline-meta .bull{display:inline-block;margin:0 4px;opacity:0.6;}</style><div class="post-full-byline css-sglr6c emmlh0d1"><section class="post-full-byline-content"><style data-emotion="css 12fmpzj">.css-12fmpzj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 0 0 4px;padding:0;list-style:none;}</style><ul class="author-list css-12fmpzj emmlh0d0"><style data-emotion="css 4q5div">.css-4q5div{position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin:0;padding:0;}.css-4q5div:hover .author-name-tooltip{-webkit-transform:translate(-10px, -2px);-moz-transform:translate(-10px, -2px);-ms-transform:translate(-10px, -2px);transform:translate(-10px, -2px);opacity:1;}</style><li class="author-list-item css-4q5div e13xkhp00"><style data-emotion="css aezf96">.css-aezf96{overflow:hidden;display:block;width:40px;height:40px;margin:0 -4px;border:2px solid var(--author-border);border-radius:100%;}@media (max-width: 500px){.css-aezf96{width:36px;height:36px;}}</style><a class="author-avatar css-aezf96" href="/about/"><style data-emotion="css 1ip6e3z">.css-1ip6e3z{display:block;width:100%;height:100%;object-fit:cover;background:var(--background-color);border-radius:100%;}.css-1ip6e3z img{border-radius:100%;}</style><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper author-profile-image css-1ip6e3z"><div aria-hidden="true" style="padding-top:100%"></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#6808f8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/static/8c061761f263c344f2c0416607c8adf1/ae5f4/pozafly.webp 40w,/static/8c061761f263c344f2c0416607c8adf1/87ddd/pozafly.webp 80w,/static/8c061761f263c344f2c0416607c8adf1/2988d/pozafly.webp 120w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/8c061761f263c344f2c0416607c8adf1/b9493/pozafly.jpg" data-srcset="/static/8c061761f263c344f2c0416607c8adf1/5e3dc/pozafly.jpg 40w,/static/8c061761f263c344f2c0416607c8adf1/d18de/pozafly.jpg 80w,/static/8c061761f263c344f2c0416607c8adf1/b9493/pozafly.jpg 120w" alt="Pozafly"/></picture><noscript><picture><source type="image/webp" srcSet="/static/8c061761f263c344f2c0416607c8adf1/ae5f4/pozafly.webp 40w,/static/8c061761f263c344f2c0416607c8adf1/87ddd/pozafly.webp 80w,/static/8c061761f263c344f2c0416607c8adf1/2988d/pozafly.webp 120w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/8c061761f263c344f2c0416607c8adf1/b9493/pozafly.jpg" srcSet="/static/8c061761f263c344f2c0416607c8adf1/5e3dc/pozafly.jpg 40w,/static/8c061761f263c344f2c0416607c8adf1/d18de/pozafly.jpg 80w,/static/8c061761f263c344f2c0416607c8adf1/b9493/pozafly.jpg 120w" alt="Pozafly"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></a></li></ul><section class="post-full-byline-meta"><div class="author-name"><a href="/about/">Pozafly</a></div><div class="byline-meta-content"><time class="byline-meta-date" dateTime="2023-04-05"> <!-- -->2023-04-05</time><span class="byline-reading-time"><span class="bull">•</span>34 min read</span></div></section></section></div></header><style data-emotion="css 1y1xnji">.css-1y1xnji{width:80%;max-height:800px;margin:25px auto 100px;-webkit-background-size:cover;background-size:cover;}.css-1y1xnji .image-wrapper{overflow:hidden;width:100%;border:1px solid var(--image-border-color);border-radius:8px;}.css-1y1xnji .image-wrapper img{border-radius:8px;}@media (max-width: 1170px){.css-1y1xnji .image-wrapper img{max-width:1170px;}}@media (max-width: 800px){.css-1y1xnji{width:100%;margin:25px auto 60px;}}</style><figure class="css-1y1xnji e16cwxex1"><div class="image-wrapper"><div data-gatsby-image-wrapper="" style="height:100%" class="gatsby-image-wrapper"><div aria-hidden="true" style="padding-top:52.307692307692314%"></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABOUlEQVR42mPgV83DiVRy+VWygUhALV9AvRhTAQMqPx+BVHIF1Ev4tNoEdNp5lMsFNCtAgmr5ODXzKWfDUKaQdo2YxRyHvAMxk67YZ+8S1m8H6uRTTONXzsbQDDRSrUBYt0FYrwmIxEz7hMwXOBfuj1l4S7/+SOziO86FB3lUq8Vtpwsa1IL15yNrLgCSYmZTJWwWSFjNk/PcIe58OLL/rHblIebwNbrVhyL7znGpVCtFXZVwWsqrmApRz4DwrUqekG6dsFEryGbzfmHzeY4F+xOW3zNtPJq48oFjwQEejRox28lCJs186DZDENC3SlkQPwtqVYuaz7LL3h/Vf8UmbZugTrOAKtDP6fzKWRCd+EM7h1+tkEe9kVejiVMulw+kBxI0OKMKzSBgPAP1ZIM15BOMZ6xG5OOSBQBYuph02N9mfQAAAABJRU5ErkJggg==" alt=""/><picture><source type="image/avif" data-srcset="/static/398ff7eccce15fa106b9755da8007778/0412e/main.avif 500w,/static/398ff7eccce15fa106b9755da8007778/74353/main.avif 800w,/static/398ff7eccce15fa106b9755da8007778/add6d/main.avif 1170w" sizes="100vw"/><source type="image/webp" data-srcset="/static/398ff7eccce15fa106b9755da8007778/e97d7/main.webp 500w,/static/398ff7eccce15fa106b9755da8007778/48071/main.webp 800w,/static/398ff7eccce15fa106b9755da8007778/6294c/main.webp 1170w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/398ff7eccce15fa106b9755da8007778/c106f/main.png" data-srcset="/static/398ff7eccce15fa106b9755da8007778/dcae2/main.png 500w,/static/398ff7eccce15fa106b9755da8007778/07f3c/main.png 800w,/static/398ff7eccce15fa106b9755da8007778/c106f/main.png 1170w" alt="Webpack5 JavaScript 보일러플레이트 만들기"/></picture><noscript><picture><source type="image/avif" srcSet="/static/398ff7eccce15fa106b9755da8007778/0412e/main.avif 500w,/static/398ff7eccce15fa106b9755da8007778/74353/main.avif 800w,/static/398ff7eccce15fa106b9755da8007778/add6d/main.avif 1170w" sizes="100vw"/><source type="image/webp" srcSet="/static/398ff7eccce15fa106b9755da8007778/e97d7/main.webp 500w,/static/398ff7eccce15fa106b9755da8007778/48071/main.webp 800w,/static/398ff7eccce15fa106b9755da8007778/6294c/main.webp 1170w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/398ff7eccce15fa106b9755da8007778/c106f/main.png" srcSet="/static/398ff7eccce15fa106b9755da8007778/dcae2/main.png 500w,/static/398ff7eccce15fa106b9755da8007778/07f3c/main.png 800w,/static/398ff7eccce15fa106b9755da8007778/c106f/main.png 1170w" alt="Webpack5 JavaScript 보일러플레이트 만들기"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><style data-emotion="css 2cqlea">.css-2cqlea{max-width:728px;margin:10px auto;font-size:12px;text-align:center;}.css-2cqlea a,.css-2cqlea span{font-size:12px;color:var(--anchor-secondary-color);}@media (max-width: 800px){.css-2cqlea{font-size:11px;}.css-2cqlea a,.css-2cqlea span{font-size:11px;}}</style><figcaption class="css-2cqlea e16cwxex0">Photo by <a href="https://www.toptal.com/javascript/a-guide-to-managing-webpack-dependencies" target="_blank" rel="noreferrer">toptal.com</a></figcaption></figure><style data-emotion="css 13di0oz">.css-13di0oz *:not(pre)>code[class*='language-']{border-radius:0.3em;background:var(--little-code-background);border:1px solid var(--little-code-border);color:var(--main-color);padding:0.15em 0.5em;white-space:normal;font-size:13px;}@media (max-width: 800px){.css-13di0oz *:not(pre)>code[class*='language-']{display:inline;}}.css-13di0oz .gatsby-highlight-code-line{display:block;margin-right:-1.3125rem;margin-left:-1.3125rem;padding-right:1em;padding-left:1.25em;border-left:0.25em solid var(--prism-border-left);font-size:1.4rem;background-image:linear-gradient(90deg, var(--prism-background) 60%, rgba(0, 0, 0, 0) 100%),none!important;}.css-13di0oz .gatsby-highlight{margin-bottom:1.75rem;margin-left:-1.3125rem;margin-right:-1.3125rem;border-radius:10px;background:var(--highlight-background);box-shadow:inset 0 0 0 1px var(--highlight-border);-webkit-overflow-scrolling:touch;overflow:auto;}.css-13di0oz .gatsby-highlight pre[class*='language-']{float:left;min-width:100%;font-size:1.4rem;line-height:24px;}.css-13di0oz pre[class*='language-'],.css-13di0oz code[class*='language-']{color:var(--pre-code-color);text-shadow:none;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-13di0oz pre[class*='language-']::-webkit-scrollbar,.css-13di0oz code[class*='language-']::-webkit-scrollbar{background-color:transparent;height:4px;}.css-13di0oz pre[class*='language-']::-webkit-scrollbar-thumb,.css-13di0oz code[class*='language-']::-webkit-scrollbar-thumb{border-radius:8px;background-color:hsla(230, 5%, 35%, 1);}@media (max-width: 800px){.css-13di0oz pre[class*='language-'],.css-13di0oz code[class*='language-']{display:inline-block;}}.css-13di0oz pre[class*='language-']{overflow:auto;}.css-13di0oz .token{font-size:1.4rem;}.css-13di0oz pre[data-line]{padding:1em 0 1em 3em;position:relative;}@media print{.css-13di0oz pre[class*='language-'],.css-13di0oz code[class*='language-']{text-shadow:none;}}.css-13di0oz pre[class*='language-']{padding:1em;overflow:auto;margin:0;}.css-13di0oz:not(pre)>code[class*='language-']{padding:0.1em 0.3em;border-radius:0.3em;color:#c9d1d9;background:#343942;}.css-13di0oz pre[data-line]{position:relative;}.css-13di0oz pre[class*='language-']>code[class*='language-']{position:relative;z-index:1;}.css-13di0oz .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:#2f2a1e;box-shadow:inset 5px 0 0 #674c16;z-index:0;pointer-events:none;line-height:inherit;white-space:pre;}.css-13di0oz .namespace{opacity:0.7;}.css-13di0oz .token.comment,.css-13di0oz .token.prolog,.css-13di0oz .token.doctype,.css-13di0oz .token.cdata{color:#8b949e;}.css-13di0oz .token.punctuation{color:#c9d1d9;}.css-13di0oz .token.property,.css-13di0oz .token.tag,.css-13di0oz .token.boolean,.css-13di0oz .token.number,.css-13di0oz .token.constant,.css-13di0oz .token.symbol,.css-13di0oz .token.deleted{color:#79c0ff;}.css-13di0oz .token.selector,.css-13di0oz .token.attr-name,.css-13di0oz .token.string,.css-13di0oz .token.char,.css-13di0oz .token.builtin,.css-13di0oz .token.inserted{color:#a5d6ff;}.css-13di0oz .token.operator,.css-13di0oz .token.entity,.css-13di0oz .token.url,.css-13di0oz .language-css .token.string,.css-13di0oz .style .token.string{color:#a5d6ff;}.css-13di0oz .token.atrule,.css-13di0oz .token.attr-value,.css-13di0oz .token.keyword{color:#a5d6ff;}.css-13di0oz .token.function{color:#d2a8ff;}.css-13di0oz .token.regex,.css-13di0oz .token.important,.css-13di0oz .token.variable{color:#a8daff;}.css-13di0oz .token.important,.css-13di0oz .token.bold{font-weight:bold;}.css-13di0oz .token.italic{font-style:italic;}.css-13di0oz .token.entity{cursor:help;}</style><style data-emotion="css 1x2k2ne">.css-1x2k2ne{position:relative;min-height:230px;margin:0 auto;padding:0 100px 6vw;font-size:2rem;line-height:1.6em;background:var(--background-color);border-radius:6px;}.css-1x2k2ne .no-image{padding-top:0;}.css-1x2k2ne h1,.css-1x2k2ne h2,.css-1x2k2ne h3,.css-1x2k2ne h4,.css-1x2k2ne h5,.css-1x2k2ne h6,.css-1x2k2ne p,.css-1x2k2ne ul,.css-1x2k2ne ol,.css-1x2k2ne dl,.css-1x2k2ne pre,.css-1x2k2ne blockquote,.css-1x2k2ne .post-full-comments,.css-1x2k2ne .footnotes{min-width:100%;margin:0 0 1.5em;}.css-1x2k2ne li>ul,.css-1x2k2ne li>ol{margin:0;}.css-1x2k2ne li{word-break:break-word;}.css-1x2k2ne li p{margin:0;}.css-1x2k2ne a[class*='image'],.css-1x2k2ne a[class*='image']:hover{box-shadow:none;}.css-1x2k2ne a[class*='image'] span[class*='image'],.css-1x2k2ne a[class*='image']:hover span[class*='image']{border-radius:6px;}.css-1x2k2ne strong,.css-1x2k2ne em{color:var(--strong-color);}.css-1x2k2ne small{display:inline-block;line-height:1.6em;}.css-1x2k2ne img,.css-1x2k2ne video{display:block;max-width:840px;height:auto;margin:2em auto;border:1px solid var(--image-border-color);border-radius:8px;}.css-1x2k2ne hr+p{margin-top:1.2em;}.css-1x2k2ne img[src$='#full']{width:100vw;max-width:none;}.css-1x2k2ne img+br+small{display:block;margin-top:-3em;margin-bottom:1.5em;text-align:center;}.css-1x2k2ne iframe{margin:10px auto 20px;}.css-1x2k2ne blockquote{margin:0 0 1.5em;padding:0 1.5em;border-left:3px solid var(--image-border-color);}.css-1x2k2ne blockquote p{margin:0 0 1em;font-size:inherit;font-style:italic;line-height:inherit;color:inherit;}.css-1x2k2ne blockquote p:last-child{margin-bottom:0;}.css-1x2k2ne code{padding:0 5px 2px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Noto Sans','Ubuntu','Droid Sans','Helvetica Neue',sans-serif;font-size:0.8em;font-weight:400!important;line-height:1em;border-radius:3px;}.css-1x2k2ne p code{word-break:keep-all;}.css-1x2k2ne pre{overflow-x:auto;max-width:100%;padding:20px;font-size:1.4rem;line-height:1.5em;color:#e5eff5;border-radius:5px;}.css-1x2k2ne pre code{padding:0;font-size:inherit;line-height:inherit;background:transparent;}.css-1x2k2ne pre code :not(span){color:inherit;}.css-1x2k2ne .fluid-width-video-wrapper{margin:1.5em 0 3em;}.css-1x2k2ne hr{margin:2em 0;}.css-1x2k2ne h1,.css-1x2k2ne h2,.css-1x2k2ne h3,.css-1x2k2ne h4,.css-1x2k2ne h5,.css-1x2k2ne h6{color:var(--home-header-color);}.css-1x2k2ne h1{margin:0.5em 0 0.4em;font-size:4.2rem;font-weight:600;line-height:1.25em;}.css-1x2k2ne p+h1{margin-top:0.8em;}.css-1x2k2ne h2{margin:1.2em 0 0.6em;font-size:3.4rem;font-weight:600;line-height:1.25em;}.css-1x2k2ne p+h2{margin-top:0.8em;}.css-1x2k2ne h3{margin:1rem 0 0.2em;padding-top:1.8rem;font-size:2.6rem;font-weight:600;line-height:1.3em;}.css-1x2k2ne h2+h3{margin-top:0.7em;}.css-1x2k2ne h4{margin:1em 0 0.2em;font-size:2rem;font-weight:800;}.css-1x2k2ne h2+h4{margin-top:0.7em;}.css-1x2k2ne h3+h4{margin-top:0;}.css-1x2k2ne h5{display:block;margin:0.5em 0;font-size:1.8rem;font-weight:600;line-height:1.35em;border:0;}.css-1x2k2ne h6{margin:0.5em 0 0.2em;font-size:2rem;font-weight:700;}.css-1x2k2ne table{overflow-x:auto;display:inline-block;border-spacing:0;border-collapse:collapse;width:auto;max-width:100%;margin:0.5em 0 2.5em;font-size:1.6rem;white-space:nowrap;vertical-align:top;background:radial-gradient(ellipse at left, rgb(0 0 0 / 0.2) 0%, rgb(0 0 0 / 0) 75%) 0 center,radial-gradient(ellipse at right, rgb(0 0 0 / 0.2) 0%, rgb(0 0 0 / 0) 75%) 100% center;background-repeat:no-repeat;background-attachment:scroll,scroll;-webkit-background-size:10px 100%,10px 100%;background-size:10px 100%,10px 100%;-webkit-overflow-scrolling:touch;}.css-1x2k2ne table th{font-size:1.2rem;font-weight:700;color:var(--home-header-color);text-align:left;text-transform:uppercase;letter-spacing:0.2px;background-color:var(--table-th-background);}.css-1x2k2ne table th,.css-1x2k2ne table td{padding:6px 12px;border:var(--table-th-border) 1px solid;}.css-1x2k2ne table td:first-of-type{background-image:var(--table-first-of-type);background-repeat:no-repeat;-webkit-background-size:20px 100%;background-size:20px 100%;}.css-1x2k2ne table td:last-child{background-image:var(--table-last-of-type);background-repeat:no-repeat;-webkit-background-position:100% 0;background-position:100% 0;-webkit-background-size:20px 100%;background-size:20px 100%;}.css-1x2k2ne figcaption{color:var(--figcaption-color);}@media (max-width: 1170px){.css-1x2k2ne{padding:0 11vw;}}@media (max-width: 800px){.css-1x2k2ne{padding:0 5vw;font-size:1.8rem;}}@media (max-width: 500px){.css-1x2k2ne{padding:0;}}@media (max-width: 500px){.css-1x2k2ne .post-full-custom-excerpt{font-size:1.9rem;line-height:1.5em;}}@media (max-width: 500px){.css-1x2k2ne p,.css-1x2k2ne ul,.css-1x2k2ne ol,.css-1x2k2ne dl,.css-1x2k2ne pre,.css-1x2k2ne .post-full-comments,.css-1x2k2ne .footnotes{margin-bottom:1.28em;}}@media (max-width: 1040px){.css-1x2k2ne img,.css-1x2k2ne video{width:100%;}}@media (max-width: 500px){.css-1x2k2ne blockquote{padding:0 1.3em;}}@media (max-width: 800px){.css-1x2k2ne h1{font-size:3.2rem;line-height:1.25em;}.css-1x2k2ne h2{margin:0.5rem 0 0.3em;font-size:2.8rem;line-height:1.25em;}.css-1x2k2ne h3{margin:0.5rem 0 0.3em;font-size:2.4rem;line-height:1.3em;}.css-1x2k2ne h4{margin-bottom:0.3em;font-size:1.8rem;line-height:1.3em;}.css-1x2k2ne h5{max-width:1060px;padding:0 0 0.5em;font-size:2.4rem;text-align:initial;}.css-1x2k2ne h6{font-size:1.8rem;line-height:1.4em;}}.css-1x2k2ne *:not(pre)>code[class*='language-']{border-radius:0.3em;background:var(--little-code-background);border:1px solid var(--little-code-border);color:var(--main-color);padding:0.15em 0.5em;white-space:normal;font-size:13px;}@media (max-width: 800px){.css-1x2k2ne *:not(pre)>code[class*='language-']{display:inline;}}.css-1x2k2ne .gatsby-highlight-code-line{display:block;margin-right:-1.3125rem;margin-left:-1.3125rem;padding-right:1em;padding-left:1.25em;border-left:0.25em solid var(--prism-border-left);font-size:1.4rem;background-image:linear-gradient(90deg, var(--prism-background) 60%, rgba(0, 0, 0, 0) 100%),none!important;}.css-1x2k2ne .gatsby-highlight{margin-bottom:1.75rem;margin-left:-1.3125rem;margin-right:-1.3125rem;border-radius:10px;background:var(--highlight-background);box-shadow:inset 0 0 0 1px var(--highlight-border);-webkit-overflow-scrolling:touch;overflow:auto;}.css-1x2k2ne .gatsby-highlight pre[class*='language-']{float:left;min-width:100%;font-size:1.4rem;line-height:24px;}.css-1x2k2ne pre[class*='language-'],.css-1x2k2ne code[class*='language-']{color:var(--pre-code-color);text-shadow:none;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-1x2k2ne pre[class*='language-']::-webkit-scrollbar,.css-1x2k2ne code[class*='language-']::-webkit-scrollbar{background-color:transparent;height:4px;}.css-1x2k2ne pre[class*='language-']::-webkit-scrollbar-thumb,.css-1x2k2ne code[class*='language-']::-webkit-scrollbar-thumb{border-radius:8px;background-color:hsla(230, 5%, 35%, 1);}@media (max-width: 800px){.css-1x2k2ne pre[class*='language-'],.css-1x2k2ne code[class*='language-']{display:inline-block;}}.css-1x2k2ne pre[class*='language-']{overflow:auto;}.css-1x2k2ne .token{font-size:1.4rem;}.css-1x2k2ne pre[data-line]{padding:1em 0 1em 3em;position:relative;}@media print{.css-1x2k2ne pre[class*='language-'],.css-1x2k2ne code[class*='language-']{text-shadow:none;}}.css-1x2k2ne pre[class*='language-']{padding:1em;overflow:auto;margin:0;}.css-1x2k2ne:not(pre)>code[class*='language-']{padding:0.1em 0.3em;border-radius:0.3em;color:#c9d1d9;background:#343942;}.css-1x2k2ne pre[data-line]{position:relative;}.css-1x2k2ne pre[class*='language-']>code[class*='language-']{position:relative;z-index:1;}.css-1x2k2ne .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:#2f2a1e;box-shadow:inset 5px 0 0 #674c16;z-index:0;pointer-events:none;line-height:inherit;white-space:pre;}.css-1x2k2ne .namespace{opacity:0.7;}.css-1x2k2ne .token.comment,.css-1x2k2ne .token.prolog,.css-1x2k2ne .token.doctype,.css-1x2k2ne .token.cdata{color:#8b949e;}.css-1x2k2ne .token.punctuation{color:#c9d1d9;}.css-1x2k2ne .token.property,.css-1x2k2ne .token.tag,.css-1x2k2ne .token.boolean,.css-1x2k2ne .token.number,.css-1x2k2ne .token.constant,.css-1x2k2ne .token.symbol,.css-1x2k2ne .token.deleted{color:#79c0ff;}.css-1x2k2ne .token.selector,.css-1x2k2ne .token.attr-name,.css-1x2k2ne .token.string,.css-1x2k2ne .token.char,.css-1x2k2ne .token.builtin,.css-1x2k2ne .token.inserted{color:#a5d6ff;}.css-1x2k2ne .token.operator,.css-1x2k2ne .token.entity,.css-1x2k2ne .token.url,.css-1x2k2ne .language-css .token.string,.css-1x2k2ne .style .token.string{color:#a5d6ff;}.css-1x2k2ne .token.atrule,.css-1x2k2ne .token.attr-value,.css-1x2k2ne .token.keyword{color:#a5d6ff;}.css-1x2k2ne .token.function{color:#d2a8ff;}.css-1x2k2ne .token.regex,.css-1x2k2ne .token.important,.css-1x2k2ne .token.variable{color:#a8daff;}.css-1x2k2ne .token.important,.css-1x2k2ne .token.bold{font-weight:bold;}.css-1x2k2ne .token.italic{font-style:italic;}.css-1x2k2ne .token.entity{cursor:help;}</style><section class="post-full-content css-1x2k2ne edf4ga70"><div class="post-content"><p>예전에 간단한 JavaScript를 사용해 페이지를 만들어볼 목적으로 webpack 기반 보일러플레이트를 만든 적이 있다. 유용하게 잘 써먹었지만, webpack을 처음부터 하나 하나 뜯어보며 설정했던 것은 아니다.</p>
<p>사실 요즘은 webpack 보다는 vite를 많이 사용하는 추세라고 한다. 하지만 vite를 사용하기 전 모듈 번들러가 어떤 역할을 해주고 있으며 어떤 기능이 있는지 알게 된다면 vite를 사용할 때, 혹은 다른 번들러를 사용하게 될 때 도움이 될 것이라고 생각한다.</p>
<p>추가적으로, webpack 설정 뿐 아니라 lint 설정과 babel 설정에 대해 이야기할 것이다. 모던 프론트엔드 웹 개발에 필요한 세팅을 직접 해보면서 어떤 옵션과 기능이 있는지 알아보자.</p>
<p>모든 결과물은 <a href="https://github.com/pozafly/2023-webpack-javascript-bolierplate" target="_blank" rel="nofollow">Repository</a>에 있다.</p>
<h2 id="목차" style="position:relative;">목차<a href="#%EB%AA%A9%EC%B0%A8" aria-label="목차 permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<ol>
<li>ESLint / Prettier</li>
<li>Husky(pre-commit), lint-staged</li>
<li>Github Template</li>
<li>Entry, Output</li>
<li>Loader</li>
<li>Plugin</li>
<li>Mode(environment)
<ul>
<li>webpack-merge</li>
<li>dotenv</li>
</ul>
</li>
<li>Babel</li>
<li>Postcss(autofreefixer)</li>
<li>Browserlist</li>
</ol>
<br/>
<h2 id="환경" style="position:relative;">환경<a href="#%ED%99%98%EA%B2%BD" aria-label="환경 permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<ul>
<li>macOS (intel)</li>
<li>Node.js ^15</li>
<li>VSCode</li>
</ul>
<br/>
<h2 id="모듈-번들러" style="position:relative;">모듈 번들러<a href="#%EB%AA%A8%EB%93%88-%EB%B2%88%EB%93%A4%EB%9F%AC" aria-label="모듈 번들러 permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<p>JavaScript에서의 <strong>모듈(Module)</strong> 은, 코드의 scope를 가지는 단위다. ES5 이하는 코드의 변수 유효 범위는 함수 스코프였다. 하지만 ES6로 넘어오면서 블록 스코프로 변했다. 하지만 여전히 전역 단위의 스코를 사용할 수 있다. 코드가 거대해질 수록 전역에 선언된 변수가 겹치는 문제가 있었고, 이를 해결하기 위해 <a href="https://developer.mozilla.org/ko/docs/Glossary/IIFE" target="_blank" rel="nofollow">IIFE</a>(즉시실행함수)를 이용해 코드의 유효 범위를 좁혔다.</p>
<p>ESM(ECMAScript Module)이 나오기 전에는 CJS(CommonJS), AMD(Asynchronous Module Definition)등의 모듈로 개발을 했었다고 한다. <a href="https://beomy.github.io/tech/javascript/cjs-amd-umd-esm/" target="_blank" rel="nofollow">이곳</a>에서 CJS, AMD, ESM등의 모듈 관련 정보를 얻을 수 있다.</p>
<p>Webpack에서는 JavaScript를 한 파일로 모아주어 모듈 별로 코드를 작성해도 전역 scope를 오염시키지 않는다. 따라서 CJS, AMD 같은 라이브러리를 사용하지 않고 전역 scope를 더럽히지 않을 수 있다. 나중에 작성된 .js 코드를 webpack이 하나의 .js 파일로 모아줄 것이기 때문이다.</p>
<p>그렇다면 Webpack에서의 모듈이란 무엇일까? Webpack에서는 웹 프로그래밍에 필요한 모든 단위를 모듈로 본다. JavaScript 파일 뿐 아니라 html 파일, css 파일, 이미지 파일, 폰트 파일 등 네트워크로 자원을 요청할 수 있는 모든 것을 모듈로 본다.</p>
<p><strong>번들(Bundle)</strong> 이란, 영어로 묶음이라는 뜻이다. Webpack 공식 문서에서 볼 수 있는 아래 사진을 보면 <code class="language-text">.js</code>, <code class="language-text">.sass</code>, <code class="language-text">.jpg</code> 등의 확장자를 하나로 묶어주는 것을 볼 수 있다. 따라서 정리를 해보자면 Webpack은 웹 어플리케이션에 필요한 모든 자원을 묶어주는 도구라고 볼 수 있다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 2000px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 43%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABc0lEQVR42o2Sy0rDUBCG8zbWapM0aZpeUts0SS/p1RuoICjdqQtRwQoqrnwLQXDhWrB9DSkiPs7vzNiEUltw8XOGnJxv/jn/UQw3xHrBE63lq3EdKVX06Tutjv9nb5EUrdyATrL8LoxKCNUJ4s1kzsVqxkG6VEOC1kUNo6YxkEGsbNBDobmFXL0vGww23SYOrh9x+TzG7vk9tFIQ7zE8RSubMN0WKZRasQlk+R1kvDbBNmEHXemYsEroHJ/hZvyNw5cP3I0+Ud8fIGlX5LC+Uf8FUm1WCVgNkRZgrS+uLAJm2GmtJy4Y2D46wXD0hcHrBLfvE9TmgOyUjZjVtoDFIdOz5Mog21ly6rR2ZByN7s2gu927eMDV0xu2T4dQ+a5I0chc5xt9gfJZlsKBsEMG6eUmjTsTSt6VMLSih5UlofD/PJnpdagBhZKjkVWyzz/zOOtzh+TZcF30lyas0jSsaco96WBRODaFok/h/3lzs+83OvMDuKo+QhHKGF0AAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="webpack-main"
        title=""
        src="/static/1e5e131ee24caf85f346a7a3c459b01f/99e71/webpack-main.png"
        srcset="/static/1e5e131ee24caf85f346a7a3c459b01f/b30f8/webpack-main.png 500w,
/static/1e5e131ee24caf85f346a7a3c459b01f/332ff/webpack-main.png 1000w,
/static/1e5e131ee24caf85f346a7a3c459b01f/99e71/webpack-main.png 2000w,
/static/1e5e131ee24caf85f346a7a3c459b01f/ffbc1/webpack-main.png 2092w"
        sizes="(max-width: 2000px) 100vw, 2000px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>그렇다면, 단순히 전역 scope를 module로 바라보고 개발하기 위해 모듈 번들링을 해야할까? 그렇지 않다. 더 중요한 이유가 있다. 바로 HTTP 1.1의 스펙 때문에 그렇다. HTTP의 간단한 요청 프로세스를 알아보자.</p>
<p>HTTP 요청을 하기 위해서는 TCP/IP 스펙에 따라 3way-handshake 과정을 통과하고, network 전송을 받고 다시 커넥션을 닫기 위해 4way-handshake 과정을 거친다. 또한, HTTPS 프로토콜은 기본이기 때문에 HTTPS Handshake 과정은 당연하게 거쳐야 한다. 서버와 브라우저가 처음 연결되어 HTTP GET 요청으로 html 파일을 받아보기까지 꽤나 많은 처리들이 이루어지고 있다.</p>
<p>GET 요청이 성공해 브라우저가 html 파일을 받았다. 브라우저는 html 파일을 파싱하면서 <code class="language-text">&lt;script></code> 태그를 만나면 다시 서버로 network 요청을 보낼 것이다. JavaScript를 로드하고 실행하기 전까지 브라우저는 멈춘다. 후에 또다시 여러 개의 <code class="language-text">&lt;script></code> 태그를 만나거나 CSS를 요청하는 <code class="language-text">&lt;link></code> 태그, Image 혹은 Font를 요청하는 태그를 만나면 그때마다 브라우저는 서버에 다시 resource를 받아오는 network 요청을 보낼 것이다. 또는, JavaScript에서 서버로 API를 통해 JSON을 요청할지도 모른다.</p>
<p>브라우저는 HTTP 1.1에서 network 동시 요청 숫자가 정해져있다. 크롬 같은 경우 동시에 요청할 수 있는 횟수는 최대 6개이다. 여러 개의 JavaScript파일을 하나로 묶는다면 네트워크 요청이 다수에서 하나로 변할 것이고, 이는 당연히 사용자가 웹 어플리케이션을 사용할 때 더 빠른 속도로 화면과 상호작용할 수 있다는 것을 뜻한다.</p>
<p>그렇기 때문에 다수의 HTTP 요청 보다는 작은 양의 요청을 보내기 위해 모듈 번들링을 해주는 것이 웹 어플리케이션을 효율적으로 구동시키기에 좋은 것이다.</p>
<p>Webpack에서는 개발에 필요한 유용한 도구도 지원한다. dev-server가 그 중 한가지다. 내가 만든 코드를 브라우저에서 바로 동작 할 수 있도록 컴퓨터에서 개발 서버를 띄워줘서 서빙해주는 역할도 하며, 또 proxy를 사용해 port 번호를 변경하거나, 코드를 변경하고 저장하면 브라우저를 새로고침하지 않아도 변경된 모듈만 교체하여 다시 보여주는 것(HMR)도 지원한다.</p>
<p>Vue2(Vue3는 Vite)도, React도 이런 모듈 번들러 위에서 동작하며, 아래에서 다루어볼 Webpack 필수 설정들은 프레임워크에서 자신의 입맛대로 커스텀해 숨겨두었다. (react 같은 경우 eject 명령어로 이를 해체해 재설정할 수 있다. Vue는 vue.config.js 파일에서)</p>
<p>생각해보면 react의 JSX나 Vue의 SFC(단일 파일 구성 요소)는 브라우저에서 이해할 수 없는 문법으로 되어있다. 브라우저는 JavaScript밖에 알지 못하기 때문이다. 하지만 브라우저에서 JSX 문법 혹은 .vue 파일이 동작할 수 있는 것은, Webpack 혹은 Babel을 통해 브라우저에서 동작하는 JavaScript 코드로 변환시키기 때문에 가능한 것이다.</p>
<p>Webpack에서는 JSX compiler를 통해 바벨과 함께 트랜스파일링하여 pure한 JavaScript 문법으로 만든다. 또한, Vue에서는 Template 코드 및 단일 파일 구성요소를 vue-loader를 통해 파싱하여 pure한 JavaScript파일로 만들어 브라우저에 제공한다. 이런 역할도 모두 모듈 번들러가 처리하고 있다.</p>
<p>따라서 개발할 수 있는 환경을 만들고, 배포에 필요한 여러 도구를 직접 만져보는 것이 중요하다. 적어도 내가 만든 코드가 어디서 어떻게 변환되어 돌아가는지 알아야 문제가 생겼을 때 대처할 수 있기 때문이다. 물론, 권장되고 기본 세팅이 된 Webpack을 사용하면서 필요할 때 공식 홈페이지에 들러 필요한 옵션을 사용하면 된다.</p>
<p>한가지 짚고 넘어갈 것은, Webpack은 Node.js 환경에서 동작한다는 것이다. JavaScript는 브라우저에서 동작하기도 하지만 Node.js 런타임 환경에서도 동작한다. 우리의 컴퓨터에서 JavaScript를 실행해서 모듈 번들링을 해야한다고 생각하면 쉽다. Webpack은 자원(모듈)을 모두 JavaScript 안으로 들고와서 Node.js 환경에서 조작할 것이다. 이것이 빌드다.</p>
<hr>
<h2 id="init" style="position:relative;">init<a href="#init" aria-label="init permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<p>폴더를 하나 만들고 terminal에서 아래 명령어를 실행한다. (Node.js가 설치되어 있다는 것을 가정한다)</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ <span class="token function">npm</span> init <span class="token parameter variable">-y</span></code></pre></div>
<p>package.json 파일이 생성 되었다. <code class="language-text">-y</code> 옵션은 따로 meta 데이터를 설정하지 않는 다는 것을 말한다. <code class="language-text">scripts</code> 부분을 보자. <code class="language-text">npm run [명령어]</code> 를 사용하면 자동으로 적힌 코드를 터미널에서 실행시켜주는 옵션이다.</p>
<p>이제 코드 환경설정 부터 해보자. 이는 개발자와 회사의 선호에 따라 달라질 수 있다.</p>
<br/>
<h2 id="ESLint--Prettier" style="position:relative;">ESLint / Prettier<a href="#ESLint--Prettier" aria-label="ESLint  Prettier permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<p>eslint와 prettier는 코드의 품질을 높여주는 도구다. IDE에서 자동으로 코드 포매팅을 도와주고, cli 명령어로 코드의 스타일을 잡아주는 도구다. 이것이 필요한 이유는 개발자 개인의 코드 스타일에도 영향을 미치지만, 협업시 개발자마다 코드를 작성하는 방식이 다르기 때문에 통일시켜주기 위해 사용한다.</p>
<p>이를 사용하면, 개발자는 포매팅 등 중요하지 않은 것에 에너지를 낭비하지 않고 핵심적인 로직에 집중할 수 있게 된다.</p>
<h3 id="차이점" style="position:relative;">차이점<a href="#%EC%B0%A8%EC%9D%B4%EC%A0%90" aria-label="차이점 permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h3>
<p>eslint는 코드의 들여쓰기 부분이나 개행 스타일의 포매팅을 잡아주기도 하지만, 문법이 틀렸다면 이를 표시해주는 역할이다. 즉 <code class="language-text">코드 문법 검사 + 포매팅</code> 의 역할을 한다. prettier는 <code class="language-text">포매팅</code> 만 한다. 예전에는 prettier의 포매팅이 eslint의 포매팅보다 나아서, eslint의 포매팅을 끄고 문법검사만 하며, prettier만으로 포매팅을 했지만 요즘은 eslint로 문법 검사와 포매팅을 하는 경우가 많아진다고 한다. 우리는 둘 다 사용할 것이다.</p>
<p><img src="/e7872bb9c087528467a4889984bb56fc/formatting.gif" alt="formatting"></p>
<p>위의 사진은 저장을 했을 때 자동으로 IDE 차원에서 포매팅을 해준 모습이다.</p>
<h3 id="ESLint" style="position:relative;">ESLint<a href="#ESLint" aria-label="ESLint permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h3>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ <span class="token function">npm</span> i <span class="token parameter variable">-D</span> eslint prettier</code></pre></div>
<p>먼저 설치를 했다면 설정 파일이 필요하다. <code class="language-text">eslintrc.js</code> 파일을 만들자.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// eslintrc.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">browser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">es2022</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'eslint:recommended'</span><span class="token punctuation">,</span>
    <span class="token string">'eslint-config-airbnb-base'</span><span class="token punctuation">,</span>
    <span class="token string">'eslint-config-prettier'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token string">'latest'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token string">'module'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 화살표 함수 매개변수 1개일 때 괄호 빼줌.</span>
    <span class="token string-property property">'arrow-parens'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token string">'as-needed'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<ul>
<li><code class="language-text">env</code> : eslint의 문법 검사의 환경을 지정한다. 나는 broswer에서 사용할 코드, 그리고 node.js 환경에서 사용할 코드, ECMAScript 2022 기준으로 코드를 작성할 것을 명시했다.</li>
<li><code class="language-text">rules</code> : eslint의 핵심이다. 어떤 규칙을 적용할지 설정해줄 수 있다. 공식 홈페이지에서 다양한 규칙을 지원하니 보고 적용시켜주면 된다. 각 스타일에 맞게 어떤 규칙은 error를 띄워줄 수도 있고, warning만 띄워줄 수도 있다. <code class="language-text">extends</code>의 규칙을 무시하고 rules가 우선순위를 가진다.</li>
<li>extends : rules의 묶음 세트다. rules를 권장하는 대로 실행시킬 수 있다. 권장되는 rules를 가진 라이브러리라고 생각하자. 이녀석들을 사용하기 위해서는 npm 에서 패키지를 다운받아야 한다. <code class="language-text">$ npm i -D eslint-config-airbnb-base eslint-config-prettier</code></li>
</ul>
<blockquote>
<p>📌 extends 유의사항</p>
<ul>
<li><code class="language-text">eslint-config-</code> 는 prefix로 생략해도 무방하다.</li>
<li><code class="language-text">eslint-config-airbnb-base</code> 는 airbnb에서 사용하는 eslint 패키지다. <code class="language-text">eslint-config-airbnb</code>와 헷갈리지 말자. base가 붙지 않은 패키지는 react lint까지 함께 딸려온다. warning을 뿜어낼꺼다. base는 JavaScript lint 패키지만 가져온다.</li>
<li><code class="language-text">eslint-config-prettier</code> : prettier도 eslint도 포매팅을 함께 사용한다고 했다. 그러면 prettier와의 충돌이 나지 않게 해주는 패키지다.</li>
</ul>
</blockquote>
<ul>
<li>parserOptions : 구문 분석 옵션이다. eslint는 우리가 작성한 코드를 파싱해서 이게 맞는지 틀린지 판단한다. <a href="https://eslint.org/docs/latest/use/configure/language-options#specifying-parser-options" target="_blank" rel="nofollow">링크</a></li>
</ul>
<p>이제 package.json 파일에 아래와 같이 적어주자.</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"lint"</span><span class="token operator">:</span> <span class="token string">"eslint"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre></div>
<p>JS 파일 하나를 만들어두고 약간 엉망인 코드를 작성하자. 그리고 <code class="language-text">npm run lint</code> 명령어를 사용해보자. 기본적인 것은 이 구조다. IDE에서만 eslint를 사용해 바로 포매팅 혹은 문법 검사를 해주는게 아니다.</p>
<p>하나 팁은, 코드 크기가 커지고 파일이 많아질 수록 lint 체크 하는 것은 시간이 걸릴 것이다. 이때 캐시를 사용할 수 있다. <code class="language-text">eslint --cache .</code> 를 위 scripts 에 붙여주자. <code class="language-text">"lint": "eslint --cache ."</code> 그리고 명령어를 실행하면 <code class="language-text">.eslintcache</code> 파일이 생성된 것을 볼 수 있다. 이제, lint를 돌릴 때마다 파일이 변경되지 않았다면 이 캐시에 있는 lint 결과를 꺼내 쓸 것이고, 새로 생성되거나 수정되었다면 새롭게 체크를 해줄 것이다. (캐시 파일은 gitignore에 등록해주자.)</p>
<p>그리고 eslint 설정에 위배되면서, eslint 스스로 고칠 수 있는 규칙이 있다. 만약 그런 규칙들도 고치고 싶다면 <code class="language-text">--fix</code> 옵션을 함께 포함해 명령하면 코드까지 함께 고쳐준다. <code class="language-text">"lint": "eslint --fix --cache ."</code></p>
<p>lint 체크를 하고 싶지 않은 파일이 있다면 <code class="language-text">.eslintignore</code> 파일에 적어주도록 하자. dist와 node_nodules는 반드시 포함해주자. 안해주면 디렉토리 내부에 있기 때문에 안에 있는 종속성 파일 모두 체크를 해버린다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 436px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 36.23853211009174%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA8ElEQVR42o1Ry3aCMBD1X3oqED3VAiFBSKogKIqntqt+RFdddt9f8HevM1OOu1YWk3kkc+fOzSRIPWz7iUhXCBILlTko68WHuqB6KXGUlZjG9q5NQr1B/fZDTTvMc4+lb7FwWzyxlTXljeQL19DA/D4gHw/L3+Tx2YjnxiBdYZoMD4f6KIaRrnH4uECZA7GpYHZn5N077P4slrUn6Kan+itm+fo29G+GyYrAemJVIswK0SpkdnQ5JwBlvGipjLvV/9cwfUHRfYGZzqwTDeOqQ7zZi4YMyl7WHrE6Aa7h+28CZPErpPURyQAoH0LG8VgNr3kR4t02B7d+AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="eslint-files"
        title=""
        src="/static/a09a76d7311d989714bc6fadea231d80/caf4a/eslint-files.png"
        srcset="/static/a09a76d7311d989714bc6fadea231d80/caf4a/eslint-files.png 436w"
        sizes="(max-width: 436px) 100vw, 436px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>이제 IDE에서도 문법이 틀린 것을 바로바로 표시해줄 수 있도록 마켓플레이스에서 ESLint 플로그인을 깔면된다. VSCode 기준으로 아래의 것이다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1482px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 27.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABY0lEQVR42l2RwU7bQBRF/SPdNCS4RMj2xPbYnngSkzgxdgoRrYpAqOqmi35AJVYtWyQkxI4NS5Z8Bf/Bjg+ouufw7JJNF0dv9DTz5t77nNP0A7+LHpNY8c5LyOYVZtEQ2jm7OicwUwaBpi8MVMKWH3f0u17KltBr8f/dcV6uT+D2O88/LUsTkTefWB+fUX0+Idxbki5qXD1mMErYFnbiMbup7epOqPHiWIjwdMZQBDjcn/Pn4Qqu1twcKVxTYmYVen9FIGqVnOP9j/h2hsr3sNUBRbPGz2cEOsKOFdb45IVF2VIGXhT8vRSVvwznTcRwUlEeHpHOa0zZkJU1uliSyOB2YDiRKNIJPS+ir97svlluo3AevymefkTcfQlxgwi9WNGcfiWpVpj6gKw+xMumjEThUGy6YSbW0y7Plu0NbU9w3CAmDEe8b38Iku5xLIrapWwUackymi5EtdiX2g7eLOl/XgH/rtUS+BxRdwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="marketplace-eslint-plugin"
        title=""
        src="/static/bfd6d07370cdd3aea3f94d8ae0e4b449/c430f/marketplace-eslint-plugin.png"
        srcset="/static/bfd6d07370cdd3aea3f94d8ae0e4b449/b30f8/marketplace-eslint-plugin.png 500w,
/static/bfd6d07370cdd3aea3f94d8ae0e4b449/332ff/marketplace-eslint-plugin.png 1000w,
/static/bfd6d07370cdd3aea3f94d8ae0e4b449/c430f/marketplace-eslint-plugin.png 1482w"
        sizes="(max-width: 1482px) 100vw, 1482px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<h2 id="Prettier" style="position:relative;">Prettier<a href="#Prettier" aria-label="Prettier permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ <span class="token function">npm</span> i <span class="token parameter variable">-D</span> prettier</code></pre></div>
<p>prettier는 포매팅만 해준다. 따라서 설정 파일이 간단하다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">printWidth</span><span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
  <span class="token literal-property property">tabWidth</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token literal-property property">useTabs</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">semi</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">singleQuote</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">trailingComma</span><span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bracketSpacing</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// 화살표 함수 매개변수 1개일 때 괄호 빼줌.</span>
  <span class="token literal-property property">arrowParens</span><span class="token operator">:</span> <span class="token string">'avoid'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>단순 코드 포매팅 옵션만 잘 설정해주면 된다. 또, 포매팅을 적용하고 싶지 않다면 <code class="language-text">.prettierignore</code> 파일을 통해 제외시키자. 마찬가지로 node_modules, dist 폴더는 포함시켜주자.</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"lint"</span><span class="token operator">:</span> <span class="token string">"eslint --fix --cache ."</span><span class="token punctuation">,</span>
  <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"prettier"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre></div>
<p>package.json 파일에 위와 같이 적어주고 돌려보자. 그러면 어떤 코드 포맷이 틀렸는지 표시해준다. 단, 수정해주지는 않는다. 여기에 필요한 것은 <code class="language-text">--write</code> 옵션이다. <code class="language-text">prettier --write</code> 으로 변경 후 돌려보면 코드 포맷이 수정까지 된 것을 볼 수 있다.</p>
<p>또한 cache를 사용할 수 있다. 최종은 <code class="language-text">prettier --write --cache .</code> 이 되겠다.</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token comment">// 최종</span>
<span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"lint"</span><span class="token operator">:</span> <span class="token string">"eslint --fix --cache ."</span><span class="token punctuation">,</span>
  <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"prettier --write --cache ."</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre></div>
<p>여기서 주의할 점은, eslint의 캐시 파일은 디렉토리 최 상단에 생성되었지만 prettier 캐시는 node_modules에 생성된다는 점이다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 410px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 63.90243902439025%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB/UlEQVR42pVTTW/TQBDNj+DEgUMSJ3Eam3jX8fo7djYk0FKaqCm0lFRpEa16RVy4ghAHJM78AA78FP7VY2ZTt0QgFA7Pnh3PPL23M651/BhtEUPoGMkshz2I0ZIR2n5EcYI2xS0ZwtRR3OEcxfzmupYIN1DzshIimSA/CfDj52csry9h+Slk+Rhy9ARuqtGLCnjDyQ2m6OcTSL0LJy5heWqTkB9WX8GSAdRYoyMV6u7AqOHiShXXcVzhb+oMITe5cYFekKE8OMH1+4/oZxo2nd10hK7K/lDxL9SaTBgN0aPG8fwYbz98gV9Obwg1EeZbk91Z9gI0+wHqRH6/1UPD9WFRnnOV7f9SKHINlRS4d/gK3W/fIfcXsInkYf6IBkCgYTjJaCvrRiGvREcoPEg0ds6uYNPdtSm/Q3a7ZL3jJ2YwWxNyYTdIYZPFhNTwXTLJev8SQ2oP0ru93IZQ5mMaTo690wu8+/QVHllly14xhaCdNDtY8LDSdfNvK3S7ShVhhcoS3yurs0SEhiNR7wmCRJP2k89NGhrHnG84Pg1RmkFuEFa/luWFGE8UNEFECsHBEfKXSxRnK+jXb1AsVwjnRwj2Z8iOT1GuLujbuTlbdGW3hPx/rlWGiIcKWangqIianyN4NoeaHWLwdIaIyMRk1yBevEA4WyCgvJjuGcJfaL2qrfu4cWsAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="prettier-cache"
        title=""
        src="/static/af86593ef3dfb82574e920d60b1f819c/acdd3/prettier-cache.png"
        srcset="/static/af86593ef3dfb82574e920d60b1f819c/acdd3/prettier-cache.png 410w"
        sizes="(max-width: 410px) 100vw, 410px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>위와 같다. 여기서 꺼내 쓸 것이다. 이제, cli는 모두 구성했으니 마찬가지로 마켓 플레이스에서 prettier를 검색해 설치하자.</p>
<p>처음 gif 사진과 같이 IDE 차원에서 코드 포매팅이 자동으로 되고 싶다면, VSCode의 설정 -> Format On Save 검색 -> 체크를 해주면 된다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1730px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 14.799999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAgElEQVR42p2NWwqDMBBFs5k20jaFJJYkmgeaCCq0+9/N7RhE8NePw7l3BmbY2yXoNOEVRohUqm/S4K7sJZjwI0ye4Zcf7LTCz1+4skDHjJYebUh6sqFCPqxjoZyh4g5lYRMYbzs8TYCkw7IfyEPNj0+PRjs0tOfVjtyd+gF1vs//T+hh/rmRb+sAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="format-on-save"
        title=""
        src="/static/a230f0556d6b5ac08ea5c15141838c6a/205df/format-on-save.png"
        srcset="/static/a230f0556d6b5ac08ea5c15141838c6a/b30f8/format-on-save.png 500w,
/static/a230f0556d6b5ac08ea5c15141838c6a/332ff/format-on-save.png 1000w,
/static/a230f0556d6b5ac08ea5c15141838c6a/205df/format-on-save.png 1730w"
        sizes="(max-width: 1730px) 100vw, 1730px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>만약 되지 않는다면 VSCode의 <code class="language-text">default formatter</code>가 어떻게 되어있는지 봐야 한다. prettier로 되어 있는지 확인.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1726px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 14.399999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAjklEQVR42n1O2w6DIBTjZ3bRmDhBYSjoFEVJtv3/33Tn8LBHH5qeNidthZpWdK+IJhyo54h62dGMAZo8Na4w846yG3BTFve2PwX/CEUB/vjAxjdc+mKgW1Mwl2gKs2vK+uFmtNOWfS6SVKoIzNIH8jeU2kFU/YSOV/kFhtiEhIIWXRqDq3xmFNwu7V+f4Qd0jWNzMt5UVwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="default-formatter"
        title=""
        src="/static/e5fef970e164c5267be414e5632a22ca/b1a8d/default-formatter.png"
        srcset="/static/e5fef970e164c5267be414e5632a22ca/b30f8/default-formatter.png 500w,
/static/e5fef970e164c5267be414e5632a22ca/332ff/default-formatter.png 1000w,
/static/e5fef970e164c5267be414e5632a22ca/b1a8d/default-formatter.png 1726w"
        sizes="(max-width: 1726px) 100vw, 1726px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>만약 그래도 되지 않는다면 setting.json 파일에 format-on-save, default-formatter가 다른 것으로 지정되어 있는지 살펴보자.</p>
<br/>
<h2 id="Husky--lint-staged" style="position:relative;">Husky / lint-staged<a href="#Husky--lint-staged" aria-label="Husky  lint staged permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<h3 id="Husky" style="position:relative;">Husky<a href="#Husky" aria-label="Husky permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h3>
<p>이제, eslint와 prettier를 husky를 통해 자동화를 해볼 것이다. 뭐든 cli를 통해 명령을 내릴 수 있는 것들은 자동화가 가능하다. <a href="https://typicode.github.io/husky/#/" target="_blank" rel="nofollow">husky</a>는 git hook을 쉽게 만들어주는 패키지다. 우리는 commit을 하기 전에 eslint와 prettier를 실행시켜 문제가 생기면 commit을 하지 못하게 만들 것이다.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ <span class="token function">npm</span> i <span class="token parameter variable">-D</span> husky</code></pre></div>
<p>패키지를 깔면 아래 명령어로 Git Hook을 활성화 해야 한다.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ npx husky <span class="token function">install</span></code></pre></div>
<p>실행하면 <code class="language-text">.husky</code> 폴더가 생성된 것을 볼 수 있다. 이제, 훅 명령어를 만들어보자.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ npx husky <span class="token function">add</span> .husky/pre-commit <span class="token string">"npm run lint"</span>
$ npx husky <span class="token function">add</span> .husky/pre-commit <span class="token string">"npm run format"</span></code></pre></div>
<p>두 명령어를 실행하면 아래 사진과 같이 .husky/pre-commit에 생성되었다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 594px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 36%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABV0lEQVR42o2QS27CMBRFs44KCUr5NeQHgeA4thPH+QIVqopg0P2v4/bFhXE7sHxfIh3f85xAGHhcY80U3pmGyw2dCitWwpc13IOCn5WYJxleoz3mUYLZhuEtTDANEnvPooPN800CZxlzBKrG7nxH/dFCaAndarTHErGQBMzgSoNGNMhli7Dq4TEO1pZIuxKs0QiFAD/WCPIazmov8Z4IbPsr+kuH3Agczxq3q0GiBCIlqR1HR43VoUBgGqQE472B+eqgPxsLl+caXirhTKny2KfqfozRaocJ5ZG7wwvlsbvHlObFlmFCOtPNwSoP86A4We8f2qTs0zrov5MWEv2pQMgFsqNBJCXEydicXxrEOrc7WsYMSwINsAXt0M47yvHvt+XjdopK4U56Ec9QUP1NrqzOADPXjpSVBS6esD+OUzY5vm8VokygJMDQaFj2APPSzCo/X/8P8Adlp+Y4+3srFAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="husky"
        title=""
        src="/static/59e11df65b238848a5d5183e77d174ac/ff7bb/husky.png"
        srcset="/static/59e11df65b238848a5d5183e77d174ac/b30f8/husky.png 500w,
/static/59e11df65b238848a5d5183e77d174ac/ff7bb/husky.png 594w"
        sizes="(max-width: 594px) 100vw, 594px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>이제 git commit을 실행할 때마다 eslint와 prettier가 자동으로 실행되고, error가 발생하면 commit을 멈춘다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1172px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 76.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACCklEQVR42pVU246bMBTkV6pusu0qN8IdDDYECJckJE1V9f9/ZDrHSSttu9lqH0YHWfac8cwxjl8O8Osjsu4Hgt0Zfjkib0eo9oB8f0A5nLDVPRbZiJe4Zu1uNW2xUr3FMttjnVVwUwMnazr4pkKy6xCVLVxlkJQlYmOQVgZxabBVGpuMSDWWcc5vg0Wk8LQJMHNDiyc3snCiqkM1XmCGCWkzQPcTol2PgjXvJmzUDl7RIKr2bNyQrLR1TdIZCebb+BWcFbuuKHWVaHbN4eaUrip8DTK7QQ59XodEQEXhK/xNZgnDqqd/VFUPSIj6dEUzfUd1uMDLd5bw2Uss5MDzHfMHcDzdMIg9PE3/SKAkEIZhxgkBPbUq70rn7xD9IYybA1R/tir1cEExnKHpqR7P2Bb1zTs2lUbi3f+IHTE9YDABVQpSXtunspKEEsCnlf/uFf8hLMZvECScO6kxCduzeEiFDEhI5x8hjJsRaXu0Kj0qVN3RXk+GWoL5MKF4JaG49GuTy8zVDKjGFz+1eDQejwn7k/WroLKiOyGj4ti+mr2tAnlFknxS9wgYUGhaO6cPBzvghjWHW9IMmKRsfjV7rKJ2zvqbZOY+UCg/AekuKpvpalO+qT3aIZexeQmVTXoZF1gmha0L4k3CLX0TMiGtWIfrT2T3v42sa75xeecSVMmQJChZc1X55pV/Abc68/v6rN7MAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="husky-precommit"
        title=""
        src="/static/a97924b03176b359a2615498a16967fb/08110/husky-precommit.png"
        srcset="/static/a97924b03176b359a2615498a16967fb/b30f8/husky-precommit.png 500w,
/static/a97924b03176b359a2615498a16967fb/332ff/husky-precommit.png 1000w,
/static/a97924b03176b359a2615498a16967fb/08110/husky-precommit.png 1172w"
        sizes="(max-width: 1172px) 100vw, 1172px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>다른 개발자가 repository를 clone 받는다면 <code class="language-text">.husky</code> 파일도 함께 clone 받아도 husky install이 안되어 있을 수 있다. 따라서 package.json 파일에 install할 수 있는 명령어를 넣어주자.</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  (...)
  <span class="token property">"prepare"</span><span class="token operator">:</span> <span class="token string">"husky install"</span>
<span class="token punctuation">}</span></code></pre></div>
<p>prepare는 <code class="language-text">npm install</code> 명령어 이후에 실행되는 스크립트다. ※ yarn은 preinstall을 사용해야 한다.</p>
<p>husky는 사실 개인 프로젝트에서 설정해줄 필요는 없다. 단, 개발자들 간에 협업을 할 경우 husky를 통해 컨벤션을 강제할 수 있어 좋다.</p>
<h3 id="lint-staged" style="position:relative;">lint-staged<a href="#lint-staged" aria-label="lint staged permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h3>
<p>lint-staged는 Git에 스테이징된 파일들에 대해서만 코드 검사나 포매팅 등의 작업을 수행할 수 있도록 도와주는 도구다. 즉 <code class="language-text">git add</code> 명령어로 추가된 파일은 git의 stage에 들어가게 되는데, <strong>stage에 들어간 파일만</strong> 대상으로 명령을 실행할 수 있도록 할 수 있다.</p>
<blockquote>
<p>husky로 lint 체크를 할 수 있는데 왜 lint-staged를 사용하는지 궁금했다. 둘 다 git hook을 사용하기 때문에 다른게 없어 보였기 때문이다. 하지만 아래와 같은 이유로 함께 사용한다. <br/>
husky는 pre-commit을 촉발 시키는 역할만 하며, 명령어로 <code class="language-text">eslint</code> 와 같은 것을 실행시킬 수 있지만, <code class="language-text">eslint</code> 명령어는 모든 파일을 검사한다. 하지만, lint-staged를 사용하면 stage에 올라온 파일만 검사하므로 훨씬 효율적으로 lint 검사를 할 수 있는 것이다.</p>
</blockquote>
<p>주로 다음과 같은 흐름으로 사용된다.</p>
<ol>
<li>Husky를 설정하여 pre-commit 훅을 트리거해, lint-staged를 실행시킴.</li>
<li>lint-staged가 스테이징된 파일들을 가져와서 설정된 작업을 수행함.</li>
</ol>
<p>설치해보자.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ <span class="token function">npm</span> i <span class="token parameter variable">-D</span> lint-staged</code></pre></div>
<p>이제 lint-staged 설정 파일을 만들자. 설정은 package.json 파일에서 해도 되지만, 나는 따로 파일로 분리시키고 싶어 <code class="language-text">.lintstagedrc.js</code> 파일을 생성했다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">'src/**/*.{js,jsx,ts,tsx}'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'eslint --fix --cache'</span><span class="token punctuation">,</span>
    <span class="token string">'prettier --write --cache'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>어떤 파일 확장자를 검사할 것인지 적어주고, 배열에 차례로 실행할 명령어를 적어주면 된다. 이 때, <code class="language-text">npm run eslint</code>나, <code class="language-text">npm run prettier</code> 등의 package.json 파일에 있는 script로 진행하면 안된다. 이유는, npm run eslint 스크립트 명령어는 <code class="language-text">eslint --fix --cache .</code> 으로, 맨 뒤 <code class="language-text">.</code>이 붙어있기 때문에 lint-staged를 사용해도 모든 파일에 적용이 되는 것이기 때문이다. 그러면 lint-staged를 사용하는 이유가 없어지게 된다. 따라서, <code class="language-text">.</code> 이 붙지 않은 명령어를 실행하도록 하자.</p>
<p>그리고 husky에 설정한 pre-commit의 명령어를 lint-staged를 실행시키도록 변경해보자. .husky/pre-commit 파일을 아래와 같이 수정한다.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh"><span class="token shebang important">#!/usr/bin/env sh</span>
<span class="token builtin class-name">.</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> -- <span class="token string">"<span class="token variable">$0</span>"</span><span class="token variable">)</span></span>/_/husky.sh"</span>

<span class="token function">npm</span> run lint-staged</code></pre></div>
<p><code class="language-text">lint-staged</code>라는 명령어를 pacakge.json에서 실행할 수 있도록 추가해주어야 한다.</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  (...)
  <span class="token property">"lint-staged"</span><span class="token operator">:</span> <span class="token string">"lint-staged"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>이제 commit을 하면 lint-staged가 실행되고, lint-staged가 완료 되어야만 정상적으로 commit이 이루어질 것이다.</p>
<p>만약 패키지 설치를 하고 싶지 않다면 install 과정을 건너뛰고 husky.sh 파일에 <code class="language-text">npx lint-staged</code> 명령을 사용할 수 있다.</p>
<br/>
<h2 id="Github-Template" style="position:relative;">Github Template<a href="#Github-Template" aria-label="Github Template permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<p>Github Template은 issue나, PR을 할 때 템플릿을 설정해준다. 소스 저장소를 Github을 사용한다면 설정해볼만 하다. 이를 통해 이슈를 생성할 때마다 어떤 틀을 가지고 설정해야 하는지, PR을 올릴 때 어떤 주제로 글을 작성해야하는지 틀을 지정할 수 있다. <code class="language-text">.github</code> 디렉토리를 생성하고 아래 두 파일 정도를 템플릿으로 지정해두면 좋다.</p>
<p><code class="language-text">ISSUE_TEMPLATE.md</code> 을 만들자.</p>
<div class="gatsby-highlight" data-language="md"><pre class="language-md"><code class="language-md"><span class="token title important"><span class="token punctuation">##</span> 이슈 목적</span>

<span class="token list punctuation">-</span> 이슈를 생성한 목적을 적는다.

<span class="token title important"><span class="token punctuation">##</span> (optional) 발생한 문제</span>

<span class="token list punctuation">-</span> 발생한 문제점에 대해 적는다.

<span class="token title important"><span class="token punctuation">##</span> (optional) 이슈에 대한 상세 내용</span>

<span class="token list punctuation">-</span> 어떤 작업을 할 것인지 세분화 해서 적는다.

<span class="token title important"><span class="token punctuation">##</span> 예상되는 결과</span>

<span class="token list punctuation">-</span> 이슈를 해결했을 때 얻는 결과를 적는다.</code></pre></div>
<p>이 파일이 repository에 올라갔다면 아래 사진과 같이 이슈를 등록하려고 들어가면 템플릿이 만들어져 있다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1924px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 57.599999999999994%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABY0lEQVR42p2TSXLCMBBFBWE2tuVRkidsPFBZZUFVLkHuf52fbkESpgoJi1caSv3U3bLFUB3gmQpSd/DVFr7+BXXG2dpTDa1bmjcQRu0RlT0C0yHIutvAM+yZE5IEYdbbmCgfaK+HZKETRNBFAxlreKHCch1i5d7HlcmRIMWaRo9GnnMcz9NsA7GWKRJdIqWyHQpaOBKjyfI+L4uLtTitxXiO6cJF3e5IGCjEqoAme1n38Ok2cRX4CD4/s8LhJ0Od1zBUuhck9sZnhJstCV3KMEpzhElmR5Zz6f/J8kLIGXKZpqht6dxLlnJP/iq9EbIkr1o4XoT50rMPM56unughPYpDQkkZcg+57CA29hPgQ188konRHJOZg4oeVXiRQWxqS5pv6VtqkBDHkfcaBGkBP84uiU6khKb+5xX0poWQSQ5TD9BVB1P10GUHVdBfoMpvWCivOF6So3h/xe6wx/Cxh37r8Akygx0/QBpkrwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="ISSUE_TEMPLATE"
        title=""
        src="/static/9c64f2564d6016e9d59f8cad5872b4f3/7768e/ISSUE_TEMPLATE.png"
        srcset="/static/9c64f2564d6016e9d59f8cad5872b4f3/b30f8/ISSUE_TEMPLATE.png 500w,
/static/9c64f2564d6016e9d59f8cad5872b4f3/332ff/ISSUE_TEMPLATE.png 1000w,
/static/9c64f2564d6016e9d59f8cad5872b4f3/7768e/ISSUE_TEMPLATE.png 1924w"
        sizes="(max-width: 1924px) 100vw, 1924px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p><code class="language-text">PULL_REQUEST_TEMPLATE.md</code>은 아래와 같다.</p>
<div class="gatsby-highlight" data-language="md"><pre class="language-md"><code class="language-md"><span class="token title important"><span class="token punctuation">##</span> 주제</span>

<span class="token list punctuation">-</span> PR 주제에 대한 간략한 설명을 적는다.

<span class="token title important"><span class="token punctuation">##</span> 작업 내용</span>

<span class="token list punctuation">-</span> 어떤 작업을 했는지 작성한다.

<span class="token title important"><span class="token punctuation">##</span> (optional) 예상되는 결과</span>

<span class="token list punctuation">-</span> 이슈를 해결했을 때 얻는 결과를 적는다.

<span class="token title important"><span class="token punctuation">##</span> (optional) 스크린샷</span>

<span class="token list punctuation">-</span> 필요하다면 스크린 샷을 이미지로 보여준다.
<span class="token list punctuation">-</span> PR이 적용되기 전과 후의 화면 스크린샷이면 좋다.

<span class="token title important"><span class="token punctuation">##</span> ⭐️ 검토 필요</span>

<span class="token list punctuation">-</span> 검토가 필요한 내용을 적는다.

<span class="token title important"><span class="token punctuation">##</span> (optional) 관련 자료</span>

<span class="token list punctuation">-</span> 작업하는데 도움이 되었던 링크 혹은 자료를 남긴다.</code></pre></div>
<p>이정도 틀이라면 개발자들끼리 소통하는데 좋은 템플릿이 될 수 있다.</p>
<p>여기까지 코드와 관련된 유용한 설정이었다. 아래부터는 Webpack 설정이다.</p>
<hr>
<br/>
<h2 id="Webpack" style="position:relative;">Webpack<a href="#Webpack" aria-label="Webpack permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<p>Webpack을 설치한다.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ <span class="token function">npm</span> i <span class="token parameter variable">-D</span> webpack webpack-cli</code></pre></div>
<p>가장 먼저 해야할 일은 <code class="language-text">webpack.config.js</code> 파일을 만드는 것이다. 위에서 Webpack은 Node.js라는 JavaScript 런타임 환경에서 동작한다고 했다. 이 파일의 설정 옵션을 보고 Webpack이 내부적으로 번들링을 처리할 것이다. (Webpack5 버전 기반)</p>
<h3 id="Entry--Output" style="position:relative;">Entry / Output<a href="#Entry--Output" aria-label="Entry  Output permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h3>
<ul>
<li>Entry : 진입점</li>
<li>Output : 결과물</li>
</ul>
<p>웹팩은 모듈 번들러라고 했다. 코드를 묶기 위해서는 진입점이 필요하다. 어떤 파일을 기준으로 연관 있는 코드를 묶을 것인지, 또 번들링이 완료된 묶인 파일은 어떻게 나올 것인지부터 정의해주자.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">main</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>기본적으로 Entry를 설정해주면, Webpack은 <code class="language-text">import</code> 키워드를 통해 묶여있는 파일을 찾는다. 파일을 찾아 연관성을 파악해 번들링 해준다. index.js 파일에 import 문구를 적어주어 파일을 묶어주자.</p>
<p>이제 output을 정의할 것이다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">main</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name]_[chunkhash:8].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<ul>
<li>path : 번들링 결과물이 나올 경로
<ul>
<li>Node.js의 path 라이브러리를 가져와 컴퓨터에 있는 경로를 지정해준다. 여기서 <code class="language-text">dist</code>란, 번들링 후 결과물이 들어갈 폴더다.</li>
</ul>
</li>
<li>filename : 번들링 된 파일의 이름
<ul>
<li>[name] : entry의 <code class="language-text">main</code>이 여기 들어간다.</li>
<li>[chunkhash:8] : chunkhash 전략을 사용한다. 8자만 해시 이름을 붙여준다.</li>
</ul>
</li>
</ul>
<blockquote>
<p>⭐️ Webpack의 hash</p>
<p>Webpack으로 번들링 된 파일은 결국 브라우저에서 HTTP 요청을 보내면 파일을 내려줄 것이다. 이때, <strong>브라우저 캐시</strong>와 (CDN을 사용한다면) <strong>CDN 캐시</strong>가 문제 될 수 있다. 배포후, 다음 릴리즈 때 다시 웹팩으로 번들링 할 것이고 filename이 동일한 파일로 되어 있다면 브라우저는 동일한 파일을 요청하는지 알고 브라우저 혹은 CDN 캐시에서 JavaScript 파일을 꺼내 쓸 것이다.</p>
<p>즉, 캐시로 인해 열심히 만든 새로운 기능이 캐시 때문에 제대로 다운로드 되지 않을 것이다. 이때 hash가 필요하다. 빌드 할 때마다 파일 이름에 붙은 hash 값이 변경된다면 브라우저, CDN은 다른 파일의 요청이기 때문에 수정된 번들 파일을 새로 요청할 것이다. Webpack의 해시는 3가지로 설정할 수 있다.</p>
<ul>
<li>[hash] : 빌드할 때마다 모든 파일에 똑같은 hash가 붙는다. (webpack5에서 deprecated)</li>
<li>[chunkhash] : 변경된 <code class="language-text">entry 기준</code>으로 묶여있는 chunk만 hash가 변경된다. (주로 JS 파일에 설정)</li>
<li>[contenthash] : 변경된 <code class="language-text">파일만</code> hash가 변경된다. (주로 CSS, Image 파일에 설정)</li>
</ul>
<p>위와 같은 캐시 버스팅을 해주었다 하더라도 결국 JS 파일을 요청하는 index.html 파일은 절대 캐시 되면 안된다. html의 meta 태그에 아래와 같이 설정해주자.</p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span>
  <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cache-control<span class="token punctuation">"</span></span>
  <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-cache, no-store, must-revalidate<span class="token punctuation">"</span></span>
<span class="token punctuation">/></span></span></code></pre></div>
<p><code class="language-text">http-equive="cache-control"</code> 같은 경우는 표준이 아니라고는 하지만, 붙여주는것이 좋아보인다. 위 content에 들어가는 내용은 서버에서 index.html 파일을 보내줄 때, response header, cache-control에 들어갈 수 있는 내용이다.</p>
<ul>
<li>no-cache : 캐시는 하되, 원서버(CDN을 지나)에 검증을 받아라.</li>
<li>no-store : 캐시를 하지말라.</li>
<li>must-revalidate : 원서버에서 응답이 없으면 error를 발생시켜라.</li>
</ul>
<p>캐시 header에 대해서 더 많은 이야기가 있지만 나중에 쓰도록 하자… <a href="https://toss.tech/article/smart-web-service-cache" target="_blank" rel="nofollow">토스-웹 서비스 캐시 똑똑하게 다루기</a> 이곳에서 더 많은 정보를 얻을 수 있다.</p>
</blockquote>
<p>여기까지 설정이 되었다면 이제 빌드를 해볼 수 있다. package.json에 아래와 같이 build script를 만들자.</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  (...)
  <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"webpack"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>이제 <code class="language-text">npm run build</code> 명령어로 번들링 명령을 내릴 수 있다. 실행하면 <code class="language-text">dist</code> 폴더에 번들링된 파일이 생성된 것을 볼 수 있다.</p>
<blockquote>
<p>chunk란?</p>
<p>chunk는 번들링된 코드를 분할하면 나오는 덩어리로 이해하면 쉽다. 프로젝트가 거대해질 수록 번들링 된 JS 파일의 크기가 매우 커진다. 그러면 현재 보여질 페이지에서 사용하지 않는 파일도 모두 한 덩어리로 나오게 되는데, 이때 지금 필요없는 JS 파일은 따로 나중에 불러오기 위해 이를 나누는 작업이다. 이를 lazy loading 이라고 한다. 또, 변경될 일이 없는 node_modules에 있는 라이브러리 파일을 vendor라는 이름으로 chunk를 나누기도 한다. 이는 캐싱 전략에도 좋다.</p>
<p>우리가 설정한 entry는 지금 <code class="language-text">main</code>으로 하나밖에 없지만 여러개가 될 수 있는데, 이는 각각 하나의 chunk를 생산한다.</p>
<p>Webpack에서는 CommonsChunkPlugin을 사용해 chunk를 나눌 수 있는데, webpack4에서 deprecated 되었고, <a href="https://webpack.kr/plugins/split-chunks-plugin/" target="_blank" rel="nofollow">SplitChunksPlugin</a>을 사용한다고 한다.</p>
</blockquote>
<br/>
<h3 id="Loader--Plugin" style="position:relative;">Loader / Plugin<a href="#Loader--Plugin" aria-label="Loader  Plugin permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h3>
<p>Loader는 JavaScript가 아닌 자원을 JavaScript가 해석할 수 있게 도와주는 옵션이다. 무슨 말이냐면, Webpack은 기본적으로 CSS, Images, Fonts등의 파일을 알지 못한다. 왜냐면 Node.js 위에서 돌아가는 프로그램이기 때문이다. 따라서 파일을 해석할 수 있게 Loader를 사용해 Webpack이 알 수 있도록 변환하는 작업을 한다.</p>
<h4 id="CSS-설정" style="position:relative;">CSS 설정<a href="#CSS-%EC%84%A4%EC%A0%95" aria-label="CSS 설정 permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h4>
<p>css 관련 loader를 설치해보자.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ <span class="token function">npm</span> i <span class="token parameter variable">-D</span> css-loader sass sass-loader style-loader</code></pre></div>
<ul>
<li>style-loader : html의 head 태그 내부에 <code class="language-text">\&lt;style></code> 태그로 css 파일을 주입한다. (빠르게 로드하므로 개발모드에서만 사용)</li>
<li>css-loader : JavaScript 파일 내부의 import문으로 css 파일을 불러온다.</li>
<li>sass : sass를 전처리 하기 위한 패키지.</li>
<li>sass-loader : sass 또는 scss 파일을 JavaScript 파일로 불러오며, css 파일로 전처리 한다.</li>
</ul>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(sa|sc|c)ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>webpack.config.js 파일에 <code class="language-text">module</code> 이란 이름 하위에 들어가는 녀석들이 loader들이다. use에 적힌 loader들은 가장 끝에서 부터 시작한다. 위의 순서를 보면 <code class="language-text">sass-loader</code> -> <code class="language-text">css-loader</code> -> <code class="language-text">style-loader</code> 순으로 로더들이 처리되는 구조다.</p>
<p>순서를 생각해보면, sass-loader가 sass(scss) 파일을 css 파일로 변환하고, css-loader가 css파일을 JavaScript에서 인식할 수 있게 바꾸어 준다. 즉, 순서가 맞다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// index.js</span>
<span class="token keyword">import</span> <span class="token string">'./reset.css'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'css loaded'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>css 파일을 JavaScript 파일에서 <code class="language-text">import</code> 문으로 가져올 수 있다. 만약 loader 없이 css를 import 하려하면 에러가 발생했겠지만 이제는 아니다. 나중에 세팅할 devServer를 실행시키면 <code class="language-text">style-loader</code>는 html 파일에 style 태그로 css 내용을 넣어주는 역할을 하고 있다.</p>
<h4 id="HtmlWebpackPlugin" style="position:relative;">HtmlWebpackPlugin<a href="#HtmlWebpackPlugin" aria-label="HtmlWebpackPlugin permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h4>
<p>Plugin은, 번들링된 결과물을 바꾸는 역할을 하고 있다. Loader와의 차이점은, Loader는 파일을 해석하고 변환하지만 Plugin은 결과물을 변경한다. devServer를 실행시키기 위해 HtmlWebpackPlugin을 설치해보자.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ <span class="token function">npm</span> i <span class="token parameter variable">-D</span> html-webpack-plugin</code></pre></div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>build를 해보면, 이번에는 dist 폴더에 없던 index.html 파일이 생성된 것을 볼 수 있다. <code class="language-text">script</code> 태그로 우리가 번들링한 index.js 파일이 담겨있는 것을 볼 수 있다. 기초가 되는 html 파일을 내가 만든 파일로 설정해야 한다.</p>
<p>프로젝트 루트에 index.html 파일을 생성하고, plugin 설정을 바꾸어주자.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span>
    <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>HtmlWebpackPlugin안에는 여러 설정이 있다. 브라우저 타이틀을 넣어줄 수 있고, favicon을 설정할 수도 있다. <a href="https://github.com/jantimon/html-webpack-plugin" target="_blank" rel="nofollow">여기</a>서 확인해볼 수 있다.</p>
<p>이제 index.html 파일 기준으로 build가 되도록 세팅되었다. index.html 파일이 생성되었기 때문에 devServer를 띄워볼 수 있다.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ <span class="token function">npm</span> i <span class="token parameter variable">-D</span> webpack-dev-server</code></pre></div>
<p>package.json 파일에 아래와 같이 설정해주자.</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  (...)
  <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"webpack serve --open"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>그리고 <code class="language-text">npm run dev</code> 명령어를 터미널에서 실행하면 브라우저에서 우리가 생성한 파일의 결과물을 볼 수 있다. <code class="language-text">--open</code> 명령어는 브라우저를 자동으로 띄워주는 역할을 한다.</p>
<p>Webpack5에서는 devServer에서 Hot Module Replacement가 기본 설정 값이기 때문에 코드 변경이 일어나면 새로고침 없이 변경된 모듈만 브라우저에서 바로 변경된다. 이를 줄여서 HMR이라고 한다.</p>
<p>개발자 도구를 띄워 확인해보면 <code class="language-text">style-loader</code> 때문에 html에 style태그에 박힌 css를 확인할 수 있을 것이다. 이번엔 style태그로 변환하는 것이 아니라, css 파일 자체로 불러와보자.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ <span class="token function">npm</span> i <span class="token parameter variable">-D</span> mini-css-extract-plugin</code></pre></div>
<p>이 플러그인은 번들링된 css 파일을 외부 파일로 만들어준다. 주로 배포 모드에서 사용하는데, 이유는 각각 나누어진 파일을 lazy-loading 할 수 있기 때문이다. style-loader 같은 경우는 한번에 모두 불러오기 때문에 비효율적일 수 있다. 따라서 모드 별로 다르게 설정해주도록 하자.</p>
<blockquote>
<p>처음에는 MiniCssExtractPlugin을 도대체 왜 사용할까 고민했다. 왜냐하면 css 파일을 js로 들고와 다시 한번 css 외부 파일로 만드는 행위가 비효율적이라고 생각했다. css 파일이 여러 개라면, 페이지별로 css를 http로 요청할 경우 각기 다른 파일을 가져오도록 하고, 이를 웹서버에서 적절히 내려주면 되는 문제 아닌가?</p>
<p>하지만 css를 js로 들고오는 이유는 다양하다. 특히 sass 같은 경우 독단으로 브라우저에서 사용할 수 없다. sass를 css로 변환하는 과정이 따로 필요하며, js에서 이를 css로 트랜스파일링 해준다. 이를 Webpack에 위임함으로 자동화가 이루어졌다. 또한 postcss를 통해 css에 후처리도 해줄 수 있다.</p>
<p>이렇게 css, image, fonts를 js로 가져오는 행위는 resource를 가공하기 위해서이다.</p>
</blockquote>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> devMode <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(sa|sc|c)ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          devMode <span class="token operator">?</span> <span class="token string">'style-loader'</span> <span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// plugin도 반드시 필요하다.</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'assets/css/[name]_[contenthash:8].css'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>이렇게. <code class="language-text">process.env.NODE_ENV</code> 는 Webpack 즉, Node.js가 빌드할 때 모드 별로 들어가는 text다.</p>
<p>최종적으로 package.json은 아래와 같다.</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"webpack --progress --mode production"</span><span class="token punctuation">,</span>
  <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"webpack serve --open --progress --mode development"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">--progress</code> 옵션을 넣어주었는데, 이는 터미널에서 빌드 진행 상황을 나타내 준다.</p>
<h4 id="이미지-처리" style="position:relative;">이미지 처리<a href="#%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%B2%98%EB%A6%AC" aria-label="이미지 처리 permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h4>
<p>Webpack4 버전 까지는 이미지를 처리하기 위해 url-loader와 file-loader 외부 패키지를 다운 받아 사용해야 했었다. webpack5에서는 url-loader, file-loader의 역할을 기본으로 지원한다.</p>
<p>먼저 file-loader의 역할은, 단순히 image 외 다른 파일을 js 파일로 가져올 수 있다. 그리고 url-loader는 이미지를 Data Uri Scheme 형태로 만들준다. base64로 인코딩 된 형식이다. 이를 html img 태그에 src 속성으로 넣어줄 수도 있고, css에서 사용하면 <code class="language-text">url(...)</code> 에 넣어주어 활용할 수 있다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 796px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 15.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAoElEQVR42jWP0Q6CMAxF+f8f9EETdQNhjCggOmDtjgO1ycntfTlNC2tLmuuVMPSkMBHDi3VdiBmSkjL84ce+J2JcsNZQ1zXGGLz3FBIjS1XyzmJzsJQXx8EOnKoRNyaaQakegn8mjk44e6F8KJdOOLVC06+E8EZE8oFIMc8z24gm3JRop6/EjZpTqDNbtrnbu+zyjVsve++emj+Ku0NV+QBPs+ZzTIpvoQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="url-loader"
        title=""
        src="/static/db79a7753403e81768643334eb4a2d09/0fbce/url-loader.png"
        srcset="/static/db79a7753403e81768643334eb4a2d09/b30f8/url-loader.png 500w,
/static/db79a7753403e81768643334eb4a2d09/0fbce/url-loader.png 796w"
        sizes="(max-width: 796px) 100vw, 796px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>url-loader 같은 경우 주로 크기가 작은 svg 파일을 사용한다.</p>
<p>기존에 Webpack4에서 이미지의 크기 설정에 따라 크기가 작다면 url-loader로 처리하고, 이미지가 크다면 file-loader로 외부에서 받아올 수 있도록 설정이 권장 되었는데, 이는 url-loader가 크기가 커질 수록 변환 시간이 오래 걸리기도 하고 html 파일을 불러오는데 기하급수적으로 이미지 크기가 커지기 때문이다.</p>
<p>이번엔 Webpack5에서의 처리를 보자. 빌트인 로더를 사용한다. 종류는 4가지다.</p>
<ul>
<li>asset/resource : <code class="language-text">file-loader</code>와 동일하다. 파일을 output(dist)로 내보내고 경로를 번들에 추가해준다.</li>
<li>asset/inline : <code class="language-text">url-loader</code>와 동일하다. Data Uri Scheme을 생성한다.</li>
<li>asset/source : <code class="language-text">raw-loader</code>와 동일하다. 파일의 소스 코드를 그대로 내보낸다. 주로 txt 파일 등을 사용한다.</li>
<li>asset : 조건에 따라 asset/resource, asset/inline 모듈 중 자동으로 선택해 내보낸다.</li>
</ul>
<p>asset 로더 같은 경우는 기본으로 <code class="language-text">8kb</code>이하는 inline(Data Uri Scheme)으로, 이상은 resource(외부 파일)로 처리한다. webpack4 사용 당시 file-loader, url-loader를 섞어 사용할 때와 같은 모습이다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|svg|jpe?g|gif|webp)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'asset'</span><span class="token punctuation">,</span> <span class="token comment">// 기본적으로 8kb 이하라면 url-loader로, 이상이면 file-loader로 동작</span>
        <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">dataUrlCondition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">maxSize</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token comment">// 기준으로 4kb 로 변경</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">generator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'assets/images/[name]_[contenthash:8][ext]'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>parser.dataUrlCondition.maxSize를 사용하면 용량 기준을 정해줄 수 있다. 그렇다면, 하위의 generator.filename은 무엇일까? build 했을 경우 dist 폴더 하위의 경로를 정해주고, 파일 명을 정해줄 수 있다.</p>
<ul>
<li>[name] : output과 동일하게 entry 파일 기준이다.</li>
<li>[contenthash:8] : 파일이 변경되면 hash가 변경된다. (위에서 살펴봤던 hash 정책을 보면 된다)</li>
<li>[ext] : 확장자명</li>
</ul>
<h4 id="build시-새로운-파일로" style="position:relative;">build시 새로운 파일로<a href="#build%EC%8B%9C-%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%8C%8C%EC%9D%BC%EB%A1%9C" aria-label="build시 새로운 파일로 permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h4>
<p>build를 하면 dist 폴더에 번들링된 파일들이 차곡차곡 쌓이고 있다. hash값이 다르기 때문에 파일을 덮어쓰는 것이 아니라 계속 쌓이고 있는 것이다. build 하면 변경된 파일이 있을 경우 dist 폴더에 남아있는 찌꺼기를 알아서 삭제해주는 <code class="language-text">clean-webpack-plugin</code> 을 설치해보자.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ <span class="token function">npm</span> i <span class="token parameter variable">-D</span> clean-webpack-plugin</code></pre></div>
<p>이 녀석은 webpack.config.js 파일의 <code class="language-text">plugin</code> 목록에 포함시킬 필요는 없다. 대신, output에 아래와 같이 명시해주면 된다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
    <span class="token literal-property property">clean</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>이제 build를 하면 dist 폴더는 최신 파일만 깔끔하게 남게 된다.</p>
<br/>
<h3 id="Mode환경-분리" style="position:relative;">Mode(환경 분리)<a href="#Mode%ED%99%98%EA%B2%BD-%EB%B6%84%EB%A6%AC" aria-label="Mode환경 분리 permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h3>
<p>이때까지는 build와 devServer가 거의 동일한 결과물로 나타났다. 하지만, 여러 옵션과 최적화를 사용하려면 Webpack 번들링에 필요한 loader 혹은 plugin이 달라진다. 따라서 환경 분리가 필수적이며, Webpack이 Mode에 따라 내부적으로 번들링하는 옵션 또한 달라지기 때문에 해주어야 한다.</p>
<h4 id="webpack-merge" style="position:relative;">webpack-merge<a href="#webpack-merge" aria-label="webpack merge permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h4>
<p>위에서 NODE_ENV를 이용해 <code class="language-text">const devMode = process.env.NODE_ENV !== 'production';</code> 이렇게 분리해도 되지만, 아예 파일을 나누는 것을 권장한다. 왜냐하면 webpack.config.js 파일이 나중에는 비대해져 가독성이 매우 떨어지기 때문이다. 어쩔 수 없이 중복코드가 생기더라도 가독성이 우선이기 때문에 나눠 주도록 하자. 총 4개의 파일로 나눌 것이다.</p>
<ul>
<li>webpack.dev.js : devServer 환경. 즉 개발 환경.</li>
<li>webpack.prod.js : build 환경. 즉 배포 환경.</li>
<li>webpack.common.js : dev, prod에 공통으로 적용될 환경.</li>
<li>webpack.config.js : <code class="language-text">dev + common</code> 혹은 <code class="language-text">prod + common</code> 이 최종적으로 나타날 환경.</li>
</ul>
<p>결과적으로 Webpack은 config.js 파일을 바라보지만, <code class="language-text">webpack-merge</code> 패키지를 통해 이를 나눌 것이다.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ <span class="token function">npm</span> i <span class="token parameter variable">-D</span> webpack-merge</code></pre></div>
<p>먼저 dev 환경이다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// webpack.dev.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span> <span class="token comment">// mode</span>
  <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">'inline-source-map'</span><span class="token punctuation">,</span> <span class="token comment">// 다름 🔥</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(sa|sc|c)ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token comment">// 다름 🔥</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          <span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// MiniCssExtractPlugin은 dev 환경에서 사용하지 않을 것이므로 제거</span>
  <span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>prod 환경이다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// webpack.prod.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span> <span class="token comment">// mode</span>
  <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span> <span class="token comment">// 다름 🔥</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(sa|sc|c)ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token comment">// 다름 🔥</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          <span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'assets/css/[name]_[contenthash:8].css'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>common 공통 환경이다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// webpack.prod.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">main</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name]_[chunkhash:8].js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">clean</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>이제 webpack-merge를 통해 묶어주도록 하자.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> merge <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> productionConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.prod.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> developmentConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.dev.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>mode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'development'</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> developmentConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'production'</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> productionConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'No matching configuration was found!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>merge를 통해 <code class="language-text">dev + common</code>, <code class="language-text">prod + common</code> 환경을 구축했다. <code class="language-text">args.mode</code> 에는 각 환경에 맞는 텍스트가 포함되게 되는데, 이는 package.json의 script를 수정해 주어야 한다.</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"webpack --mode production"</span><span class="token punctuation">,</span>
  <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"webpack serve --open --mode development"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">--mode</code> 를 통해서 주입해줄 수 있다. 아주 깔끔하게 잘 나누어졌다.</p>
<p>webpack.dev.js, webpack.prod.js 파일에 <code class="language-text">mode</code> 옵션은 반드시 환경에 따라 ‘development’, ‘production’ 텍스트를 넣어주자. Webpack이 명령어를 실행할 때 내부적으로 최적화 하는 정도가 달라진다.</p>
<h4 id="dotEnv" style="position:relative;">dotEnv<a href="#dotEnv" aria-label="dotEnv permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h4>
<p>dotEnv는 <code class="language-text">.env</code> 파일에 있는 텍스트를 Node.js가 빌드 시 <code class="language-text">process.env....</code> 를 이용해 환경 별로 다른 값을 넣어줄 수 있도록 도와주는 패키지다. 예를 들면, base-url 같은 것을 예로 들 수 있다. 개발 환경에서는 api 서버를 localhost로 지정하지만, 프로덕션 환경에서는 실제 주소를 적어주어야 하는 경우다.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ <span class="token function">npm</span> i <span class="token parameter variable">-D</span> dotenv-webpack</code></pre></div>
<p>그리고 env 폴더를 만들고, <code class="language-text">.env.development</code>, <code class="language-text">.env.production</code> 파일을 각각 만들자.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// .env.development
ENV_TEST=localhost

// .env.production
ENV_TEST=https://production.com</code></pre></div>
<p>여기의 값을 환경에 따라 집어넣을 것이다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> Dotenv <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dotenv-webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">Dotenv</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'./env/.env.development'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 또는 .env.production</span>
<span class="token punctuation">}</span></code></pre></div>
<p>이제 JavaScript 파일에서 <code class="language-text">process.env.ENV_TEST</code> 로 접근하면 환경에 따라 다른 값이 나타나는 것을 볼 수 있다. process.evn는 Node.js가 빌드할 때 넣어주는 값인데, vite에 와서는 <code class="language-text">import.meta</code> 를 사용한다고 한다.</p>
<h4 id="최적화" style="position:relative;">최적화<a href="#%EC%B5%9C%EC%A0%81%ED%99%94" aria-label="최적화 permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h4>
<p>production 모드에서 추가적으로 최적화 해주면 좋은 것들이 있다.</p>
<ul>
<li>CssMinimizerPlugin : CSS 파일을 공백을 제거 등의 압축을 해준다.</li>
<li>TerserPlugin : JS 파일의 코드를 난독화 및 압축</li>
</ul>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// webpack.prod.js</span>
<span class="token keyword">const</span> CssMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'css-minimizer-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> TerserPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'terser-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>웹 브라우저는 보안에 아주 취약하다. 개발자 도구를 열어보면 어떻게 비즈니스 로직을 작성했고, 스타일은 어떤 것을 사용했는지, html 구성을 어떻게 되어있는지 전부 볼 수 있다. JS 같은 경우 변수명까지 전부 노출되기 때문에 TerserPlugin으로 변수 명을 전부 의미 없는 것으로 변경 시키는 난독화를 해줄 수 있다.</p>
<p>압축에서 공백을 제거해주는 것만 해도 사용자에게 전달될 파일 크기가 작아진다. 네트워크 상황이 좋지 않은 환경에서는 필수라고 생각한다. 이렇게 구성하고 파일을 build 해보면 파일이 한줄로, 또 난독화가 되어있는 것을 볼 수 있다. 난독화 과정을 mangling(맹글링) 이라고 한다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1228px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 35.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABRUlEQVR42j1QWXbCQAzLZfr4KhQKBUI2kkxCyB72tdv9z6Ba5tEPvbE1sqwZ69UO0F8s8eZGeA8SqUOM/AQjqYe+wdAzGDiRou+E0sfCJ4qB9G9ujN7EQW9s42U4hVVdvlCc72jvvyhOd5TnTyin9aNPtyesD1c92a92Z5jugFw0Yb2FnRaYxhn8ooXFS2JucsWy2ujwYlWq0M1q2EkBb10jKDpF0h3VMCg7RM0O+fGGZHNUWCSy/UVMLmoWt3s0t5//FBQtxJh3rDnMmmmZqL5+w7QPHWcsb93AyxslwmarW7mAxnwOT6akhgvIsWYQGjMxOT9vVasJSbjyJNYkOUDjoNxoiqcJDZ+mTx1NyVGnCW2TYR6vMPZj+acKI3cpCDGLMjhJirgq5c5gGiawzVr4VP46kz7Fh3BeXmMSGMzEw1kV+ANnVQPL59raBgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="mangling"
        title=""
        src="/static/4e4a6ed7a5e8f6b60b50542b058c8159/a4092/mangling.png"
        srcset="/static/4e4a6ed7a5e8f6b60b50542b058c8159/b30f8/mangling.png 500w,
/static/4e4a6ed7a5e8f6b60b50542b058c8159/332ff/mangling.png 1000w,
/static/4e4a6ed7a5e8f6b60b50542b058c8159/a4092/mangling.png 1228w"
        sizes="(max-width: 1228px) 100vw, 1228px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<h4 id="소스맵" style="position:relative;">소스맵<a href="#%EC%86%8C%EC%8A%A4%EB%A7%B5" aria-label="소스맵 permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h4>
<p>소스맵이란, 코드를 디버깅 할 수 있도록 도와주는 자료다. 여기서 자료라고 한 이유는, 소스맵 설정을 어떻게 하는지에 따라 번들링 된 파일 내부에 소스맵이 있을 수도 있고, <code class="language-text">.map</code> 파일로 생성될 수도 있기 때문이다. Webpack에서는 소스맵을 생성하는 다양한 방식을 지원한다.</p>
<p>소스맵에 대해서 더 이야기해보자. 소스맵은, 브라우저에서 개발자도구를 켜면 <code class="language-text">source</code> 탭에서 보이도록 해주는 녀석이다. 즉, JS, CSS 등의 어떤 언어 차원이 아닌 브라우저 스펙이다. 브라우저에서 소스맵을 읽어들이면 console log가 어느 소스코드에서 찍혔는지, 런타임 에러가 어디에서 발생했는지 개발자 도구를 통해 알려줄 수 있다.</p>
<p>또한, 에러 로깅을 위해 Sentry를 사용한다면 이곳에도 소스맵을 올려주어 디버깅을 용이하게 해줄 수 있다. 이전에 작성한, <a href="https://pozafly.github.io/tripllo/(11)vue-sentry-error-monitoring-system/" target="_blank" rel="nofollow">Sentry 에러 로깅 시스템 도입</a> 글을 보면 소스맵도 함께 올려주는 것을 볼 수 있다.</p>
<ul>
<li>dev : <code class="language-text">devtool: 'inline-source-map',</code></li>
<li>prod : <code class="language-text">devtool: 'source-map',</code></li>
</ul>
<p>Webpack에서 권장하는 대로 위와 같이 설정해주었다.</p>
<blockquote>
<p>style-loader를 설정할 때, singletonStyleTag를 사용했었다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">"style-loader"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">injectType</span><span class="token operator">:</span> <span class="token string">"singletonStyleTag"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre></div>
<p>이 옵션은 css 파일 별로 <code class="language-text">&lt;style></code> 태그가 여러개 생기지 않고 하나로 묶이는 옵션이다. 하지만 singletonStyleTag 옵션을 사용할 경우, css 관련 소스맵이 작동하지 않는다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 818px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 99.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAADA0lEQVR42p1U2W7jOBDU///YvsyRyVyO40uSdVD3bV12bRWdBMEAg5ldAg1R3WSxuthNZ3tw8fXHE+I0x/HkYbc/4nBykRelnQdhhDAy2B/dt3gQxsjykmsqNE1nrW5a1HULZ+sa7LwUVTsy0KKqahvohwsKgjZth7br6WuQ8FDXOyNJMsRJagENfd45RBQnjGdwjDHIGJznGeM4YZpmLMuCdVlxvV5xXa9Y1xW32w0dD3HFrmoQEjTnIYFJcQoi+++dz3AqOkW368WiRtd1mKfJAvxqmEYweP8uL995xI2GdUYSEFCpNG1rWWm8baZZhpYlGTI2P32F+faAcveE88NHJN8fEXz5hPL5Jyr6kg//wOnIKn3eYjj7mNwTxqaBqxSi2ILcx3227DeIvRPyiJpxrfFchMcDCv6XiUH6+BHOSu0mAl5+/sDw5QEdF2XU1fV8pBT5lbkdTQVkES0GcvP2vaV3X3bcwVmo1/C0wfD9G7rjEeluh9TzcHJ93maKvh/wftx+YxoTyTmDNhB0HXpclxkz9RrGES3L5b2m0vL2Ypov3Hwle6vvi18+J4oN8rKyZsgoCkNU0jXLUVaV1TIvCgs68qDdfo8oirDdbnE4HLHZbOy/759JgoWtDbFJbGckmWopuHdHrG7IbbGq2HVAPwx2U54XbILG+jWXLJY1GTvSSYGiLC0jbRR4xoX6L8hcjBMx5ly+LCtsXJ3Vs36VZcEs1ADOOQgtCy1Qpb+C3VMtEfAr1spCfq2VNIYdUpOlz5jWDmRvGaYWLLdBBZSKNsZJYlMRoFgJSI+EOkqaCjQja2VnXrK0DD0/4Cl3ljotIoDMEFCvSpKm9kBJohaVBOougcinh0NE5Nd74Kh3G26oyKouqY3SpCbD5WJNi17L50/Dpqw6GtkpPVsvZXf422cYajnwZZHgulnd4N8MC6jWGw97XHbPqFmDte/j2tT2HdSllNRm4aF/D8gu6T9/Qv/4gJiAZwr/f4cFHKnTwguYwwAT603vo22l9+/gfwD8F5VR+cV6u8fWAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="css-sourcemap"
        title=""
        src="/static/e61cbdab4784b77a38e6919fea404929/f512a/css-sourcemap.png"
        srcset="/static/e61cbdab4784b77a38e6919fea404929/b30f8/css-sourcemap.png 500w,
/static/e61cbdab4784b77a38e6919fea404929/f512a/css-sourcemap.png 818w"
        sizes="(max-width: 818px) 100vw, 818px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>위 사진은 css 소스맵이 적용되었지만, singletonStyleTag는 빨간색 부분이 존재하지 않는다. 소스맵이 없어도 css는 적용한 스타일이 개발자도구에서 보이긴 하지만, 나중에 사용할 소스맵을 위해 옵션을 제거해주었다.</p>
</blockquote>
<p>자세한 자료는 <a href="https://webpack.kr/configuration/devtool/" target="_blank" rel="nofollow">Webpack공문</a>, 또는 <a href="https://medium.com/%EC%98%A4%EB%8A%98%EC%9D%98-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/source-map-%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B3%A0%EC%B0%B0-part-1-5a3f6d5ab48a" target="_blank" rel="nofollow">Source Map 에 대한 고찰</a>을 참고하자.</p>
<h4 id="stats" style="position:relative;">stats<a href="#stats" aria-label="stats permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h4>
<p>stats는 번들링을 진행하면 터미널에 어떤 번들된 정보를 표시할지 지정하는 옵션이다. 이 옵션을 설정하지 않으면 번들 정보가 꽤 많이 나타나는데, 옵션을 통해 번들 정보를 아예 보이지 않게 만들어줄 수도 있고, 가볍게 나타내보일 수도 있다. <a href="https://webpack.kr/configuration/stats/" target="_blank" rel="nofollow">공식 홈피</a>에 나와 있는대로 preset을 설정해보면서 맞는 옵션을 찾아보면 좋다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// webpack.common.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
  <span class="token literal-property property">stats</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">preset</span><span class="token operator">:</span> <span class="token string">'minimal'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">moduleTrace</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 종속성 경고/에러 표시</span>
    <span class="token literal-property property">errorDetails</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 에러 세부 정보</span>
    <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>나는 위와 같이 설정해주었다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 2000px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 19.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA4ElEQVR42nWNyXaCQAAE+RkPQcElhGWQYRhBNiGo4JKXnHLM/58r8zTXHOpV96XbSruK43dPPpXkY0lxqdBTR3E/EbY9m+aCmzU4cm8omK0DZiv/Xyx97pl+LtRfA83nO81HR2kobi35tUde7yTjRDTc8LobTlqag9q4emZVP/k7tdRwJhtPiK4nPjTItiYoNK+ZxNMpvpYsgogXL8L2tyyilHmYGquHHSGfbBV2mGDtDkdCXeMlOW/ZjqTbEZYaX+1ZCc08kLhC4ZoBJ5QshRkLEtPlo69FzCYWbJTEDgS/05WKq6BcC4cAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="stats"
        title=""
        src="/static/8ea2f555123f4980b72a4b756d29cd5c/99e71/stats.png"
        srcset="/static/8ea2f555123f4980b72a4b756d29cd5c/b30f8/stats.png 500w,
/static/8ea2f555123f4980b72a4b756d29cd5c/332ff/stats.png 1000w,
/static/8ea2f555123f4980b72a4b756d29cd5c/99e71/stats.png 2000w,
/static/8ea2f555123f4980b72a4b756d29cd5c/80a94/stats.png 2144w"
        sizes="(max-width: 2000px) 100vw, 2000px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<br/>
<h2 id="Babel-설정" style="position:relative;">Babel 설정<a href="#Babel-%EC%84%A4%EC%A0%95" aria-label="Babel 설정 permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<p>Babel은 브라우저 하위 호환성을 위해서 만들어졌다. 최신 브라우저에서는 ECMAScript에 명세된 스펙을 준수하지만, 오래된 브라우저에서는 ECMAScript 버전이 낮게 개발되어 있어 최신 문법은 적용이 되지 않는다. Babel은 이를 해결하기 위해서 나타났다. 재미있는 것은 Babel 어원이다. 성경에 바벨탑이 나오는데, 사람들이 탑을 높게 쌓아서 하나님이 되려하자 하나님이 사람들의 언어를 다 다르게 만들어버렸다. 이를 다시 하나로 만들기 위해 Babel 이라는 이름을 사용한 것 같다.</p>
<p>어쨌든, Babel은 브라우저 하위 호환성을 위해 크게 2가지 역할을 하고 있다.</p>
<ul>
<li>트랜스파일링</li>
<li>폴리필 제공</li>
</ul>
<p>트랜스파일링은 말 그대로 JavaScript 문법을 이전 문법으로 변환시켜준다. JavaScript는 ES6에서 문법이 크게 변했다. ES6 이상 문법을 사용하면서 구 브라우저를 지원하기 위해 Babel을 사용할 수 있다. react에서는 심지어 ECMAScript tc39에 제안사항으로 올라온 문법을 Babel을 사용해 변환하기도 한다.</p>
<p>폴리필은, 트랜스파일링과 다르게 문법을 변환하는 것이 아니라 구현체를 제공한다. 예를 들면 <code class="language-text">Promise</code> 객체가 있을 수 있다. 구 브라우저에서 Promise 객체가 구현이 되지 않았지만 폴리필에서 Promise를 옛 문법을 이용해 구현한 코드를 제공한다. 폴리필은 <code class="language-text">core-js</code> 라이브러리에 기반하고 있다. 따라서 Babel에서 폴리필을 사용하기 위해 core-js 라이브러리가 필요하다. 설정해보자.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ <span class="token function">npm</span> i <span class="token parameter variable">-D</span> @babel/core @babel/preset-env babel-loader core-js</code></pre></div>
<ul>
<li>@babel/core : 바벨이 동작할 수 있게 하는 core</li>
<li>@babel/preset-env : 쉽게 바벨을 설정할 수 있도록 패키지를 모아둔 라이브러리</li>
<li>babel-loader : Webpack에서 Babel을 사용할 수 있게 도와줌</li>
<li>core-js : 폴리필을 제공할 라이브러리</li>
</ul>
<p>이제 <code class="language-text">.babelrc</code> 파일을 만들자.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token string-property property">"presets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">"@babel/preset-env"</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token string-property property">"targets"</span><span class="token operator">:</span> <span class="token string">"ie 11"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"useBuiltIns"</span><span class="token operator">:</span> <span class="token string">"usage"</span><span class="token punctuation">,</span> <span class="token comment">// 폴리필 사용 방식 지정</span>
        <span class="token string-property property">"corejs"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token comment">// 폴리필 버전 지정</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p>presets은 babel 설정이 들어있는 패키지다. 예전에는 <code class="language-text">@babel/preset-env</code> 대신 사용하던 라이브러리는 <code class="language-text">@babel/polyfill</code> 이다.</p>
<p>이제는 core-js와 regenerator-runtime이 더 이상 필요하지 않게 되었다. 이전에는 @babel/polyfill이 필요한 기능을 대체하기 위해 core-js와 regenerator-runtime을 내부적으로 사용했지만, 최신 버전의 Babel에서는 이러한 기능이 기본적으로 포함되어 있기 때문에 @babel/polyfill은 더 이상 필요하지 않다. 따라서, @babel/preset-env를 사용한다.</p>
<p>target은 지원하고자 하는 브라우저가 들어간다. ie 뿐 아니라 firefox, chrome 버전을 명시해줄 수 있다. 아래에서 살펴볼 browserlist의 내용이 들어갈 수 있다.</p>
<p>여기서 중요한 옵션은 <code class="language-text">useBuiltIns</code> 옵션이다. useBuiltIns에는 아래 3가지 옵션이 들어갈 수 있다.</p>
<ul>
<li>entry : 전역 네임 스페이스에 필요 폴리필을 import 한다.</li>
<li>usage : 필요한 모듈 혹은 scope에 필요 폴리필을 import 한다.</li>
<li>false : 폴리필을 사용하지 않는다.</li>
</ul>
<p>예전에 babel을 사용할 때는 무조건 폴리필이 전역에 import 되어 전역 네임스페이스를 더렵혔다.</p>
<p>만약, 프로덕트가 SDK로 다른 업체에 제공되는 프로덕트라고 가정해보자. SDK에서 폴리필이 전역 네임스페이스를 더럽히면, 다른 업체에서 사용하는 전역 변수와 겹칠 가능성이 생긴다. 아주 우연찮게 겹치게 되면 폴리필이 새로운 변수 혹은 함수로 대체되어 사용할 수 없게 되어버린다.</p>
<p>하지만, 필요한 곳에서 import해 사용하는 것이 아니라 전역에 폴리필을 깔면 필요한 부분을 찾을 비용이 들지 않기 때문에 퍼포먼스적으로 좋을 수 있다. usage를 사용하면, 필요한 모듈에 폴리필을 깔아준다.</p>
<p>참고 : <a href="https://tech.kakao.com/2020/12/01/frontend-growth-02/" target="_blank" rel="nofollow">Babel7과 corejs3 설정으로 전역 오염 없는 폴리필 사용하기</a>, <a href="https://so-so.dev/web/you-dont-know-polyfill/" target="_blank" rel="nofollow">you don’t know polyfill</a></p>
<p>이제, webpack.common.js 파일에 babel-loader를 설정해주자.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">cacheDirectory</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<ul>
<li>exclude : 제외할 폴더</li>
<li>options.cacheDirectory : 바벨 캐시 설정</li>
</ul>
<p>이제 build를 해보면 .babelrc 파일에 설정된 target 브라우저에 맞게 트랜스파일링과 polyfilling이 된 것을 확인해볼 수 있다. 캐시 설정을 해주었는데, prettier와 마찬가지로 node_modules에 캐시가 생성된다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 596px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 29.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABAElEQVR42pWRy07DMBBF8yPQ0uZtu3k5ceI0SVMqiFQWiAULxJYVW/7/Mp6ILYLF1Z2xRsfz8BLdIWxH7JZnRM0RcdUhqXvE2iIs23/LU2ZA1M/wP7+QDBdIgkt7guhOCEqDoGhIhvUn4FZk2JD0eMFxecJOFQgdIK/h55o9JOg+q+Bqf5NPtd5dSonKYe4XjNc33MQljU2/OeChYlhEne4pvo0lNqTVFcerkxIFPyOgazMibYXG+4fE40uNSM9QdoJoJ0gaXZIrWgvndsahP0PRO7t1tWfeO4/MQDpAUHS4vjawDwZx7WADUtqv6KbVabfOk2ZgsItTM3Kekn6O+A3Hvr2veFN1ewAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="babel-cache"
        title=""
        src="/static/cc478fc5e8ba6376d52451a262ca15c9/ad3a2/babel-cache.png"
        srcset="/static/cc478fc5e8ba6376d52451a262ca15c9/b30f8/babel-cache.png 500w,
/static/cc478fc5e8ba6376d52451a262ca15c9/ad3a2/babel-cache.png 596w"
        sizes="(max-width: 596px) 100vw, 596px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<br/>
<h2 id="browserlist" style="position:relative;">browserlist<a href="#browserlist" aria-label="browserlist permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<p>브라우저 리스트는, 웹 개발에 필요한 라이브러리가 하위호환성을 참고할 때, 어떤 브라우저 기준으로 설정해야할지 지정할 수 있는 옵션이다. 우리는 babel의 target 브라우저는 .babelrc 파일에 설정했다. 하지만, <code class="language-text">.browserslistrc</code> 파일을 만들어 제공해도 되고, package.json의 <code class="language-text">browserslist</code> 를 통해 명시해줄 수 있다.</p>
<p><a href="https://github.com/browserslist/browserslist" target="_blank" rel="nofollow">browswerlist</a>는 <a href="https://caniuse.com/" target="_blank" rel="nofollow">caniuse</a>의 데이터를 참고한다. 웹 개발에 호환성 확인으로 빠질 수 없는 페이지다. 아래에서 postcss 설정을 할 것이기 때문에 .babelrc 파일의 target을 제거하고 package.json 파일에 담아보자.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
  <span class="token string-property property">"browserslist"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"ie 11"</span><span class="token punctuation">,</span>
    <span class="token string">"chrome 111"</span><span class="token punctuation">,</span>
    <span class="token string">"firefox 111"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>last 2 versions 같은 값을 사용해 브라우저 별로 최근 2개의 버전까지 지원 가능하도록 만들 수도 있다.</p>
<br/>
<h2 id="postcss" style="position:relative;">postcss<a href="#postcss" aria-label="postcss permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<p>postcss는 css를 후처리 할 수 있도록 도와주는 패키지다. sass는 전처리이다. 빌드 시점에 sass를 css로 변환한다고 해서 ‘전처리’라는 이름이 붙었다. postcss의 경우는 완성된 css 파일에 추가적인 처리를 한다고 해서 ‘후처리’ 라는 이름이 붙었다. 마치 Webpack의 loader와 plugin같다. postcss는 여러 유용한 것을 제공하지만, Autoprefixer를 지원한다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 536px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 81.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACy0lEQVR42m1U2XLaQBDkV4gBG2wMCBCSVtfqAEnct5O4Uqn8/z90ehZT4LIfWtpdUKt7pke1VGns4ykKlWHkj2GHFuqvDlrWhHDQHEwMZH3Z33A9u0dtPAkQeRF0kOHVcTDWIdrjAE8jD49Dl2sfz/zPI/dPQwfPIxfdsWfubf7+hfCBlzoR739BVTu4xQZ6c4JenxAuD5j//od0+4ZuNIPyfBynGeaJxjFP8cqz1kihdeegZlTw7apYY5TM4ORzTLI57LQy8MoNxmmBSb4wqgNFR4E4iuAGGp1J+KkktcePRbw+wpktYbGefrWBP99eCPmibPcT+vCOxtBDEceoqLCMI6T6orLZt2+Ewv7KxkS0Fy72SLZn9FTC+xtmx3eW4p0lcZEqD9sswVzH0FGCdpCzeaNPdm+EfoKAZIr2hHhIlcOkxCBIoaclehMfM60R+CHSMDKWh0HyfZeFsO/zwc2Ztk8I5juktDhIKrQHYxwyjZBE2g9QkfQ8y3HKE5TlAi07+F5hjwr9amsUerMV1e5MbSzbM/VKqOqFZan3bPzoCyZosAxN62smL5a9mBHZGyg2JF4dYVHhC/OmY41cJ0xAyRy66PCsbTJ5yeHtfhcbkS3ZcxgN6ap0WKwrqta7X3DKrcmluJid/6CfrzBwAyypXvC3ylEu1nhgCmpC1uEkSP3ErtgX6wLJnhBLNj2Stpm5MGJzwhhTxicjem6ELqemY6uLQrlIYJ3p8uPhhSFzSe6VEvbChN7jFLXoRpojTdoxQtM0w5OXoNEbm3p+1NDhvCpEqwNJFyaLUsdLqFem47LPmMteXHDeAxPuRZogD0NEnKLm3fjVeq7N4VewOW6DMIMVTdHnh0Ksy9QMNbsd5RjpAs9ujK7tQ3H8HI9wFSxm9X6ea2Fm4cW2Ue+O8EDpArHQYDyu+yuaAxsNPljvXyDxkfPrp04I/wPbLRzCGf+khQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="autoprefixer"
        title=""
        src="/static/9da294abebc22c88c9847851079ef33a/597c9/autoprefixer.png"
        srcset="/static/9da294abebc22c88c9847851079ef33a/b30f8/autoprefixer.png 500w,
/static/9da294abebc22c88c9847851079ef33a/597c9/autoprefixer.png 536w"
        sizes="(max-width: 536px) 100vw, 536px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p><code class="language-text">-ms-flex</code> 라는 prefix가 붙었다. 이는 브라우저마다 지원하는 vendor prefixer가 다르기 때문이다. css 코드 중 구 브라우저를 지원하기 위해 이런 prefix를 붙여주는 것이다.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ <span class="token function">npm</span> i <span class="token parameter variable">-D</span> postcss postcss-preset-env</code></pre></div>
<p>postcss와 postcss-preset-env를 설치했다.</p>
<p>webpack.common.js 파일에 아래와 같이 작성하자.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> postcssPresetEnv <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-preset-env'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(sa|sc|c)ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
    <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">postcssOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// autoprefix를 사용하기 위한 플러그인</span>
          <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">postcssPresetEnv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre></div>
<p>로더에 위와 같이 postcssPresetEnv 설정을 해주었다. postcss 설정을 생각보다 간단하다.</p>
<br/>
<h2 id="dependencies-vs-devDependencies" style="position:relative;">dependencies vs devDependencies<a href="#dependencies-vs-devDependencies" aria-label="dependencies vs devDependencies permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<p>npm으로 설치한 패키지들은 모두 <code class="language-text">-D</code> 옵션을 붙여 package.json의 dependencies에 설치한 것이 아니라, devDependencies에 설치했다. <code class="language-text">-D</code>옵션은 <code class="language-text">--save-dev</code> 옵션을 주어 설치한 것과 동일하다. 만약, <code class="language-text">-D</code> 옵션을 주지 않으면 dependencies에 설치된다.</p>
<ul>
<li>dependencies : 프로덕션 환경에 필요한 어플리케이션에 필요한 패키지</li>
<li>devDependencies : 로컬 개발 환경에 필요한 패키지</li>
</ul>
<p>Webpack, ESLint, Babel 등 이번에 설치한 패키지들은 모두 로컬 개발환경에 필요한 패키지다. 만약 배포될 어플리케이션에 필요한 <code class="language-text">axios</code> 같은 http 통신 라이브러리 같은 경우는 <code class="language-text">-D</code> 옵션이 붙지 않은 dependencies에 설치되어야 할 것이다. dependencies에 설치된 패키지는 빌드할 때 코드가 함께 번들링 된다. 즉, dist 폴더에 소스코드가 함께 포함된다.</p>
<p><code class="language-text">$ npm ci</code> 를 실행하면, lock 파일에 설정된 패키지 버전을 명확하게 설치해준다. ci/cd 환경에서는 <code class="language-text">$ npm i</code> 보다는 clean install을 사용해주도록 하자.</p>
<hr>
<p>배포 환경을 고려해 Webpack으로 개발환경을 구성해보았다. Vite 같은 경우 사전 번들링을 esbuild로 사용하고, Native ESM을 이용해 브라우저에 제공한다고 한다. Webpack의 import 구문은 기본적으로 Native ESM이 아니다(Chunk가 나누어지면 ESM으로 사용할 수 있다). import 구문을 통해 Webpack은 하나의 결과물로 나타내기 때문이다.</p>
<p>당연히 Vite가 더 빠를 수 밖에 없을 것 같다. 다음 번엔 Vite에 대해서 알아보려고 한다. 모던 모듈 번들러가 생각보다 많은 처리를 하고 있고, 자동화를 하고 있다. 앞으로도 모듈 번들러가 해주는 역할은 크게 변할 것 같지는 않다.</p>
<p>P.S. Vite에 관련한 글을 적어보았다. <a href="https://pozafly.github.io/environment/why-do-you-use-import-meta-in-vite/" target="_blank" rel="nofollow">Vite에서 import.meta는 왜 사용하는 걸까? (feat. HMR)</a>라는 글인데, 한번쯤 읽어보셔도 좋다 :)</p></div></section></article><style data-emotion="css lhozv1">.css-lhozv1{position:relative;box-sizing:border-box;width:100%;max-width:760px;margin-right:auto;margin-left:auto;}</style><div class="css-lhozv1"><div></div></div></div></main><style data-emotion="css dcfhc9">.css-dcfhc9{position:relative;padding:0 5vw;}</style><style data-emotion="css 1exn8a1">.css-1exn8a1{background:#0a0b0c;position:relative;padding:0 5vw;}.css-1exn8a1 .post-card{padding-bottom:0;border-bottom:none;}.css-1exn8a1 .post-card:after{display:none;}.css-1exn8a1 .post-card-primary-tag{color:#fff;opacity:0.6;}.css-1exn8a1 .post-card-title{color:#fff;word-break:keep-all;opacity:0.8;-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out;}.css-1exn8a1 .post-card:hover .post-card-image{opacity:1;}.css-1exn8a1 .post-card-excerpt{color:rgb(255 255 255 / 0.6);}.css-1exn8a1 .static-avatar{border-color:#000;}.css-1exn8a1 .post-card-byline-content{color:rgb(255 255 255 / 0.6);}.css-1exn8a1 .post-card-byline-content a{color:rgb(255 255 255 / 0.8);}.css-1exn8a1 .author-avatar{border-color:#0a0b0c;}.css-1exn8a1 .author-profile-image{background:#0a0b0c;}@media (max-width: 650px){.css-1exn8a1 .post-card{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;margin:25px;padding:25px 0 0;}}</style><aside class="read-next css-1exn8a1 e7ky4j51"><div class="css-8aaawc"><style data-emotion="css 2ud111">.css-2ud111{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 -25px;padding:60px 0 0;}</style><div class="read-next-feed css-2ud111 e7ky4j50"><style data-emotion="css 1ncrsd">.css-1ncrsd{position:relative;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:0 1 326px;-ms-flex:0 1 326px;flex:0 1 326px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0 25px 50px;padding:25px;background:linear-gradient(
    #1a1c20,
    #0a0b0c
  );border-radius:12px;}.css-1ncrsd a{-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out;}.css-1ncrsd a:hover{-webkit-text-decoration:none;text-decoration:none;}@media (max-width: 1170px){.css-1ncrsd{-webkit-flex:1 1 261px;-ms-flex:1 1 261px;flex:1 1 261px;margin-bottom:5vw;}}@media (max-width: 650px){.css-1ncrsd{display:none;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;margin:0 25px;padding:0;background:none;}}</style><article class="read-next-card css-1ncrsd ez817vd4"><header class="read-next-card-header"><style data-emotion="css 18chcim">.css-18chcim{margin:0;font-size:1.3rem;font-weight:300;line-height:1em;color:rgb(255 255 255 / 0.6);letter-spacing:0.4px;}.css-18chcim span,.css-18chcim a{font-size:inherit;}.css-18chcim a{font-weight:500;color:#fff;-webkit-text-decoration:none;text-decoration:none;opacity:0.8;}.css-18chcim a:hover{opacity:1;}</style><h3 class="css-18chcim ez817vd3"><span>More in</span> <a href="/tags/bundler/">Bundler</a></h3></header><style data-emotion="css 1vix6iq">.css-1vix6iq{font-size:1.3rem;}.css-1vix6iq ul{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0;padding:0;list-style:none;}.css-1vix6iq li{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;margin:0;padding:20px 0;border-bottom:rgb(255 255 255 / 0.1);}.css-1vix6iq li:last-of-type{padding-bottom:5px;border:none;}.css-1vix6iq h4{margin:0;font-size:1.3rem;font-weight:600;line-height:1.6em;}.css-1vix6iq li a{display:block;font-size:inherit;color:#fff;opacity:0.8;}.css-1vix6iq li a:hover{opacity:1;}</style><div class="read-next-card-content css-1vix6iq ez817vd2"><ul><li><h4><a href="/environment/why-do-you-use-import-meta-in-vite/">Vite에서 import.meta는 왜 사용하는 걸까? (feat. HMR)</a></h4><style data-emotion="css 1qhf9t">.css-1qhf9t{margin-top:2px;font-size:1.2rem;font-weight:400;line-height:1.4em;}.css-1qhf9t p{margin:0;font-size:inherit;color:rgb(255 255 255 / 0.6);}.css-1qhf9t p time{font-size:inherit;}</style><div class="read-next-card-meta css-1qhf9t ez817vd1"><p><time dateTime="2024-02-04">2024-02-04</time> -<!-- --> <!-- -->15 min read</p></div></li></ul></div><style data-emotion="css ok4czd">.css-ok4czd{position:relative;margin:40px 0 5px;}.css-ok4czd a{padding:7px 12px 8px 14px;font-size:1.3rem;color:rgb(255 255 255 / 0.6);border:1px solid rgb(255 255 255 / 0.6);border-radius:999px;-webkit-transition:all 0.35s ease-in-out;transition:all 0.35s ease-in-out;}.css-ok4czd a:hover{color:#fecd35;-webkit-text-decoration:none;text-decoration:none;border-color:#fecd35;}</style><footer class="read-next-card-footer css-ok4czd ez817vd0"><a href="/tags/bundler/">See all 2 posts<!-- --> →</a></footer></article><style data-emotion="css 1a2xhz7">.css-1a2xhz7{position:relative;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 1 301px;-ms-flex:1 1 301px;flex:1 1 301px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:220px;margin:0 20px 60px;-webkit-background-size:cover;background-size:cover;}.css-1a2xhz7 img{-webkit-transform:scale(1)!important;-moz-transform:scale(1)!important;-ms-transform:scale(1)!important;transform:scale(1)!important;-webkit-transition:opacity 0.3s ease-out 0s,-webkit-transform 0.5s ease 0s!important;transition:opacity 0.3s ease-out 0s,transform 0.5s ease 0s!important;}.css-1a2xhz7:hover .post-card-image:after{opacity:var(--post-card-after-opacity);}.css-1a2xhz7:hover img[data-main-image]{-webkit-transform:scale(1.03)!important;-moz-transform:scale(1.03)!important;-ms-transform:scale(1.03)!important;transform:scale(1.03)!important;}.css-1a2xhz7.is-next .post-card-image{background:#191b1f;border:1px solid var(--image-border-color__dark);}.css-1a2xhz7.is-next .post-card-primary-tag a{color:#90a2aa;}.css-1a2xhz7.is-next .post-card-excerpt{color:#768086;}.css-1a2xhz7.is-next .post-card-byline-content{color:#90a2aa;}</style><article class="post-card is-next css-1a2xhz7"><style data-emotion="css uih3rl">.css-uih3rl{position:relative;overflow:hidden;display:block;border-radius:12px;}</style><a class="post-card-image-link css-uih3rl" href="/javascript/javascript-mvc/"><style data-emotion="css pg199o">.css-pg199o{overflow:hidden;width:auto;height:200px;background-color:var(--background-color);-webkit-background-size:cover;background-size:cover;border:1px solid var(--image-border-color);border-radius:12px;}.css-pg199o:after{content:'';position:absolute;top:0;left:0;display:block;width:100%;height:100%;opacity:var(--post-card-opacity);background-color:var(--post-card-background);-webkit-transition:all 0.3s ease 0s;transition:all 0.3s ease 0s;}.css-pg199o img{border-radius:12px;}</style><div class="post-card-image css-pg199o ezywgfd6"><div data-gatsby-image-wrapper="" style="height:100%" class="gatsby-image-wrapper"><div aria-hidden="true" style="padding-top:56.25%"></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFBv/EABcBAAMBAAAAAAAAAAAAAAAAAAACAwT/2gAMAwEAAhADEAAAAdeu9MEoAQ1//8QAGxAAAgEFAAAAAAAAAAAAAAAAAQIAAxESMTL/2gAIAQEAAQUCK2COHOMfVLqf/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAISAyL/2gAIAQMBAT8BxbqSFP/EABgRAAIDAAAAAAAAAAAAAAAAAAACERIy/9oACAECAQE/AWzJZj//xAAXEAADAQAAAAAAAAAAAAAAAAABEBEA/9oACAEBAAY/AqdIyv/EABsQAQACAgMAAAAAAAAAAAAAAAEAERAhMUFR/9oACAEBAAE/IbHgI2Gx3UDUbaakaPMf/9oADAMBAAIAAwAAABBsL//EABgRAAIDAAAAAAAAAAAAAAAAAAABETFR/9oACAEDAQE/EEOah5H/xAAYEQACAwAAAAAAAAAAAAAAAAAAARExYf/aAAgBAgEBPxBXJLNj/8QAGhABAAMBAQEAAAAAAAAAAAAAAQARMSFBcf/aAAgBAQABPxA8vq+Rsx1zE+5CagiHiZCEy26FEFrZ/9k=" alt=""/><picture><source type="image/webp" data-srcset="/static/5349dfe902fbdb7676264f2e7aae8a83/b3134/javascriptMvc.webp 640w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/5349dfe902fbdb7676264f2e7aae8a83/ad189/javascriptMvc.jpg" data-srcset="/static/5349dfe902fbdb7676264f2e7aae8a83/ad189/javascriptMvc.jpg 640w" alt="JavaScript MVC 패턴으로 만드는 SPA cover image"/></picture><noscript><picture><source type="image/webp" srcSet="/static/5349dfe902fbdb7676264f2e7aae8a83/b3134/javascriptMvc.webp 640w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/5349dfe902fbdb7676264f2e7aae8a83/ad189/javascriptMvc.jpg" srcSet="/static/5349dfe902fbdb7676264f2e7aae8a83/ad189/javascriptMvc.jpg 640w" alt="JavaScript MVC 패턴으로 만드는 SPA cover image"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div></a><style data-emotion="css z5atxi">.css-z5atxi{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div class="post-card-content css-z5atxi ezywgfd5"><style data-emotion="css 1k7wcu">.css-1k7wcu{margin:15px 0 0.2em;font-size:1.2rem;font-weight:500;color:#90a2aa;letter-spacing:0.2px;}.css-1k7wcu a{font-size:1.2rem;color:var(--anchor-secondary-color);}</style><div class="post-card-primary-tag css-1k7wcu ezywgfd4"><a href="/tags/java-script/">JavaScript</a>,  <a href="/tags/design-pattern/">Design Pattern</a></div><style data-emotion="css 1fjrpmt">.css-1fjrpmt{position:relative;display:block;color:#15171A;}.css-1fjrpmt:hover{-webkit-text-decoration:none;text-decoration:none;}</style><a class="post-card-content-link css-1fjrpmt" href="/javascript/javascript-mvc/"><header><style data-emotion="css 18yvs8h">.css-18yvs8h{margin:0 0 0.4em;line-height:1.15em;color:var(--post-card-title);word-break:keep-all;}</style><h2 class="post-card-title css-18yvs8h ezywgfd3">JavaScript MVC 패턴으로 만드는 SPA</h2></header><style data-emotion="css 1uf2vd9">.css-1uf2vd9{font-size:1.6rem;color:var(--post-card-description);}.css-1uf2vd9 p{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;width:100%;margin-bottom:0.4em;font-size:1.4rem;text-overflow:ellipsis;word-break:keep-all;}</style><section class="post-card-excerpt css-1uf2vd9 ezywgfd2"><p>모던 JavaScript 프레임워크 없이 MVC 패턴으로 SPA을 만들어보자</p></section></a><style data-emotion="css 143c7df">.css-143c7df{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;padding:0;}</style><footer class="post-card-meta css-143c7df ezywgfd1"><style data-emotion="css 137vq87">.css-137vq87{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 1 50%;-ms-flex:1 1 50%;flex:1 1 50%;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;font-weight:400;line-height:1.4em;color:#90a2aa;letter-spacing:0.2px;}.css-137vq87 time{font-size:1.3rem;}.css-137vq87 span{margin:0;font-size:1.3rem;}.css-137vq87 a{font-weight:600;color:var(--post-card-by-line);}</style><div class="post-card-byline-content css-137vq87 ezywgfd0"><span class="post-card-byline-date"><time dateTime="2023-04-17T09:00">2023-04-17</time> <span class="bull">•</span> <span>13 min read</span></span></div></footer></div></article><article class="post-card is-next css-1a2xhz7"><a class="post-card-image-link css-uih3rl" href="/node/node-version-manager/"><div class="post-card-image css-pg199o ezywgfd6"><div data-gatsby-image-wrapper="" style="height:100%" class="gatsby-image-wrapper"><div aria-hidden="true" style="padding-top:56.25%"></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFA//EABcBAAMBAAAAAAAAAAAAAAAAAAACBQb/2gAMAwEAAhADEAAAAU192NFLilwY/8QAGhAAAwEAAwAAAAAAAAAAAAAAAQIDBAASQf/aAAgBAQABBQKVe+iTONLZiWmALe8//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAGBEAAgMAAAAAAAAAAAAAAAAAAAECEyH/2gAIAQIBAT8BxF0j/8QAGxAAAwACAwAAAAAAAAAAAAAAAAERAhIDEJH/2gAIAQEABj8CfE56Z26jezKkqXr/xAAbEAEAAwEAAwAAAAAAAAAAAAABABExIRBRsf/aAAgBAQABPyEaQ0E+pWDerbi47PqKAE7XZrWvj//aAAwDAQACAAMAAAAQeC//xAAYEQADAQEAAAAAAAAAAAAAAAAAASERUf/aAAgBAwEBPxBvVC9P/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQAhEf/aAAgBAgEBPxBVeGJBYX//xAAaEAEBAAMBAQAAAAAAAAAAAAABEQAhMUFh/9oACAEBAAE/EBKQdkU4Dy5v1gQiqRjz3HgqJpovMp1Iy2+PmPIO5Z3IZ//Z" alt=""/><picture><source type="image/webp" data-srcset="/static/fa6657a7573785fcabeb321f5d546e59/b3134/node-version-manager.webp 640w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/fa6657a7573785fcabeb321f5d546e59/ad189/node-version-manager.jpg" data-srcset="/static/fa6657a7573785fcabeb321f5d546e59/ad189/node-version-manager.jpg 640w" alt="노드 버전 매니저 툴 비교기(nvm &amp; fnm &amp; Volta) cover image"/></picture><noscript><picture><source type="image/webp" srcSet="/static/fa6657a7573785fcabeb321f5d546e59/b3134/node-version-manager.webp 640w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/fa6657a7573785fcabeb321f5d546e59/ad189/node-version-manager.jpg" srcSet="/static/fa6657a7573785fcabeb321f5d546e59/ad189/node-version-manager.jpg 640w" alt="노드 버전 매니저 툴 비교기(nvm &amp; fnm &amp; Volta) cover image"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div></a><div class="post-card-content css-z5atxi ezywgfd5"><div class="post-card-primary-tag css-1k7wcu ezywgfd4"><a href="/tags/tool/">Tool</a>,  <a href="/tags/node-js/">Node.js</a></div><a class="post-card-content-link css-1fjrpmt" href="/node/node-version-manager/"><header><h2 class="post-card-title css-18yvs8h ezywgfd3">노드 버전 매니저 툴 비교기(nvm &amp; fnm &amp; Volta)</h2></header><section class="post-card-excerpt css-1uf2vd9 ezywgfd2"><p>nvm을 시작으로 Node.js 버전을 관리하다 fnm을 알게되었고, 추가로 Volta를 알게되어 세가지 툴의 속도 및 방식에 대해서 간략하게 알아본 정보를 정리해본다.</p></section></a><footer class="post-card-meta css-143c7df ezywgfd1"><div class="post-card-byline-content css-137vq87 ezywgfd0"><span class="post-card-byline-date"><time dateTime="2023-03-28T09:00">2023-03-28</time> <span class="bull">•</span> <span>9 min read</span></span></div></footer></div></article></div></div></aside><style data-emotion="css d4eprp">.css-d4eprp{position:relative;padding:0 5vw;position:relative;padding-top:20px;padding-bottom:22px;color:#fff;background:#000;}</style><footer class="css-d4eprp"><style data-emotion="css 98e3yl">.css-98e3yl{width:100%;max-width:1040px;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;font-size:1.3rem;color:rgb(255 255 255 / 0.7);}.css-98e3yl a{color:rgb(255 255 255 / 0.7);}.css-98e3yl a:hover{color:rgb(255 255 255 / 1);-webkit-text-decoration:none;text-decoration:none;}@media (max-width: 650px){.css-98e3yl{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="css-98e3yl"><section class="copyright">© <!-- -->2025<!-- --> <span>|  </span><a href="https://www.gatsbyjs.com/" target="_blank" rel="nofollow noreferrer">Pozafly&#x27;s Blog<!-- --> <!-- -->is based on Gatsby</a></section><style data-emotion="css 13qgqyf">.css-13qgqyf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.css-13qgqyf a{position:relative;margin-left:20px;font-size:1.3rem;}.css-13qgqyf a:before{content:'';position:absolute;top:11px;left:-11px;display:block;width:2px;height:2px;background:#fff;border-radius:100%;}.css-13qgqyf a:first-of-type:before{display:none;}@media (max-width: 650px){.css-13qgqyf a:first-of-type{margin-left:0;}}</style><nav class="css-13qgqyf e69t7dt0"><a href="/">Latest Posts</a><a href="https://github.com/pozafly" target="_blank" rel="noopener noreferrer">Github</a><a href="/rss.xml">RSS</a></nav></div></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/environment/webpack-boilerplate/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-54484e1c65ecf944a06f.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-ffdabbb04b36e7b959cd.js\"],\"component---src-pages-about-tsx\":[\"/component---src-pages-about-tsx-abecc008a895b39ff90b.js\"],\"component---src-pages-tags-tsx\":[\"/component---src-pages-tags-tsx-d03bc5c2220084f6a0ab.js\"],\"component---src-templates-index-tsx\":[\"/component---src-templates-index-tsx-e8ed446a0eab2c50675d.js\"],\"component---src-templates-post-tsx\":[],\"component---src-templates-tags-tsx\":[\"/component---src-templates-tags-tsx-97a6ef03653b3520e40d.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="9c95f289c5097a9ad7ff";</script><script src="/webpack-runtime-7b43c402171a97fdd877.js" async></script><script src="/app-54484e1c65ecf944a06f.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>