<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.13.4"/><meta name="description" content="Vite의 철학에 기반한 방식, import.meta에 대한 이야기" data-gatsby-head="true"/><meta property="og:site_name" content="Pozafly&#x27;s Blog" data-gatsby-head="true"/><meta property="og:type" content="article" data-gatsby-head="true"/><meta property="og:title" content="Vite에서 import.meta는 왜 사용하는 걸까? (feat. HMR)" data-gatsby-head="true"/><meta property="og:description" content="Vite의 철학에 기반한 방식, import.meta에 대한 이야기" data-gatsby-head="true"/><meta property="og:url" content="https://pozafly.github.io/environment/why-do-you-use-import-meta-in-vite/" data-gatsby-head="true"/><meta property="og:image" content="https://pozafly.github.io/static/3e003894f92a9a0261250e0307b1c3bf/1f0dd/main.jpg" data-gatsby-head="true"/><meta property="article:published_time" content="2024-02-04T00:00:00.000Z" data-gatsby-head="true"/><meta property="article:tag" content="Bundler" data-gatsby-head="true"/><meta name="github:card" content="summary_large_image" data-gatsby-head="true"/><meta name="github:title" content="Vite에서 import.meta는 왜 사용하는 걸까? (feat. HMR)" data-gatsby-head="true"/><meta name="github:description" content="Vite의 철학에 기반한 방식, import.meta에 대한 이야기" data-gatsby-head="true"/><meta name="github:url" content="https://pozafly.github.io/environment/why-do-you-use-import-meta-in-vite/" data-gatsby-head="true"/><meta name="github:image" content="https://pozafly.github.io/static/3e003894f92a9a0261250e0307b1c3bf/1f0dd/main.jpg" data-gatsby-head="true"/><meta name="github:label1" content="Written by" data-gatsby-head="true"/><meta name="github:data1" content="Pozafly" data-gatsby-head="true"/><meta name="github:label2" content="Filed under" data-gatsby-head="true"/><meta name="github:data2" content="Bundler" data-gatsby-head="true"/><meta name="github:site" content="@pozafly" data-gatsby-head="true"/><meta name="github:creator" content="@pozafly" data-gatsby-head="true"/><meta property="og:image:width" content="1" data-gatsby-head="true"/><meta property="og:image:height" content="0.5623931623931624" data-gatsby-head="true"/><link rel="icon" href="/favicon-32x32.png?v=a62d45ddbe29cf42da820a576d9375e1" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=a62d45ddbe29cf42da820a576d9375e1"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=a62d45ddbe29cf42da820a576d9375e1"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=a62d45ddbe29cf42da820a576d9375e1"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=a62d45ddbe29cf42da820a576d9375e1"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=a62d45ddbe29cf42da820a576d9375e1"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=a62d45ddbe29cf42da820a576d9375e1"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=a62d45ddbe29cf42da820a576d9375e1"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=a62d45ddbe29cf42da820a576d9375e1"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .auto-link.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .auto-link.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .auto-link svg,
    h2 .auto-link svg,
    h3 .auto-link svg,
    h4 .auto-link svg,
    h5 .auto-link svg,
    h6 .auto-link svg {
      visibility: hidden;
    }
    h1:hover .auto-link svg,
    h2:hover .auto-link svg,
    h3:hover .auto-link svg,
    h4:hover .auto-link svg,
    h5:hover .auto-link svg,
    h6:hover .auto-link svg,
    h1 .auto-link:focus svg,
    h2 .auto-link:focus svg,
    h3 .auto-link:focus svg,
    h4 .auto-link:focus svg,
    h5 .auto-link:focus svg,
    h6 .auto-link:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 100)
          }), 0)
        }
      }
    })
  </script><link rel="canonical" href="https://pozafly.github.io/environment/why-do-you-use-import-meta-in-vite/" data-baseprotocol="https:" data-basehost="pozafly.github.io"/><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-SLQNH3ND3J"></script><script>
      
      function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-SLQNH3ND3J',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
      if(!(navigator.doNotTrack == "1" || window.doNotTrack == "1")) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-SLQNH3ND3J', {"anonymize_ip":true,"cookie_expires":0,"send_page_view":false});
      }
      </script><title data-gatsby-head="true">Vite에서 import.meta는 왜 사용하는 걸까? (feat. HMR)</title></head><body><script>
  (function() {
    window.__onThemeChange = function() {}; // 컴포넌트에서 정의할 테마 변경 콜백

    let preferredTheme; // 초기화에 사용할 테마
    try {
      const saved = localStorage.getItem('theme') // 로컬 스토리지에 있는 것 사용
      if (saved) {
        preferredTheme = saved.toLowerCase()
      }
    } catch (err) { }

    // 테마 설정 함수
    window.__setPreferredTheme = function(newTheme) {
      window.__theme = newTheme; // 테마는 전역 변수에 저장
      preferredTheme = newTheme;
      document.body.className = newTheme; // 바디에 클래스 추가
      window.__onThemeChange(newTheme); // 콜백 실행

      try {
        localStorage.setItem('theme', newTheme);
      } catch (err) {}
    }

    // 컬러모드 미디어 쿼리 객체를 가져온다
    const darkQuery = window.matchMedia('(prefers-color-scheme: dark)');

    // 컬러모드 변경 탐지 이벤트 리스터 추가
    darkQuery.addListener(function(e) {
      window.__setPreferredTheme(e.matches ? 'dark' : 'light')
    });

    // 테마 설정. 저장된 테마가 없으면 시스템 설정을 사용한다.
    window.__setPreferredTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
  })();
  </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="post-template"><style data-emotion="css-global lqbgyg">html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,dl,dt,dd,ol,fieldset,form,label,legend,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;font:inherit;font-size:16px;vertical-align:baseline;border:0;}html .error-front-page,body .error-front-page,div .error-front-page,span .error-front-page,applet .error-front-page,object .error-front-page,iframe .error-front-page,h1 .error-front-page,h2 .error-front-page,h3 .error-front-page,h4 .error-front-page,h5 .error-front-page,h6 .error-front-page,p .error-front-page,blockquote .error-front-page,pre .error-front-page,a .error-front-page,abbr .error-front-page,acronym .error-front-page,address .error-front-page,big .error-front-page,cite .error-front-page,code .error-front-page,del .error-front-page,dfn .error-front-page,em .error-front-page,img .error-front-page,ins .error-front-page,kbd .error-front-page,q .error-front-page,s .error-front-page,samp .error-front-page,small .error-front-page,strike .error-front-page,strong .error-front-page,sub .error-front-page,sup .error-front-page,tt .error-front-page,var .error-front-page,dl .error-front-page,dt .error-front-page,dd .error-front-page,ol .error-front-page,fieldset .error-front-page,form .error-front-page,label .error-front-page,legend .error-front-page,article .error-front-page,aside .error-front-page,canvas .error-front-page,details .error-front-page,embed .error-front-page,figure .error-front-page,figcaption .error-front-page,footer .error-front-page,header .error-front-page,hgroup .error-front-page,menu .error-front-page,nav .error-front-page,output .error-front-page,ruby .error-front-page,section .error-front-page,summary .error-front-page,time .error-front-page,mark .error-front-page,audio .error-front-page,video .error-front-page{font-size:1.6rem;}body{overflow-x:hidden;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Noto Sans','Ubuntu','Droid Sans','Helvetica Neue',sans-serif;font-size:1.6rem;-moz-font-feature-settings:'liga' on;font-weight:400;font-style:normal;line-height:1.6em;color:var(--body-color);letter-spacing:0;background:var(--background-color);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;word-break:break-word;}body::-webkit-scrollbar{width:6px;background-color:transparent;}body::-webkit-scrollbar-thumb{background-color:hsl(230 5% 35%);border-radius:8px;}body.light{--body-color:#303a3e;--background-color:#fff;--main-color:#000;--link-color:#0a0b0c;--border-top-color:#e4eaed;--nav-background:rgb(255 255 255 / 0.4);--nav-border-color:rgb(0 0 0 / 0.05);--header-color:var(--background-color);--header-after:var(--background-color);--header-before:rgb(255 255 255 / 0.05);--author-border:#fff;--home-header-color:#15171A;--home-header-border-bottom:#eaeff1;--header-author-link:#15171A;--no-image-border:#eaeff1;--strong-font-weight:600;--anchor-color:#0a84ff;--anchor-secondary-color:#768086;--loader-color:hsla(230 40% 10% / 0.8);--loader-color2:hsla(230 40% 10% / 0.2);--image-border-color:hsl(230 25% 94%);--image-border-color__dark:hsl(230 5% 15%);--post-card-title:rgb(21 23 26);--post-card-description:rgb(48 58 62);--post-card-by-line:#434952;--strong-color:#0a0b0c;--figcaption-color:#000;--table-first-of-type:linear-gradient(
        to right,
        rgb(255 255 255) 50%,
        rgb(255 255 255 / 0) 100%
      );--table-last-of-type:linear-gradient(
        to left,
        rgb(255 255 255) 50%,
        rgb(255 255 255 / 0) 100%
      );--table-th-background:#f4f8fb;--table-th-border:#e1edf4;--tag-boxshadow:hsl(218 53% 10% / 0.12);--tag-background:#f5f5f5;--post-full-border:#e4eaed;--post-full-meta-link:#2c3036;--post-full-meta-link-hover:#15171A;--post-full-title:#0b0c0e;--highlight-background:#fafafa;--highlight-border:#d1d1d1;--pre-code-color:#000;--little-code-background:var(--highlight-background);--little-code-border:#d1d1d1;--prism-background:hsl(0 0% 90.66%);--prism-border-left:hsl(0 0% 82.88%);--about-box-shadow:10px 10px 30px #bebebe,-10px -10px 30px #fff;--post-card-opacity:0;--post-card-background:rgb(0 0 0 / 0.1);--post-card-after-opacity:1;}body.dark{--body-color:rgba(255 255 255 / 0.75);--background-color:#0d1117;--main-color:#fff;--link-color:rgba(255 255 255 / 0.9);--border-top-color:#2b2f36;--nav-background:rgba(13 17 23 / 0.6);--nav-border-color:rgba(255 255 255 / 0.05);--header-color:#0a0b0c;--header-after:#0d1117;--header-before:rgba(0 0 0 / 0.6);--author-border:#1a1c20;--home-header-color:rgba(255 255 255 / 0.9);--home-header-border-bottom:#272a30;--header-author-link:rgba(255 255 255 / 0.75);--no-image-border:#3b4049;--strong-font-weight:500;--anchor-color:#5596ff;--anchor-secondary-color:#90a2aa;--loader-color:hsl(230 40% 90% / 0.8);--loader-color2:hsl(230 40% 90% / 0.2);--image-border-color:hsl(230 5% 15%);--image-border-color__dark:hsl(230 5% 15%);--post-card-title:rgba(255 255 255 / 0.85);--post-card-description:#768086;--post-card-by-line:rgba(255 255 255 / 0.75);--strong-color:#f2f2f2;--figcaption-color:rgba(255 255 255 / 0.6);--table-first-of-type:linear-gradient(
        to right,
        #191b1f 50%,
        #191b1f 100%
      );--table-last-of-type:linear-gradient(270deg, #191b1f 50%, rgb(25 27 31));--table-th-background:#2b2f36;--table-th-border:var(--table-th-background);--tag-boxshadow:#1d2024;--tag-background:#1f2125;--post-full-border:#3b4049;--post-full-meta-link:rgb(255 255 255 / 0.75);--post-full-meta-link-hover:#fff;--post-full-title:rgb(255 255 255 / 0.9);--highlight-background:rgb(25 30 34);--highlight-border:none;--pre-code-color:#c9d1d9;--little-code-background:rgb(96 98 100 / 0.4);--little-code-border:none;--prism-background:rgb(0 0 0 / 0.4);--prism-border-left:#818181;--about-box-shadow:10px 20px 20px hsl(0 0 0 / 0.3);--post-card-opacity:0.6;--post-card-background:rgb(0 0 0 / 0.3);--post-card-after-opacity:0.1;}a{color:var(--anchor-color);-webkit-text-decoration:none;text-decoration:none;background-color:transparent;}a:hover{-webkit-text-decoration:underline;text-decoration:underline;}a:active,a:hover{outline:0;}ol,ul{max-width:100%;padding-left:1.3em;list-style:none;}blockquote,q{quotes:none;}blockquote:before,blockquote:after,q:before,q:after{content:none;}table{border-spacing:0;border-collapse:collapse;}img{max-width:100%;border:0;}html{overflow:hidden scroll;box-sizing:border-box;font-family:sans-serif;font-size:62.5%;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgb(0 0 0 / 0);}*,*:before,*:after{box-sizing:inherit;}b,strong{font-weight:var(--strong-font-weight);}i,em,dfn{font-style:italic;}small{font-size:80%;}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline;}sup{top:-0.5em;}sub{bottom:-0.25em;}mark{background-color:#fdffb6;}code,kbd,pre,samp{font-family:monospace;font-size:1em;}button,input,optgroup,select,textarea{margin:0;font:inherit;color:inherit;}button{overflow:visible;border:none;}button,select{text-transform:none;}button,html input[type='button'],input[type='reset'],input[type='submit']{cursor:pointer;-webkit-appearance:button;}button[disabled],html input[disabled]{cursor:default;}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0;}input{line-height:normal;}input:focus{outline:none;}input[type='checkbox'],input[type='radio']{box-sizing:border-box;padding:0;}input[type='number']::-webkit-inner-spin-button,input[type='number']::-webkit-outer-spin-button{height:auto;}input[type='search']{box-sizing:content-box;-webkit-appearance:textfield;}input[type='search']::-webkit-search-cancel-button,input[type='search']::-webkit-search-decoration{-webkit-appearance:none;}legend{padding:0;border:0;}textarea{resize:vertical;overflow:auto;}td,th{padding:0;}hr{position:relative;display:block;width:100%;height:1px;margin:2.5em 0 3.5em;padding:0;border:0;border-top:1px solid var(--border-top-color);}audio,canvas,iframe,img,svg,video{vertical-align:middle;}svg:not(:root){overflow:hidden;}fieldset{margin:0;padding:0;border:0;}p,ul,ol,dl,blockquote{margin:0 0 1.5em;}ul{list-style:disc;}ol{list-style:decimal;}ol ol,ul ul,ul ol,ol ul{margin:0.5em 0 1em;}li{margin:0.4em 0;padding-left:0.3em;line-height:1.6em;}dt{float:left;width:120px;margin:0 20px 0 0;font-weight:500;color:#15171A;text-align:right;}dd{margin:0 0 5px;text-align:left;}blockquote{margin:1.5em 0;padding:0 1.6em;border-left:#e5eff5 0.5em solid;}blockquote p{margin:0.8em 0;font-size:1.2em;font-weight:400;}blockquote small{display:inline-block;margin:0.8em 0 0.8em 1.5em;font-size:0.9em;opacity:0.8;}blockquote cite{font-weight:700;}blockquote cite a{font-weight:400;}h1,h2,h3,h4,h5,h6{margin-top:0;font-weight:600;line-height:1.15;text-rendering:optimizeLegibility;}h1 a.auto-link,h2 a.auto-link,h3 a.auto-link,h4 a.auto-link,h5 a.auto-link,h6 a.auto-link{box-shadow:none!important;}h1 a.auto-link:hover,h2 a.auto-link:hover,h3 a.auto-link:hover,h4 a.auto-link:hover,h5 a.auto-link:hover,h6 a.auto-link:hover{box-shadow:none!important;}h1 a.auto-link svg,h2 a.auto-link svg,h3 a.auto-link svg,h4 a.auto-link svg,h5 a.auto-link svg,h6 a.auto-link svg{opacity:0;fill:var(--link-color)!important;-webkit-transition:0.25s ease;transition:0.25s ease;}h1:hover a.auto-link svg,h2:hover a.auto-link svg,h3:hover a.auto-link svg,h4:hover a.auto-link svg,h5:hover a.auto-link svg,h6:hover a.auto-link svg{opacity:1;}h1{margin:0 0 0.5em;font-size:5.5rem;font-weight:600;}@media (max-width: 500px){h1{font-size:2.2rem;}}h2{margin:1.5em 0 0.5em;font-size:2.2rem;}@media (max-width: 500px){h2{font-size:1.8rem;}}h3{margin:1.5em 0 0.5em;font-size:1.8rem;font-weight:500;}@media (max-width: 500px){h3{font-size:1.7rem;}}h4{margin:1.5em 0 0.5em;font-size:1.6rem;font-weight:500;}h5{margin:1.5em 0 0.5em;font-size:1.4rem;font-weight:500;}h6{margin:1.5em 0 0.5em;font-size:1.4rem;font-weight:500;}.medium-zoom-overlay{-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);}.gatsby-resp-image-background-image{border-radius:6px;}.gatsby-resp-image-wrapper{margin:40px 0;}@media (max-width: 800px){.gatsby-resp-image-wrapper{width:100%;margin:initial;}}.medium-zoom-image{box-shadow:none!important;}.copyright{font-size:1.4rem;}.copyright a{font-size:inherit;}</style><style data-emotion="css vva9px">.css-vva9px .site-main{margin-top:64px;padding-bottom:4vw;background:var(--background-color);}</style><style data-emotion="css 163jdes">.css-163jdes{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}.css-163jdes .site-main{margin-top:64px;padding-bottom:4vw;background:var(--background-color);}</style><div class="css-163jdes e1xu36er0"><header class="site-header"><style data-emotion="css 1kbvt30">.css-1kbvt30{position:relative;padding:0 5vw;position:fixed;z-index:1000;top:0;right:0;left:0;background:var(--nav-background);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px);border-bottom:1px solid var(--nav-border-color);}</style><div class="css-1kbvt30"><style data-emotion="css 8aaawc">.css-8aaawc{width:100%;max-width:1040px;margin:0 auto;}</style><div class="css-8aaawc"><style data-emotion="css tetqay">.css-tetqay{position:relative;z-index:100;overflow-y:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;height:52px;font-size:1.3rem;}</style><nav class="css-tetqay"><style data-emotion="css qxzoul">.css-qxzoul{overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-right:10px;font-weight:500;text-transform:uppercase;letter-spacing:0.2px;white-space:nowrap;-webkit-overflow-scrolling:touch;-ms-overflow-scrolling:touch;}@media (max-width: 700px){.css-qxzoul{margin-right:0;}}</style><div class="site-nav-left css-qxzoul esgr0m44"><style data-emotion="css yn94hc">.css-yn94hc{position:relative;z-index:100;display:inline-block;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:32px;padding:12px 0;font-size:1.7rem;font-weight:700;line-height:1.8rem;color:#fff;text-transform:none;letter-spacing:-0.5px;}.css-yn94hc:hover{-webkit-text-decoration:none;text-decoration:none;}.css-yn94hc img{display:block;width:auto;height:21px;}@media (max-width: 700px){.css-yn94hc{margin-right:18px;}}</style><a class="site-nav-logo css-yn94hc" href="/"><img src="/static/a62d45ddbe29cf42da820a576d9375e1/aef42/alien.png" alt="Pozafly&#x27;s Blog" width="21" height="21"/></a><style data-emotion="css 1xdepn">.css-1xdepn{position:relative;-webkit-align-self:flex-start;-ms-flex-item-align:flex-start;align-self:flex-start;}</style><div class="css-1xdepn esgr0m43"><style data-emotion="css f30i1v">.css-f30i1v{position:absolute;z-index:1000;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0 0 0 -12px;padding:0;list-style:none;-webkit-transition:all 1s cubic-bezier(0.19, 1, 0.22, 1);transition:all 1s cubic-bezier(0.19, 1, 0.22, 1);}.css-f30i1v li{display:block;margin:0;padding:0;}.css-f30i1v li a{position:relative;display:block;padding:10px 12px;font-size:1.2rem;color:var(--main-color);opacity:0.7;-webkit-transition:opacity 0.2s ease-in-out;transition:opacity 0.2s ease-in-out;}@media (max-width: 700px){.css-f30i1v li a{padding:10px 8px;}}.css-f30i1v li a:hover{-webkit-text-decoration:none;text-decoration:none;opacity:1;}.css-f30i1v .nav-current{opacity:1;}</style><ul role="menu" class="css-f30i1v"><li role="menuitem"><a href="/">Home</a></li><li role="menuitem"><a href="/about/">About</a></li><li role="menuitem"><a href="/tags/">Tags</a></li><li role="menuitem"><a href="/tags/diary/">Diary</a></li></ul><style data-emotion="css 289bqd">.css-289bqd{position:absolute;top:10px;-webkit-transform:translateY(175%);-moz-transform:translateY(175%);-ms-transform:translateY(175%);transform:translateY(175%);font-size:1.7rem;font-weight:400;color:var(--main-color);text-transform:none;visibility:hidden;opacity:0;-webkit-transition:all 1s cubic-bezier(0.19, 1, 0.22, 1);transition:all 1s cubic-bezier(0.19, 1, 0.22, 1);}.css-289bqd .dash{left:-25px;}.css-289bqd .dash:before{content:'- ';opacity:0.5;}@media (max-width: 700px){.css-289bqd{overflow:hidden;max-width:calc(100vw - 126px);text-overflow:ellipsis;white-space:nowrap;}}</style><span class="nav-post-title css-289bqd esgr0m40">Vite에서 import.meta는 왜 사용하는 걸까? (feat. HMR)</span></div></div><style data-emotion="css 1wxq7hc">.css-1wxq7hc{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:0 1 auto;-ms-flex:0 1 auto;flex:0 1 auto;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;}</style><div class="css-1wxq7hc esgr0m42"><style data-emotion="css 150gfpr">.css-150gfpr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}@media (max-width: 700px){.css-150gfpr .not-mobile{display:none;}}</style><div class="css-150gfpr esgr0m41"><style data-emotion="css u4kwjs">.css-u4kwjs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;margin:0;padding:10px;opacity:0.8;-webkit-transition:opacity 0.35s ease;transition:opacity 0.35s ease;}.css-u4kwjs:hover{opacity:1;}.css-u4kwjs svg{height:1.8rem;fill:var(--main-color);-webkit-transition:fill 0.45s ease;transition:fill 0.45s ease;}.css-u4kwjs.is-white svg{fill:#fff;}</style><a class="not-mobile css-u4kwjs" href="https://github.com/pozafly" title="Github" target="_blank" rel="noopener noreferrer"><svg width="21px" height="21px" viewBox="0 0 1024 1024" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z" transform="scale(64)"></path></svg></a><style data-emotion="css-global 8o55qm">body .theme-toggler{overflow:hidden;margin:6px;padding:2px;background:transparent;border-radius:50%;-webkit-transition:all 0.3s ease;transition:all 0.3s ease;}body .theme-toggler #switch{position:relative;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;width:21px;height:21px;padding:0;background:transparent;border:0;}body .theme-toggler .mode{position:relative;width:18px;height:18px;opacity:0.8;background:#000;-webkit-clip-path:path(
          'M17.5306 13.5882C16.6384 13.8558 15.689 14 14.7044 14C9.5004 14 5.28174 9.97061 5.28174 5.00005C5.28174 3.32422 5.76127 1.75538 6.59643 0.411865C2.77326 1.55853 0 4.96994 0 9.00001C0 13.9706 4.21866 18 9.42265 18C12.8721 18 15.8887 16.2296 17.5306 13.5882Z'
        );clip-path:path(
          'M17.5306 13.5882C16.6384 13.8558 15.689 14 14.7044 14C9.5004 14 5.28174 9.97061 5.28174 5.00005C5.28174 3.32422 5.76127 1.75538 6.59643 0.411865C2.77326 1.55853 0 4.96994 0 9.00001C0 13.9706 4.21866 18 9.42265 18C12.8721 18 15.8887 16.2296 17.5306 13.5882Z'
        );border-radius:50%;-webkit-transition:all 0.45s ease;transition:all 0.45s ease;}body .theme-toggler .mode:before{content:'';position:absolute;z-index:-1;top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);-moz-transform:translateX(-50%) translateY(-50%);-ms-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);width:5px;height:5px;opacity:0;background:inherit;border-radius:50%;-webkit-transition:box-shadow 0.4s 0s ease;transition:box-shadow 0.4s 0s ease;}body .theme-toggler .mode:after{content:'';position:absolute;top:-20%;left:30%;width:90%;height:90%;background:rgb(255 255 255 / 1);border-radius:50%;-webkit-transition:all 0.3s ease;transition:all 0.3s ease;}body .theme-toggler .mode:hover{opacity:1;}body .theme-toggler:hover{background:rgb(215 215 215 / 0.9);}body .theme-toggler.is-white .mode{background:#fff;}body .theme-toggler.is-white:hover{background:rgb(215 215 215 / 0.2);}body.dark .theme-toggler{background:transparent;}body.dark .theme-toggler:hover{background:rgb(255 255 255 / 0.1);}body.dark .theme-toggler .mode{-webkit-transform:scale(0.5);-moz-transform:scale(0.5);-ms-transform:scale(0.5);transform:scale(0.5);overflow:initial;opacity:0.8;background:white;-webkit-clip-path:none;clip-path:none;}body.dark .theme-toggler .mode:before{opacity:1;box-shadow:0 -16px 0 0 white,0 16px 0 0 white,-16px 0 0 0 white,16px 0 0 0 white,12px 12px 0 0 white,12px -12px 0 0 white,-12px 12px 0 0 white,-12px -12px 0 0 white;}body.dark .theme-toggler .mode:after{-webkit-transform:translateX(50%) translateY(-50%);-moz-transform:translateX(50%) translateY(-50%);-ms-transform:translateX(50%) translateY(-50%);transform:translateX(50%) translateY(-50%);opacity:0;-webkit-transition:background 0.45s ease;transition:background 0.45s ease;}body.dark .theme-toggler.is-white .mode:before{box-shadow:0 -16px 0 0 white,0 16px 0 0 white,-16px 0 0 0 white,16px 0 0 0 white,12px 12px 0 0 white,12px -12px 0 0 white,-12px 12px 0 0 white,-12px -12px 0 0 white;}</style><button class="theme-toggler " aria-label="theme toggle button" type="button"><div id="switch"><div class="mode"></div></div></button></div></div></nav></div></div></header><style data-emotion="css 1h9yqcb">.css-1h9yqcb{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;position:relative;padding:0 5vw;}</style><main id="site-main" class="site-main css-1h9yqcb"><div class="css-8aaawc"><style data-emotion="css 150a24d">.css-150a24d{position:relative;}</style><article class="css-150a24d"><style data-emotion="css iltggy">.css-iltggy{position:relative;margin:0 auto;padding:70px 100px 50px;word-break:keep-all;border-top-left-radius:3px;border-top-right-radius:3px;}@media (max-width: 1170px){.css-iltggy{padding:60px 11vw 50px;}}@media (max-width: 800px){.css-iltggy{padding-right:5vw;padding-left:5vw;}}@media (max-width: 500px){.css-iltggy{padding:20px 0 35px;}}</style><header class="post-full-header css-iltggy edf4ga72"><style data-emotion="css 1njwbu9">.css-1njwbu9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;font-size:1.2rem;font-weight:600;line-height:1.4em;color:#738a94;}.css-1njwbu9 a{font-size:1.2rem;color:var(--anchor-secondary-color);}</style><section class="post-full-tags css-1njwbu9 emmlh0d3"><a href="/tags/bundler/">Bundler</a>,  <a href="/tags/vite/">Vite</a>,  <a href="/tags/environment/">Environment</a></section><style data-emotion="css 18a1ftz">.css-18a1ftz{margin:0 0 0.2em;color:var(--post-full-title);word-break:keep-all;}@media (max-width: 500px){.css-18a1ftz{margin-top:0.2em;font-size:3.3rem;}}</style><h1 class="post-full-title css-18a1ftz edf4ga71">Vite에서 import.meta는 왜 사용하는 걸까? (feat. HMR)</h1><style data-emotion="css 1gjy1ma">.css-1gjy1ma{margin:20px 0 0;font-size:2rem;font-weight:360;line-height:1.4em;color:var(--post-card-description);}@media (max-width: 500px){.css-1gjy1ma{font-size:1.9rem;line-height:1.5em;}}</style><p class="post-full-custom-excerpt css-1gjy1ma emmlh0d2">Vite의 철학에 기반한 방식, import.meta에 대한 이야기</p><style data-emotion="css r2irbu">.css-r2irbu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:35px 0 0;padding-top:15px;border-top:1px solid var(--post-full-border);}.css-r2irbu .post-full-byline-content{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}.css-r2irbu .post-full-byline-content .author-list{-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;padding:0 12px 0 0;}.css-r2irbu .post-full-byline-meta{margin:2px 0 0;font-size:1.4rem;line-height:1.2em;color:#768086;letter-spacing:0.2px;}.css-r2irbu .post-full-byline-meta .author-name{margin:0 0 3px;font-size:1.4rem;font-weight:500;line-height:1.3em;}.css-r2irbu .post-full-byline-meta .author-name a{font-size:13px;color:var(--post-full-meta-link);}.css-r2irbu .post-full-byline-meta .author-name a:hover{color:var(--post-full-meta-link-hover);}.css-r2irbu .post-full-byline-meta .byline-reading-time,.css-r2irbu .post-full-byline-meta .byline-meta-date{font-size:13px;}.css-r2irbu .post-full-byline-meta .bull{display:inline-block;margin:0 4px;opacity:0.6;}</style><div class="post-full-byline css-r2irbu emmlh0d1"><section class="post-full-byline-content"><style data-emotion="css 12fmpzj">.css-12fmpzj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 0 0 4px;padding:0;list-style:none;}</style><ul class="author-list css-12fmpzj emmlh0d0"><style data-emotion="css 4q5div">.css-4q5div{position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin:0;padding:0;}.css-4q5div:hover .author-name-tooltip{-webkit-transform:translate(-10px, -2px);-moz-transform:translate(-10px, -2px);-ms-transform:translate(-10px, -2px);transform:translate(-10px, -2px);opacity:1;}</style><li class="author-list-item css-4q5div e13xkhp00"><style data-emotion="css aezf96">.css-aezf96{overflow:hidden;display:block;width:40px;height:40px;margin:0 -4px;border:2px solid var(--author-border);border-radius:100%;}@media (max-width: 500px){.css-aezf96{width:36px;height:36px;}}</style><a class="author-avatar css-aezf96" href="/about/"><style data-emotion="css 1ip6e3z">.css-1ip6e3z{display:block;width:100%;height:100%;object-fit:cover;background:var(--background-color);border-radius:100%;}.css-1ip6e3z img{border-radius:100%;}</style><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper author-profile-image css-1ip6e3z"><div aria-hidden="true" style="padding-top:100%"></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#6808f8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/static/8c061761f263c344f2c0416607c8adf1/e73fe/pozafly.webp 40w,/static/8c061761f263c344f2c0416607c8adf1/61ca6/pozafly.webp 80w,/static/8c061761f263c344f2c0416607c8adf1/507b0/pozafly.webp 120w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/8c061761f263c344f2c0416607c8adf1/73bb6/pozafly.jpg" data-srcset="/static/8c061761f263c344f2c0416607c8adf1/2f28c/pozafly.jpg 40w,/static/8c061761f263c344f2c0416607c8adf1/499f6/pozafly.jpg 80w,/static/8c061761f263c344f2c0416607c8adf1/73bb6/pozafly.jpg 120w" alt="Pozafly"/></picture><noscript><picture><source type="image/webp" srcSet="/static/8c061761f263c344f2c0416607c8adf1/e73fe/pozafly.webp 40w,/static/8c061761f263c344f2c0416607c8adf1/61ca6/pozafly.webp 80w,/static/8c061761f263c344f2c0416607c8adf1/507b0/pozafly.webp 120w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/8c061761f263c344f2c0416607c8adf1/73bb6/pozafly.jpg" srcSet="/static/8c061761f263c344f2c0416607c8adf1/2f28c/pozafly.jpg 40w,/static/8c061761f263c344f2c0416607c8adf1/499f6/pozafly.jpg 80w,/static/8c061761f263c344f2c0416607c8adf1/73bb6/pozafly.jpg 120w" alt="Pozafly"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></a></li></ul><section class="post-full-byline-meta"><div class="author-name"><a href="/about/">Pozafly</a></div><div class="byline-meta-content"><time class="byline-meta-date" dateTime="2024-02-04">2024-02-04</time><span class="byline-reading-time"><span class="bull">•</span>15 min read</span></div></section></section></div></header><style data-emotion="css 1y1xnji">.css-1y1xnji{width:80%;max-height:800px;margin:25px auto 100px;-webkit-background-size:cover;background-size:cover;}.css-1y1xnji .image-wrapper{overflow:hidden;width:100%;border:1px solid var(--image-border-color);border-radius:8px;}.css-1y1xnji .image-wrapper img{border-radius:8px;}@media (max-width: 1170px){.css-1y1xnji .image-wrapper img{max-width:1170px;}}@media (max-width: 800px){.css-1y1xnji{width:100%;margin:25px auto 60px;}}</style><figure class="css-1y1xnji e16cwxex1"><div class="image-wrapper"><div data-gatsby-image-wrapper="" style="height:100%" class="gatsby-image-wrapper"><div aria-hidden="true" style="padding-top:56.23931623931624%"></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAALABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAgDBAUJ/8QAFgEBAQEAAAAAAAAAAAAAAAAAAwAC/9oADAMBAAIQAxAAAAHioxyxxrq2a5D/AP/EAB0QAAICAQUAAAAAAAAAAAAAAAEDAgQFBgcREzP/2gAIAQEAAQUCQEi3uDhNDYSqFiYHsGT6K8eU/wD/xAAcEQADAQACAwAAAAAAAAAAAAABAgMRAAQTMVL/2gAIAQMBAT8Bk80TshpeR7SnOTljkCtko1ET0XdA0ifhzukLnP/EAB4RAAICAQUBAAAAAAAAAAAAAAIDAQQTABESFCJx/9oACAECAQE/ASFZYiKXC2u42KxtgUtFtZ9ZqriZAuwscoWK3pZV7SFtiZjkBbfNf//EACcQAAIBAwMDAwUAAAAAAAAAAAECAwQREhMhMQAFIhRBUQYWoaKx/9oACAEBAAY/AoUqI55aX1MRqY6cRrO1PpDW0YirRCXDMxS+Sl+V36+lftWt7nXVdd22mre41NXUpJHoSM6085Kx40ss5DCOmjAiSKNiweRlxyKHfI3EExy823yi8G+LgDj4A6EO+nqq2HtfQ5/Y/wA46zyJaD06RX3xTInG3BW7HYggdIbsC1ycXdBcsfZSB+ONuB1//8QAGhABAQEAAwEAAAAAAAAAAAAAAREhADFRQf/aAAgBAQABPyEB0QioD06aBvPMkyJr1vEDS1wS+uUffxbVsQFC1s+uJEII0j0vT4HHpEHKJG1IkuGBCBJRfBFZ/wAzABAD/9oADAMBAAIAAwAAABDQ7//EABcRAQADAAAAAAAAAAAAAAAAAAEQESH/2gAIAQMBAT8QD+YHPqFkohgRf//EABsRAAIBBQAAAAAAAAAAAAAAAAERIQAxYdHw/9oACAECAQE/ELOkBMVBFxj+qTRUkZeNcgv/xAAXEAEBAQEAAAAAAAAAAAAAAAABEQAh/9oACAEBAAE/EK8yc0UjoSrqANjQlcA6Uhirylvrj0pCCC29EhbINgwIAAA4ICG6ohgTTj05g49wjVX34qCAT4b/2Q==" alt=""/><picture><source type="image/avif" data-srcset="/static/3e003894f92a9a0261250e0307b1c3bf/4f15c/main.avif 500w,/static/3e003894f92a9a0261250e0307b1c3bf/5359d/main.avif 800w,/static/3e003894f92a9a0261250e0307b1c3bf/fa70d/main.avif 1170w" sizes="100vw"/><source type="image/webp" data-srcset="/static/3e003894f92a9a0261250e0307b1c3bf/cd07d/main.webp 500w,/static/3e003894f92a9a0261250e0307b1c3bf/b2a35/main.webp 800w,/static/3e003894f92a9a0261250e0307b1c3bf/32af0/main.webp 1170w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/3e003894f92a9a0261250e0307b1c3bf/1f0dd/main.jpg" data-srcset="/static/3e003894f92a9a0261250e0307b1c3bf/d3119/main.jpg 500w,/static/3e003894f92a9a0261250e0307b1c3bf/1e21a/main.jpg 800w,/static/3e003894f92a9a0261250e0307b1c3bf/1f0dd/main.jpg 1170w" alt="Vite에서 import.meta는 왜 사용하는 걸까? (feat. HMR)"/></picture><noscript><picture><source type="image/avif" srcSet="/static/3e003894f92a9a0261250e0307b1c3bf/4f15c/main.avif 500w,/static/3e003894f92a9a0261250e0307b1c3bf/5359d/main.avif 800w,/static/3e003894f92a9a0261250e0307b1c3bf/fa70d/main.avif 1170w" sizes="100vw"/><source type="image/webp" srcSet="/static/3e003894f92a9a0261250e0307b1c3bf/cd07d/main.webp 500w,/static/3e003894f92a9a0261250e0307b1c3bf/b2a35/main.webp 800w,/static/3e003894f92a9a0261250e0307b1c3bf/32af0/main.webp 1170w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/3e003894f92a9a0261250e0307b1c3bf/1f0dd/main.jpg" srcSet="/static/3e003894f92a9a0261250e0307b1c3bf/d3119/main.jpg 500w,/static/3e003894f92a9a0261250e0307b1c3bf/1e21a/main.jpg 800w,/static/3e003894f92a9a0261250e0307b1c3bf/1f0dd/main.jpg 1170w" alt="Vite에서 import.meta는 왜 사용하는 걸까? (feat. HMR)"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><style data-emotion="css 2cqlea">.css-2cqlea{max-width:728px;margin:10px auto;font-size:12px;text-align:center;}.css-2cqlea a,.css-2cqlea span{font-size:12px;color:var(--anchor-secondary-color);}@media (max-width: 800px){.css-2cqlea{font-size:11px;}.css-2cqlea a,.css-2cqlea span{font-size:11px;}}</style><figcaption class="css-2cqlea e16cwxex0">Background photo by <a href="https://unsplash.com/ko/@cerpow" target="_blank" rel="noreferrer">Voicu Apostol</a> <!-- -->on<!-- --> <a href="https://unsplash.com" target="_blank" rel="noreferrer">Unsplash</a></figcaption></figure><style data-emotion="css 1gxhmkz">.css-1gxhmkz *:not(pre)>code[class*='language-']{border-radius:0.3em;background:var(--little-code-background);border:1px solid var(--little-code-border);color:var(--main-color);padding:0.15em 0.5em;white-space:normal;font-size:13px;}@media (max-width: 800px){.css-1gxhmkz *:not(pre)>code[class*='language-']{display:inline;}}.css-1gxhmkz .gatsby-highlight-code-line{display:block;margin-right:-1.3125rem;margin-left:-1.3125rem;padding-right:1em;padding-left:1.25em;background-color:var(--prism-background);border-left:0.25em solid var(--prism-border-left);font-size:1.4rem;}.css-1gxhmkz .gatsby-highlight{margin-bottom:1.75rem;margin-left:-1.3125rem;margin-right:-1.3125rem;border-radius:10px;background:var(--highlight-background);box-shadow:inset 0 0 0 1px var(--highlight-border);-webkit-overflow-scrolling:touch;overflow:auto;}.css-1gxhmkz .gatsby-highlight pre[class*='language-']{float:left;min-width:100%;font-size:1.4rem;line-height:24px;}.css-1gxhmkz pre[class*='language-'],.css-1gxhmkz code[class*='language-']{color:var(--pre-code-color);text-shadow:none;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-1gxhmkz pre[class*='language-']::-webkit-scrollbar,.css-1gxhmkz code[class*='language-']::-webkit-scrollbar{background-color:transparent;height:4px;}.css-1gxhmkz pre[class*='language-']::-webkit-scrollbar-thumb,.css-1gxhmkz code[class*='language-']::-webkit-scrollbar-thumb{border-radius:8px;background-color:hsla(230, 5%, 35%, 1);}@media (max-width: 800px){.css-1gxhmkz pre[class*='language-'],.css-1gxhmkz code[class*='language-']{display:inline-block;}}.css-1gxhmkz pre[class*='language-']{overflow:auto;}.css-1gxhmkz .token{font-size:1.4rem;}.css-1gxhmkz pre[data-line]{padding:1em 0 1em 3em;position:relative;}@media print{.css-1gxhmkz pre[class*='language-'],.css-1gxhmkz code[class*='language-']{text-shadow:none;}}.css-1gxhmkz pre[class*='language-']{padding:1em;overflow:auto;margin:0;}.css-1gxhmkz:not(pre)>code[class*='language-']{padding:0.1em 0.3em;border-radius:0.3em;color:#c9d1d9;background:#343942;}.css-1gxhmkz pre[data-line]{position:relative;}.css-1gxhmkz pre[class*='language-']>code[class*='language-']{position:relative;z-index:1;}.css-1gxhmkz .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:#2f2a1e;box-shadow:inset 5px 0 0 #674c16;z-index:0;pointer-events:none;line-height:inherit;white-space:pre;}.css-1gxhmkz .namespace{opacity:0.7;}.css-1gxhmkz .token.comment,.css-1gxhmkz .token.prolog,.css-1gxhmkz .token.doctype,.css-1gxhmkz .token.cdata{color:#8b949e;}.css-1gxhmkz .token.punctuation{color:#c9d1d9;}.css-1gxhmkz .token.property,.css-1gxhmkz .token.tag,.css-1gxhmkz .token.boolean,.css-1gxhmkz .token.number,.css-1gxhmkz .token.constant,.css-1gxhmkz .token.symbol,.css-1gxhmkz .token.deleted{color:#79c0ff;}.css-1gxhmkz .token.selector,.css-1gxhmkz .token.attr-name,.css-1gxhmkz .token.string,.css-1gxhmkz .token.char,.css-1gxhmkz .token.builtin,.css-1gxhmkz .token.inserted{color:#a5d6ff;}.css-1gxhmkz .token.operator,.css-1gxhmkz .token.entity,.css-1gxhmkz .token.url,.css-1gxhmkz .language-css .token.string,.css-1gxhmkz .style .token.string{color:#a5d6ff;}.css-1gxhmkz .token.atrule,.css-1gxhmkz .token.attr-value,.css-1gxhmkz .token.keyword{color:#a5d6ff;}.css-1gxhmkz .token.function{color:#d2a8ff;}.css-1gxhmkz .token.regex,.css-1gxhmkz .token.important,.css-1gxhmkz .token.variable{color:#a8daff;}.css-1gxhmkz .token.important,.css-1gxhmkz .token.bold{font-weight:bold;}.css-1gxhmkz .token.italic{font-style:italic;}.css-1gxhmkz .token.entity{cursor:help;}</style><style data-emotion="css 1mpsxtc">.css-1mpsxtc{position:relative;min-height:230px;margin:0 auto;padding:0 100px 6vw;font-size:2rem;line-height:1.6em;background:var(--background-color);border-radius:6px;}.css-1mpsxtc .no-image{padding-top:0;}.css-1mpsxtc h1,.css-1mpsxtc h2,.css-1mpsxtc h3,.css-1mpsxtc h4,.css-1mpsxtc h5,.css-1mpsxtc h6,.css-1mpsxtc p,.css-1mpsxtc ul,.css-1mpsxtc ol,.css-1mpsxtc dl,.css-1mpsxtc pre,.css-1mpsxtc blockquote,.css-1mpsxtc .post-full-comments,.css-1mpsxtc .footnotes{min-width:100%;margin:0 0 1.5em;}.css-1mpsxtc li>ul,.css-1mpsxtc li>ol{margin:0;}.css-1mpsxtc li{word-break:break-word;}.css-1mpsxtc li p{margin:0;}.css-1mpsxtc a[class*='image'],.css-1mpsxtc a[class*='image']:hover{box-shadow:none;}.css-1mpsxtc a[class*='image'] span[class*='image'],.css-1mpsxtc a[class*='image']:hover span[class*='image']{border-radius:6px;}.css-1mpsxtc strong,.css-1mpsxtc em{color:var(--strong-color);}.css-1mpsxtc small{display:inline-block;line-height:1.6em;}.css-1mpsxtc img,.css-1mpsxtc video{display:block;max-width:840px;height:auto;margin:2em auto;border:1px solid var(--image-border-color);border-radius:8px;}.css-1mpsxtc hr+p{margin-top:1.2em;}.css-1mpsxtc img[src$='#full']{width:100vw;max-width:none;}.css-1mpsxtc img+br+small{display:block;margin-top:-3em;margin-bottom:1.5em;text-align:center;}.css-1mpsxtc iframe{margin:10px auto 20px;}.css-1mpsxtc blockquote{margin:0 0 1.5em;padding:0 1.5em;border-left:3px solid var(--image-border-color);}.css-1mpsxtc blockquote p{margin:0 0 1em;font-size:inherit;font-style:italic;line-height:inherit;color:inherit;}.css-1mpsxtc blockquote p:last-child{margin-bottom:0;}.css-1mpsxtc code{padding:0 5px 2px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Noto Sans','Ubuntu','Droid Sans','Helvetica Neue',sans-serif;font-size:0.8em;font-weight:400!important;line-height:1em;border-radius:3px;}.css-1mpsxtc p code{word-break:keep-all;}.css-1mpsxtc pre{overflow-x:auto;max-width:100%;padding:20px;font-size:1.4rem;line-height:1.5em;color:#e5eff5;border-radius:5px;}.css-1mpsxtc pre code{padding:0;font-size:inherit;line-height:inherit;background:transparent;}.css-1mpsxtc pre code :not(span){color:inherit;}.css-1mpsxtc .fluid-width-video-wrapper{margin:1.5em 0 3em;}.css-1mpsxtc hr{margin:2em 0;}.css-1mpsxtc h1,.css-1mpsxtc h2,.css-1mpsxtc h3,.css-1mpsxtc h4,.css-1mpsxtc h5,.css-1mpsxtc h6{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Noto Sans','Ubuntu','Droid Sans','Helvetica Neue',sans-serif;color:var(--home-header-color);}.css-1mpsxtc h1{margin:0.5em 0 0.4em;font-size:4.2rem;font-weight:600;line-height:1.25em;}.css-1mpsxtc p+h1{margin-top:0.8em;}.css-1mpsxtc h2{margin:1.2em 0 0.6em;font-size:3.4rem;font-weight:600;line-height:1.25em;}.css-1mpsxtc p+h2{margin-top:0.8em;}.css-1mpsxtc h3{margin:1rem 0 0.2em;padding-top:1.8rem;font-size:2.6rem;font-weight:600;line-height:1.3em;}.css-1mpsxtc h2+h3{margin-top:0.7em;}.css-1mpsxtc h4{margin:1em 0 0.2em;font-size:2rem;font-weight:800;}.css-1mpsxtc h2+h4{margin-top:0.7em;}.css-1mpsxtc h3+h4{margin-top:0;}.css-1mpsxtc h5{display:block;margin:0.5em 0;font-size:1.8rem;font-weight:600;line-height:1.35em;border:0;}.css-1mpsxtc h6{margin:0.5em 0 0.2em;font-size:2rem;font-weight:700;}.css-1mpsxtc table{overflow-x:auto;display:inline-block;border-spacing:0;border-collapse:collapse;width:auto;max-width:100%;margin:0.5em 0 2.5em;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Noto Sans','Ubuntu','Droid Sans','Helvetica Neue',sans-serif;font-size:1.6rem;white-space:nowrap;vertical-align:top;background:radial-gradient(ellipse at left, rgb(0 0 0 / 0.2) 0%, rgb(0 0 0 / 0) 75%) 0 center,radial-gradient(ellipse at right, rgb(0 0 0 / 0.2) 0%, rgb(0 0 0 / 0) 75%) 100% center;background-repeat:no-repeat;background-attachment:scroll,scroll;-webkit-background-size:10px 100%,10px 100%;background-size:10px 100%,10px 100%;-webkit-overflow-scrolling:touch;}.css-1mpsxtc table th{font-size:1.2rem;font-weight:700;color:var(--home-header-color);text-align:left;text-transform:uppercase;letter-spacing:0.2px;background-color:var(--table-th-background);}.css-1mpsxtc table th,.css-1mpsxtc table td{padding:6px 12px;border:var(--table-th-border) 1px solid;}.css-1mpsxtc table td:first-of-type{background-image:var(--table-first-of-type);background-repeat:no-repeat;-webkit-background-size:20px 100%;background-size:20px 100%;}.css-1mpsxtc table td:last-child{background-image:var(--table-last-of-type);background-repeat:no-repeat;-webkit-background-position:100% 0;background-position:100% 0;-webkit-background-size:20px 100%;background-size:20px 100%;}.css-1mpsxtc figcaption{color:var(--figcaption-color);}@media (max-width: 1170px){.css-1mpsxtc{padding:0 11vw;}}@media (max-width: 800px){.css-1mpsxtc{padding:0 5vw;font-size:1.8rem;}}@media (max-width: 500px){.css-1mpsxtc{padding:0;}}@media (max-width: 500px){.css-1mpsxtc .post-full-custom-excerpt{font-size:1.9rem;line-height:1.5em;}}@media (max-width: 500px){.css-1mpsxtc p,.css-1mpsxtc ul,.css-1mpsxtc ol,.css-1mpsxtc dl,.css-1mpsxtc pre,.css-1mpsxtc .post-full-comments,.css-1mpsxtc .footnotes{margin-bottom:1.28em;}}@media (max-width: 1040px){.css-1mpsxtc img,.css-1mpsxtc video{width:100%;}}@media (max-width: 500px){.css-1mpsxtc blockquote{padding:0 1.3em;}}@media (max-width: 800px){.css-1mpsxtc h1{font-size:3.2rem;line-height:1.25em;}.css-1mpsxtc h2{margin:0.5rem 0 0.3em;font-size:2.8rem;line-height:1.25em;}.css-1mpsxtc h3{margin:0.5rem 0 0.3em;font-size:2.4rem;line-height:1.3em;}.css-1mpsxtc h4{margin-bottom:0.3em;font-size:1.8rem;line-height:1.3em;}.css-1mpsxtc h5{max-width:1060px;padding:0 0 0.5em;font-size:2.4rem;text-align:initial;}.css-1mpsxtc h6{font-size:1.8rem;line-height:1.4em;}}.css-1mpsxtc *:not(pre)>code[class*='language-']{border-radius:0.3em;background:var(--little-code-background);border:1px solid var(--little-code-border);color:var(--main-color);padding:0.15em 0.5em;white-space:normal;font-size:13px;}@media (max-width: 800px){.css-1mpsxtc *:not(pre)>code[class*='language-']{display:inline;}}.css-1mpsxtc .gatsby-highlight-code-line{display:block;margin-right:-1.3125rem;margin-left:-1.3125rem;padding-right:1em;padding-left:1.25em;background-color:var(--prism-background);border-left:0.25em solid var(--prism-border-left);font-size:1.4rem;}.css-1mpsxtc .gatsby-highlight{margin-bottom:1.75rem;margin-left:-1.3125rem;margin-right:-1.3125rem;border-radius:10px;background:var(--highlight-background);box-shadow:inset 0 0 0 1px var(--highlight-border);-webkit-overflow-scrolling:touch;overflow:auto;}.css-1mpsxtc .gatsby-highlight pre[class*='language-']{float:left;min-width:100%;font-size:1.4rem;line-height:24px;}.css-1mpsxtc pre[class*='language-'],.css-1mpsxtc code[class*='language-']{color:var(--pre-code-color);text-shadow:none;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-1mpsxtc pre[class*='language-']::-webkit-scrollbar,.css-1mpsxtc code[class*='language-']::-webkit-scrollbar{background-color:transparent;height:4px;}.css-1mpsxtc pre[class*='language-']::-webkit-scrollbar-thumb,.css-1mpsxtc code[class*='language-']::-webkit-scrollbar-thumb{border-radius:8px;background-color:hsla(230, 5%, 35%, 1);}@media (max-width: 800px){.css-1mpsxtc pre[class*='language-'],.css-1mpsxtc code[class*='language-']{display:inline-block;}}.css-1mpsxtc pre[class*='language-']{overflow:auto;}.css-1mpsxtc .token{font-size:1.4rem;}.css-1mpsxtc pre[data-line]{padding:1em 0 1em 3em;position:relative;}@media print{.css-1mpsxtc pre[class*='language-'],.css-1mpsxtc code[class*='language-']{text-shadow:none;}}.css-1mpsxtc pre[class*='language-']{padding:1em;overflow:auto;margin:0;}.css-1mpsxtc:not(pre)>code[class*='language-']{padding:0.1em 0.3em;border-radius:0.3em;color:#c9d1d9;background:#343942;}.css-1mpsxtc pre[data-line]{position:relative;}.css-1mpsxtc pre[class*='language-']>code[class*='language-']{position:relative;z-index:1;}.css-1mpsxtc .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:#2f2a1e;box-shadow:inset 5px 0 0 #674c16;z-index:0;pointer-events:none;line-height:inherit;white-space:pre;}.css-1mpsxtc .namespace{opacity:0.7;}.css-1mpsxtc .token.comment,.css-1mpsxtc .token.prolog,.css-1mpsxtc .token.doctype,.css-1mpsxtc .token.cdata{color:#8b949e;}.css-1mpsxtc .token.punctuation{color:#c9d1d9;}.css-1mpsxtc .token.property,.css-1mpsxtc .token.tag,.css-1mpsxtc .token.boolean,.css-1mpsxtc .token.number,.css-1mpsxtc .token.constant,.css-1mpsxtc .token.symbol,.css-1mpsxtc .token.deleted{color:#79c0ff;}.css-1mpsxtc .token.selector,.css-1mpsxtc .token.attr-name,.css-1mpsxtc .token.string,.css-1mpsxtc .token.char,.css-1mpsxtc .token.builtin,.css-1mpsxtc .token.inserted{color:#a5d6ff;}.css-1mpsxtc .token.operator,.css-1mpsxtc .token.entity,.css-1mpsxtc .token.url,.css-1mpsxtc .language-css .token.string,.css-1mpsxtc .style .token.string{color:#a5d6ff;}.css-1mpsxtc .token.atrule,.css-1mpsxtc .token.attr-value,.css-1mpsxtc .token.keyword{color:#a5d6ff;}.css-1mpsxtc .token.function{color:#d2a8ff;}.css-1mpsxtc .token.regex,.css-1mpsxtc .token.important,.css-1mpsxtc .token.variable{color:#a8daff;}.css-1mpsxtc .token.important,.css-1mpsxtc .token.bold{font-weight:bold;}.css-1mpsxtc .token.italic{font-style:italic;}.css-1mpsxtc .token.entity{cursor:help;}</style><section class="post-full-content css-1mpsxtc edf4ga70"><div class="post-content"><p>회사에서 vue-cli로 만들어진 프로젝트를 Vite로 마이그레이션을 진행 중이다. <a href="https://github.com/vuejs/vue-cli" target="_blank" rel="nofollow">vue-cli</a>는 2년 전부터 maintenance mode(deprecated)에 들어갔고, webpack을 기반으로 만들어졌기 때문에 번들링 및 빌드 할 때 무척 느리다. vue-cli 패키지 내부에는 eslint, prettier가 vue-cli에 맞게 묶여있었는데 최신 버전의 eslint, prettier 버전을 사용하고 싶어도 호환이 되지 않았다. 그래서 vue-cli 대신 번들러를 바꿔 개발 환경을 최신화하기로 했다.</p>
<p>예전부터 사용해 보고 싶었던 번들러는 Vite다. Vite의 가장 큰 특징은 devServer에서 소스코드와 디펜던시를 두 가지 카테고리로 나누어 빌드하고, ESM 환경인 브라우저에 빠르게 제공한다는 점이다. devServer가 cold-start 될 때 현재 페이지에서 필요한 정보만 아주 빠르게 실행시킬 수 있다. 이 말은, 코드 베이스 또는 라이브러리(사용하고 있는 node_modules 디펜던시)의 모든 파일을 번들링 하여 제공하는 것이 아니라, 현재 필요한 모듈만 골라내어 빠르게 제공한다는 뜻이다. Vite 가이드에서 가장 먼저 이야기하고 있는 것이 ESM을 통한 devServer start 속도이다.</p>
<p>사전 번들링은, esBuild를 통해 디펜던시를 빌드하고 변경이 잦은 소스코드는 ESM으로 제공한다. 기존에 Webpack과 같은 번들러는 모든 파일을 빌드 및 번들링 해야만 브라우저에서 구동이 가능했다. Vite는 소스코드를 ESM으로 제공하기 때문에 브라우저에서 동적 import를 통해 원하는 JavaScript 파일만 실행시킬 수 있다. 이 매커니즘에 따라 Webpack의 Node.js에서만 가능했던 기능이 브라우저에서 동작하기 위해 어떻게 Vite가 해결했는지를 알아볼 것이다.</p>
<br/>
<h2 id="Nodejs-환경-변수" style="position:relative;">Node.js 환경 변수<a href="#Nodejs-%ED%99%98%EA%B2%BD-%EB%B3%80%EC%88%98" aria-label="Nodejs 환경 변수 permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<h3 id="processenv" style="position:relative;">process.env<a href="#processenv" aria-label="processenv permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h3>
<p>대부분의 bundler는 Node.js 환경 위에서 동작한다. Node.js에서는 <code class="language-text">process</code> 라는 특별한 이름의 예약어를 사용해 환경 변수에 접근할 수 있다. <code class="language-text">process</code> 예약어는 현재 실행되고 있는 Node.js 프로세스에 대한 정보를 가지고 있고 이를 제어할 수 있는 객체다.</p>
<p>대부분의 JavaScript 프레임워크에서는 <code class="language-text">process.env</code> 변수를 통해 환경 변수에 접근한다. process.env는 런타임에 동적으로 변수를 추가 및 수정할 수 있다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">TEST</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">TEST</span> <span class="token operator">=</span> <span class="token string">"test!"</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">TEST</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// test!</span></code></pre></div>
<p>위 코드를 Node.js의 <code class="language-text">node</code> 명령어로 실행하면 주석과 같은 결과를 얻을 수 있다. 프레임워크에서는 <code class="language-text">.env</code> 파일을 통해 process.env 변수에 개발자가 설정한 변수를 process.env에 주입시켜주는데, 주로 <code class="language-text">dotenv</code> 라이브러리를 통해 주입한다.</p>
<h3 id="dotenv" style="position:relative;">dotenv<a href="#dotenv" aria-label="dotenv permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h3>
<p>모던 JavaScript 프레임워크에서 <code class="language-text">dotenv</code> 라는 라이브러리를 내부적으로 래핑해서 사용하고 있다. <a href="https://github.com/motdotla/dotenv" target="_blank" rel="nofollow">dotenv</a> 라이브러리는 node.js 환경 및 ESM 환경에서 <code class="language-text">.env</code> 파일에 있는 환경 변수를 런타임 환경의 JavaScript로 들고 올 수 있다.</p>
<p>라이브러리를 가볍게 분석해 보자.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ <span class="token function">npm</span> init <span class="token parameter variable">-y</span>
$ <span class="token function">npm</span> i <span class="token parameter variable">-D</span> dotenv</code></pre></div>
<p>명령어로 npm 환경을 생성한다. <code class="language-text">package.json</code> 파일이 생성된 후, dotenv 라이브러리를 다운로드 받았다.</p>
<p>프로젝트 root에 <code class="language-text">.env</code> 파일을 생성하고 테스트 값을 넣는다.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text"># .env file
TEST=ENV_TEST!</code></pre></div>
<p>main.js 파일을 생성하고, dotenv 라이브러리를 통해 <code class="language-text">.env</code> 파일의 환경 변수 값을 가져와보자.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// src/main.js</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"dotenv"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">TEST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ENV_TEST!</span></code></pre></div>
<p>이제 <code class="language-text">node</code> 명령어로 Node.js 환경에서 이를 실행시켜보자.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ <span class="token function">node</span> src/main.js

<span class="token operator">=</span><span class="token operator">></span> ENV_TEST<span class="token operator">!</span></code></pre></div>
<p>어떻게 이런 결과가 나올까? dotenv 라이브러리를 살짝 까보자. 시작은 <code class="language-text">require("dotenv").config();</code> 줄이다. config 메서드를 실행한다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">config</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">_dotenvKey</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> DotenvModule<span class="token punctuation">.</span><span class="token function">configDotenv</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">configDotenv()</code> 함수를 실행한다. <a href="https://github.com/motdotla/dotenv/blob/8076cbb4ae64b531308b42b5f27d35f49b74ed83/lib/main.js#L205" target="_blank" rel="nofollow">lib/main.js의 configDotenv 함수</a>. <code class="language-text">.env</code> 파일의 경로를 읽고 파싱 해 process 환경을 파싱 된 값으로 채우고 반환한다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">configDotenv</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> dotenvPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'.env'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">const</span> parsed <span class="token operator">=</span> DotenvModule<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>dotenvPath<span class="token punctuation">,</span> <span class="token punctuation">{</span> encoding <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> processEnv <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>options <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>processEnv <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    processEnv <span class="token operator">=</span> options<span class="token punctuation">.</span>processEnv<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  DotenvModule<span class="token punctuation">.</span><span class="token function">populate</span><span class="token punctuation">(</span>processEnv<span class="token punctuation">,</span> parsed<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> parsed <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<ol>
<li>
<p>dotenvPath 변수에 <code class="language-text">.env</code> 파일의 경로를 저장한다.</p>
<ul>
<li><code class="language-text">process.cwd()</code> : node 명령을 호출한 디렉토리의 절대 경로다. /Users/pozafly/Documents/dev/play-ground/dotenv-exam</li>
<li><code class="language-text">path.resolve()</code> : 경로를 묶어 새로운 경로를 반환한다. /Users/pozafly/Documents/dev/play-ground/dotenv-exam/.env</li>
</ul>
</li>
<li>
<p>parsed 변수에 <code class="language-text">.env</code> 파일을 파싱 해 담는다.</p>
<ul>
<li>
<p><code class="language-text">fs.readFileSync()</code> : 인자로 들어오는 절대 경로로 파일 text 값을 읽어온다. 따라서, dotenvPath의 값을 읽어온다.</p>
</li>
<li>
<p><code class="language-text">DotenvModule.parse()</code> : 파싱 한 text 값을 JavaScript object로 만들어서 return 한다.</p>
</li>
<li>
<p><code class="language-text">parsed: { TEST: 'ENV_TEST!' }</code> 값이 담겨있다.</p>
</li>
</ul>
</li>
<li>
<p><code class="language-text">populate(processEnv, parsed, options)</code> 실행한다. populate는 ‘덧붙이다’라는 뜻을 가지고 있다.</p>
</li>
</ol>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">populate</span> <span class="token punctuation">(</span><span class="token parameter">processEnv<span class="token punctuation">,</span> parsed<span class="token punctuation">,</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Set process.env</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">of</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>parsed<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    processEnv<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> parsed<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>위에서 <code class="language-text">processEnv = process.env</code> 로 레퍼런스 주소를 묶어주었기 때문에 key로 즉시 할당한다. 다시 우리가 작성했던 main.js 구문을 보자.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dotenv'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">TEST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ENV_TEST!</span></code></pre></div>
<p>정리하면, dotenv 라이브러리는 Node.js 환경에서 <code class="language-text">.env</code> 를 파싱 해 text 값을 통해 객체를 생성하고, process.env에 값을 추가해 Node.js 환경의 전역에 노출된다. JavaScript 프레임워크에서는 보통 Node.js를 한 번만 실행하기 때문에 <code class="language-text">.env</code> 파일의 환경 변수 값이 변경되면 devServer를 껐다 켜주어야 값을 변경된 값으로 반영할 수 있는 이유이다.</p>
<p>Vite는 바로 반영이 되는데 devServer를 순간적으로 다시 시작시켜준다. .env 파일에서 변수를 변경하면 터미널 log에 <code class="language-text">server restarted.</code>라고 알려준다. Vite는 Webpack처럼 모든 파일을 번들링 하지 않기 때문에 무척 빠르기에 가능하다.</p>
<p>dotenv에서 ESM 환경 또한 지원한다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token string-property property">"type"</span><span class="token operator">:</span> <span class="token string">"module"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>위와 같이 package.json 파일에 type을 module로 넣어주면 Node.js에서 ESM 코드를 사용할 수 있다.</p>
<blockquote>
<p>※ Vite로 마이그레이션을 진행할 때도, package.json에 위와 같이 <code class="language-text">"type": "module"</code> 을 넣어주어야 하는데 Vite는 기본적으로 ESM 방식으로 동작한다.</p>
</blockquote>
<p>참고로, <code class="language-text">main.js</code> 파일을, <code class="language-text">main.mjs</code> 라는 확장자를 붙여주면 Node.js에서 알아서 ESM으로 동작하게 되기 때문에 package.json에 따로 붙여줄 필요는 없다.</p>
<p>vue-cli는 @vue/cli-services 패키지 내에서 사용하고 있고, CRA 같은 경우 react-scripts 라이브러리 내부 package.json에 <code class="language-text">dotenv</code> 을 사용하고 있으며 Next.js도 내부적으로 dotenv 라이브러리를 이용해 <code class="language-text">.env</code> 파일을 가져오고 있다.</p>
<blockquote>
<p>※ <a href="https://nodejs.org/dist/latest-v20.x/docs/api/cli.html#--env-fileconfig" target="_blank" rel="nofollow">—env-file</a></p>
<p>node.js 20 버전부터는 <code class="language-text">--env-file=config</code> 를 통해 <code class="language-text">.env</code> 파일을 <code class="language-text">dotenv</code> 라이브러리 없이 사용할 수 있도록 개발 중이다. 실제로 터미널에서 node 명령어로 <code class="language-text">.env</code> 파일을 지정 해 줄 수 있다. 아직은 실험용.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ <span class="token function">node</span> --env-file<span class="token operator">=</span>.env --env-file<span class="token operator">=</span>.development.env index.js</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// .env
PORT=3000</code></pre></div>
<p>따라서, 이제는 점차 <code class="language-text">dotenv</code> 라이브러리가 필요없어지게 될 것 같다.</p>
</blockquote>
<br/>
<h2 id="모드-별-환경-변수-접근" style="position:relative;">모드 별 환경 변수 접근<a href="#%EB%AA%A8%EB%93%9C-%EB%B3%84-%ED%99%98%EA%B2%BD-%EB%B3%80%EC%88%98-%EC%A0%91%EA%B7%BC" aria-label="모드 별 환경 변수 접근 permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<p>하지만, <code class="language-text">.env</code> 파일만 있는 것이 아니라 배포 환경에 따라 환경 변수의 값이 달라져야 환경 변수를 사용하는 의미가 있다. 즉, <code class="language-text">.env.development</code>, <code class="language-text">.env.production</code> 등의 환경 변수 파일이 추가로 필요하고 mode에 따라 지정된 값이 process.env 값에 할당되어 build 되어야 한다.</p>
<p><a href="https://github.com/mrsteele/dotenv-webpack" target="_blank" rel="nofollow">dotenv-webpack</a> 플러그인은 아주 간단하게 직접 path를 지정하도록 되어 있다.</p>
<p>먼저 사용법을 보자.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// webpack.config.js</span>

<span class="token keyword">const</span> Dotenv <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dotenv-webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">Dotenv</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'.env.production'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>webpack 설정 파일에 <code class="language-text">new Dotenv()</code> 를 통해 인스턴스를 만든다. 인자로 path key를 가진 객체를 넣어주는데, 빌드 시 적용할 <code class="language-text">.env.production</code> 파일의 경로를 적어준다. 그럼, dotenv-webpack 플러그인을 보자. <a href="https://github.com/mrsteele/dotenv-webpack/blob/97a864d72302d25fad0cef618fcd3f09e94bc4e4/src/index.js#L22" target="_blank" rel="nofollow">dotenv-webpack 소스</a></p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> dotenv <span class="token keyword">from</span> <span class="token string">'dotenv-defaults'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Dotenv</span> <span class="token punctuation">{</span>
  <span class="token comment">// 1.</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>config <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'./.env'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">prefix</span><span class="token operator">:</span> <span class="token string">'process.env.'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// 3.</span>
  <span class="token function">getEnvs</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> path <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">;</span>
    <span class="token keyword">const</span> env <span class="token operator">=</span> dotenv<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">file</span><span class="token operator">:</span> path<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      env
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token function">gatherVariables</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> env <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getEnvs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2.</span>
    <span class="token keyword">const</span> vars <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> process<span class="token punctuation">.</span>env<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4.</span>

    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>vars<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token operator">?</span> vars<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">:</span> env<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
      vars<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token comment">// 5.</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> vars<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>간추린 코드만 들고 왔다.</p>
<ol>
<li>인스턴스를 생성할 때, 넣어준 path를 생성자에서 설정한다.</li>
<li><code class="language-text">getEnvs()</code> 메서드 실행.</li>
<li>config에 담긴 path를 가져와 <code class="language-text">.env*</code> 파일을 가져오고, <code class="language-text">dotenv</code> 라이브러리에 parse 메서드를 사용해 env 객체로 만들어 return.</li>
<li><code class="language-text">vars</code> 에 새로운 객체에다가 <code class="language-text">process.env</code> 값을 복사한다.</li>
<li><code class="language-text">vars[key] = value</code> 를 통해 파싱 한 값을 집어넣어 return.</li>
</ol>
<p>즉, dotenv-webpack은 단순히 <code class="language-text">.env</code> 값을 path로 받아 파싱 한다.</p>
<br />
<h2 id="Vite의-환경-변수-접근" style="position:relative;">Vite의 환경 변수 접근<a href="#Vite%EC%9D%98-%ED%99%98%EA%B2%BD-%EB%B3%80%EC%88%98-%EC%A0%91%EA%B7%BC" aria-label="Vite의 환경 변수 접근 permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<p>Vite는 환경 변수가 정의된 파일(<code class="language-text">.env</code>)에서 여타 번들러와 마찬가지로 어플리케이션에 필요한 변수를 가져와 사용할 수 있다. Vite의 경우 <a href="https://ko.vitejs.dev/guide/env-and-mode.html" target="_blank" rel="nofollow">공식 문서에서 환경 변수 접근법</a>에 대해 <code class="language-text">import.meta</code>라는 JavaScript 문법으로 접근할 것을 알려주고 있다. <code class="language-text">.env</code> 파일에 환경과 관련된 변수를 <code class="language-text">VITE_</code> prefix를 주고, 코드 상에서 <code class="language-text">import.meta.env</code> 로 선언한 값을 들고 올 수 있다.</p>
<h3 id="importmeta" style="position:relative;">import.meta<a href="#importmeta" aria-label="importmeta permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h3>
<p><a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Operators/import.meta" target="_blank" rel="nofollow">import.meta</a>라는 JavaScript 문법을 알아보며 MDN 문서에 아직 아무도 번역하지 않아 이번 기회에 함께 번역해 보았다. <code class="language-text">import.meta</code> 는 ES Module이 탄생하면서 모듈에 대한 메타 데이터(부수 데이터)를 저장하기 위한 객체다.</p>
<p>여기서 말하는 메타 데이터란, 이미지 파일을 생각하면 조금 더 이해하기 쉽다. 휴대폰으로 사진을 찍으면 사진의 메타 데이터에 ‘날짜’, ‘사진 용량’, ‘디바이스 정보’, ‘위치 데이터’ 등의 메타 데이터가 담기게 된다. <code class="language-text">import.meta</code> 는 ‘모듈’ 자체에 대한 메타 데이터를 담고 있다.</p>
<p>import.meta는 대표적으로 모듈 메타 데이터인 경로(URL)를 담고 있는데 이는 호스트 환경(브라우저 혹은 Node.js)에 따라 저장되는 내용이 달라진다. 먼저 Node.js를 통해 import.meta가 가지고 있는 정보를 열어보자.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// src/main.js</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>node 명령어로 main.js를 실행시키면 SyntaxError가 발생한다. 이유는 node.js는 기본적으로 CommonJS 환경에서 동작하기 때문이다. import.meta는 ESM 환경에서 동작하기 때문에 이런 에러가 발생하는 것이다.</p>
<p>Node.js에서 import.meta를 사용하는 방법은 2가지인데, 하나는 main.js 파일을 <code class="language-text">main.mjs</code> 로 ESM에서 동작하는 JavaScript 확장자를 붙여주어 node 명령어로 다시 실행시키는 방법이고, 다른 하나는 <code class="language-text">dotenv</code> 라이브러리에서 ESM 환경으로 동작시킬 때 알아본 package.json 파일에 <code class="language-text">"type": "module"</code> 을 명시해 주는 방법이다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// src/main.js</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * [Object: null prototype] {
 *   dirname: '/Users/pozafly/Documents/dev/play-ground/esm-exam/src',
 *   filename: '/Users/pozafly/Documents/dev/play-ground/esm-exam/src/main.js',
 *   resolve: [Function: resolve],
 *   url: 'file:///Users/pozafly/Documents/dev/play-ground/esm-exam/src/main.js'
 * }
*/</span></code></pre></div>
<p>위와 같은 결과를 얻었다. dirname, filename, resolve, url 등의 정보가 들어있다. 절대 경로로 내 파일(모듈)의 위치를 가리키고 있다. 그렇다면 브라우저에서는 어떻게 동작하는가?</p>
<p>간단하게 <a href="https://github.com/johnpapa/lite-server" target="_blank" rel="nofollow">lite-server</a>를 설치하고 index.html 파일을 브라우저로 서빙해보자.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ <span class="token function">npm</span> i <span class="token parameter variable">-D</span> lite-server</code></pre></div>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"module"</span><span class="token punctuation">,</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"lite-server"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"lite-server"</span><span class="token operator">:</span> <span class="token string">"^2.6.1"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>dev 스크립트를 입력해 주고, index.html 파일을 만들어 <code class="language-text">npm run dev</code> 명령어를 실행한다.</p>
<div class="gatsby-highlight has-highlighted-lines" data-language="html"><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- index.html --></span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
<span class="gatsby-highlight-code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./src/main.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre></div>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 804px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 15%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAnklEQVR42m2Oyw6CMBBF+f/Pc+fCBy6q0EKhD6xM67Fg3HmTm5NJJjenCSEwmIEUn4jWrMbsTbon3RV5sqzXC7ne2Y47yzwhy0Ksdc6xbYyjZY5CI1nQraI/nJmOLa7TGKVQpxP9rWX1bh8qbqbEQJ4rl0h5JSRnRIT8Y3nTUJOsJ3SW4n21rCabQd8hg6Fshrcr8rh/zXbT+hs8//IB617mnumNSiMAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="browser-import.meta"
        title=""
        src="/static/7fa03cf5335260b60df14598ca0e8692/0c082/browser-import.meta.png"
        srcset="/static/7fa03cf5335260b60df14598ca0e8692/0eb09/browser-import.meta.png 500w,
/static/7fa03cf5335260b60df14598ca0e8692/0c082/browser-import.meta.png 804w"
        sizes="(max-width: 804px) 100vw, 804px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>resolve와, url 정보가 들어있다. Node.js 환경과는 조금 다르다. dirname, filename이 없다. 그리고 Node.js 환경에서의 <code class="language-text">url</code> 은 모듈(파일)의 절대 경로가 들어가 있고, 브라우저 환경에서의 <code class="language-text">url</code> 은 http server가 서빙하고 있는 주소 자체를 담고 있다.</p>
<p>여기서 재미있는 것을 하나 더 해볼 수 있는데, 쿼리 파라미터로 원하는 값을 넣어줄 수 있다.</p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./src/main.js?info=5<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre></div>
<p>이렇게, 쿼리 파라미터 <code class="language-text">info</code>라는 key에 value를 5를 넣었다. 다시 실행해 보면, main.js가 모듈로서 여전히 호출되고</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 928px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 12.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAqUlEQVR42kWO227DMAxD8/+/N/SxawakTetrEruJ49g+U7sBfaBEQgLJbl03yrJwjDey8+THnaweHMaQrwO5v1DnmeM+UqyheEcx+q2PbSPEyCz3EALGOjp16jFfZ8Iw4rXj9n1+I4hhk+fiLG19UmOgPSMtJepLh4Wad2otlPJB5wdDmiO7UmQ/kbQmvbi03ZXwn54sydladi2tp+mfS8tFQoAmo7a//QuwYOXunQBTJwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="import.meta.info"
        title=""
        src="/static/ff550c2f2284ef9887f1930c25196a93/cda85/import.meta.info.png"
        srcset="/static/ff550c2f2284ef9887f1930c25196a93/0eb09/import.meta.info.png 500w,
/static/ff550c2f2284ef9887f1930c25196a93/cda85/import.meta.info.png 928w"
        sizes="(max-width: 928px) 100vw, 928px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>이렇게 url의 모습이 변경된 것을 볼 수 있다. 그러면 이 url 변수를 가공해 info 값을 얻을 수가 있는데,</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// src/main.js</span>

<span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'info'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span></code></pre></div>
<p>이런 식으로 모듈끼리의 정보도 주고받을 수 있다. 이는 Node.js 환경에서도 마찬가지이다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// some.js</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">callImportMeta</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// main.js</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> callImportMeta <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./some.js?id=pozafly'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">callImportMeta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// pozafly</span></code></pre></div>
<p>메타 정보를 쿼리 파라미터로 주고받았다.</p>
<p>node.js와 browser 모두 meta 정보에 접근할 수 있다. 근데 Vite에서는 왜 dotenv를 쓰는 걸까? env를 단순히 읽어들이기 위해서일까?</p>
<p>Vite로 프로젝트를 실행하고 Chrome devTools의 source 탭에 App.tsx가 트랜스파일링 된 파일을 보면</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1170px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 33.599999999999994%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABSUlEQVR42pWR0XKjMAxF+f+P6g/sbLJMkpIEkqbBBbKACSUp2MacikwfOn3ZWc3ckWRdXcty8PRLESU5iz8btvGZaHdiGUZsoiP7g+L38pnk+Ea42j3Ok6Nitd5L/cDL+cIi3BKu4wd3tUkI1nHB8tATHRsqfRd8cCk7LlWHllhfB+rWUDU9RSU1PVDo/sHTsy/fKQWV8Of+oHcTXXWnXWWkrzJtHJOmKSrPuaicIi+JT2+c0oLkVJCrkuw1o5Xaragw1wbTtgxNgx0GgnGC0ThsVlNsd+Txnrau6XWNsxbrHMYYnLN478CPTBJPo5Pc89MCJ4qiiX1vuYZLbirlI1Pc0zO26/inTXP39OW/C7az4EKeWnNWf2VsJ1OM/K8Fo0xtjMV0N6zW1Ne7fEKPcZ5BYL8wmJHBekaBF76XdXhZx+znix+5NXwCIv4VyibLESYAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="source-tab"
        title=""
        src="/static/79da4e50c599e0226c48d5439368c947/77666/source-tab.png"
        srcset="/static/79da4e50c599e0226c48d5439368c947/0eb09/source-tab.png 500w,
/static/79da4e50c599e0226c48d5439368c947/1263b/source-tab.png 1000w,
/static/79da4e50c599e0226c48d5439368c947/77666/source-tab.png 1170w"
        sizes="(max-width: 1170px) 100vw, 1170px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>이렇게 되어 있다. env 파일에 정의한 <code class="language-text">VITE_xxx</code> 변수 및 다른 변수가 브라우저 외부로 노출되어 있다. Vite는 우선 devServer(Node.js 환경)에서 환경 변수를 설정할 뿐 아니라, 위의 쿼리 파라미터를 이용해 다른 기능에도 응용하고 있다. 이 쿼리 파라미터를 어떻게 사용하고 있을까?</p>
<br/>
<h2 id="HMR" style="position:relative;">HMR<a href="#HMR" aria-label="HMR permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<p>HMR(Hot Module Replacement)는 번들러 환경에서 개발할 때 주로 사용하는데, 소스코드를 변경하면 devServer를 새로 껐다 키지 않고 브라우저를 새로고침 하지 않아도 모듈을 교체해 변경된 부분을 즉시 볼 수 있게 만들어주는 기능이다.</p>
<p>Vite에서는 HMR 기능에 <code class="language-text">import.meta</code> 를 사용하고 있다. 브라우저에 로드 된 Sources 탭의 소스 맵에 breakpoint를 찍어 보면서 따라가보자.</p>
<blockquote>
<p>※ Vite는 컴퓨터에서 파일(소스코드) 변경 감지는 <a href="https://github.com/paulmillr/chokidar" target="_blank" rel="nofollow">chokidar</a>이라는 라이브러리를 사용하고 있다.</p>
</blockquote>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1128px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 23%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHklEQVR42nWP6W6CUBCFef+Han81xi6pVmQpoqKgVbj3soNY+Do+QCc5OZPJ5CzWs9MydnemsiWvbpiyxwgPtzvUPYXRtOeMJlWk1zN1WTCOI/+NlaQVF3n8cCJev2Pmfszbg72A2cpnZgfMV998eDtmjs8ijFntE97DhFPmw/DJ2C+Z+oVgiVVVOW2aslt6vLtbXhYBy+BAEO1Z+zbexifYb1CFJDSpNDDSwKBzRVv9wO9FhM5M94sInx4JS6b6ht4kfDoHvtyIq9Q7HhO2YUgSx1wvVzIxzfMcrRRlWdEZQ5cpmqanzjR903GrGqyndU1fdMROyOaQso012yjGc11s28YVjiSt1ophGETUoLKMTFCUpdw1Skwq2adp4g9moHUBgT9WqgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="dev-tools-break-point"
        title=""
        src="/static/5e3f5ccf6510d2cb1df2b892c55ece42/bac97/dev-tools-break-point.png"
        srcset="/static/5e3f5ccf6510d2cb1df2b892c55ece42/0eb09/dev-tools-break-point.png 500w,
/static/5e3f5ccf6510d2cb1df2b892c55ece42/1263b/dev-tools-break-point.png 1000w,
/static/5e3f5ccf6510d2cb1df2b892c55ece42/bac97/dev-tools-break-point.png 1128w"
        sizes="(max-width: 1128px) 100vw, 1128px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>HTML head 태그에 <code class="language-text">/@vite/client</code> 를 불러오도록 명시하고 있다. 따라서 진입점은 <code class="language-text">client.ts</code> 파일이다.</p>
<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// @vite/client.ts (간추린 버전)</span>

<span class="gatsby-highlight-code-line"><span class="token keyword">const</span> importMetaUrl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token keyword">const</span> socketProtocol <span class="token operator">=</span> importMetaUrl<span class="token punctuation">.</span>protocol <span class="token operator">===</span> <span class="token string">'https:'</span> <span class="token operator">?</span> <span class="token string">'wss'</span> <span class="token operator">:</span> <span class="token string">'ws'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> socketHost <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>importMetaUrl<span class="token punctuation">.</span>hostname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>importMetaUrl<span class="token punctuation">.</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">let</span> socket <span class="token operator">=</span> <span class="token function">setupWebSocket</span><span class="token punctuation">(</span>socketProtocol<span class="token punctuation">,</span> socketHost<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">setupWebSocket</span><span class="token punctuation">(</span><span class="token parameter">protocol<span class="token punctuation">,</span> hostAndPath</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>protocol<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hostAndPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">'vite-hmr'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> isOpened <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token comment">// Listen for messages</span>
  socket<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">handleMessage</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> socket<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">importMetaUrl</code> 은 import.meta.url을 URL 객체화 한 정보를 가지고 있다.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">importMetaUrl: URL
  hash: ""
  host: "localhost:5173"
  hostname: "localhost"
  href: "http://localhost:5173/@vite/client"
  origin: "http://localhost:5173"
  password: ""
  pathname: "/@vite/client"
  port: "5173"
  protocol: "http:"
  search: ""
  searchParams: URLSearchParams
    size: 0
  username: ""</code></pre></div>
<p>위에서 살펴봤던 브라우저에 로드 된 <code class="language-text">@vite/client</code> 모듈의 정보가 담겨있다. 쿼리 스트링에 담겨있을 <code class="language-text">searchParams</code> 는 아직은 존재하지 않는다. 다시 소스를 보면, socket 연결을 위한 작업들을 하고 있다. 이 정보를 봤을 때 Vite의 devServer와 브라우저가 소켓 통신을 통해 어떤 정보를 주고받을 준비를 하는 것을 볼 수 있다.</p>
<p>그리고 socket으로 <code class="language-text">message</code> 이벤트를 감지하고 있는데, 브라우저의 소켓에서 메세지 이벤트를 devServer로부터 전달받으면 <code class="language-text">handleMessage</code> 함수를 실행하도록 되어있다. 이를 기억하자.</p>
<p>이제 HTML의 body 하단의 <code class="language-text">&lt;script type="module" src="/src/main.tsx">&lt;/script></code> 코드가 실행되고, 어플리케이션이 실행된다. 렌더링이 종료되어 브라우저에 코드가 실행되고 난 후, 소스코드를 수정하면 재미있는 현상을 볼 수 있다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 432px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 87.03703703703702%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAACOklEQVR42p2UaXLaQBCFuf818jM3sCshrthgY0CbDTIIIcACCbGDNrR8GZYK8RrbU9WaHvXozZt+3SokcYBsLJD6MF0EDIc2URyT5zlfGYXA3/DQn2FMwHZm6E2NKIr3wa+AFnaPKFgjPbj8aoEzC7nTVFrt9h7wLXsXMEu3eyBlAN7cx2i3xNVHLz5M0/RjDEN/hdJyuDBgOA3oWV0ajQaqqqIoCpIk/fVrtdo+9lZKCodAxmoVYHZcIYyP6zp4nodt20wmE7F297ZYLATzIePx+B2Gx1Myf0neLuN7Q64rt8iyjKZpDAaDTwkkGB4BhTCRfkMSbHCnM8aC2Xy1wg/DA+AzezGOB54YLqekzRvWfYOrnz+o/r5AKl3S1UW+ElGXoQ9xdLDtcY7Cgx8GYt6eckiakLUU4vNvbB9kJvcKS1GPvtFk3lBZ6ncEHZ2xUsVT6zjSrZhrzMQ+T6szb6ps2/e7MjgCbtZkukTSLLFxbcqlErXKDZos0bzTuBcK270eUvWWiohVyiWK52fIYn1ZLCIL9RdSRbAOT1fObZOk+J2oWWdYu8a6KjIXpzvVMhtdE21kkT12yfd28nfvc5EmJs4zUcI1SVfGn3noHZOqULkvykZtNOk/Ph727LrkFYHyV8smWLEVV44WU2zRJSMBZgsg13FOKv7PnjLckFoa8WpOx+xiGAY9kTfLsj75c/insOP6GcFsjGn194C7ot4BfqSHn7RekmbMxyOykUG8WWL1+pim+SXAPwOFExUaKwTeAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="t-query-params"
        title=""
        src="/static/f3469240e5ba64dfdecd6a6fb1abfbe5/dc3b1/t-query-params.png"
        srcset="/static/f3469240e5ba64dfdecd6a6fb1abfbe5/dc3b1/t-query-params.png 432w"
        sizes="(max-width: 432px) 100vw, 432px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>바로, 소스코드를 수정한 모듈에 쿼리 파라미터 <code class="language-text">t</code> 가 새롭게 붙은 파일이 브라우저로 로드되어 새롭게 대체되는 현상이다.</p>
<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// @vite/client.ts (간추린 버전)</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">handleMessage</span><span class="token punctuation">(</span><span class="token parameter">payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>payload<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token keyword">case</span> <span class="token string">'update'</span><span class="token operator">:</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>isFirstUpdate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>
        payload<span class="token punctuation">.</span>updates<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">update</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>update<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'js-update'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">            <span class="token keyword">return</span> hmrClient<span class="token punctuation">.</span><span class="token function">fetchUpdate</span><span class="token punctuation">(</span>update<span class="token punctuation">)</span><span class="token punctuation">;</span></span>          <span class="token punctuation">}</span>
          <span class="token comment">// CSS 관련 HMR 소스코드 더 있음.</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>socket을 브라우저에 등록하는 과정에서 message 이벤트가 일어나면 실행할 handleMessage 함수를 등록했다. 바로 그 함수가 실행되는데 JavaScript 함수이므로 <code class="language-text">hmrClient.fetchUpdate()</code> 함수가 실행된다.</p>
<p>hmrClient는 마찬가지로 Vite가 처음 브라우저로 넘어왔을 때 만들어진 인스턴스인데, 이는 아래와 같다.</p>
<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// @vite/client.ts (간추린 버전)</span>

<span class="token keyword">const</span> hmrClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HMRClient</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">importUpdatedModule</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
  acceptedPath<span class="token punctuation">,</span>
  timestamp<span class="token punctuation">,</span>
  explicitImportRequired<span class="token punctuation">,</span>
<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>acceptedPathWithoutQuery<span class="token punctuation">,</span> query<span class="token punctuation">]</span> <span class="token operator">=</span> acceptedPath<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">?</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span></span><span class="gatsby-highlight-code-line">    base <span class="token operator">+</span></span><span class="gatsby-highlight-code-line">      acceptedPathWithoutQuery<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span></span><span class="gatsby-highlight-code-line">      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">?</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>explicitImportRequired <span class="token operator">?</span> <span class="token string">'import&amp;'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">t=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>timestamp<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>query <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&amp;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>query<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>이곳이 핵심이다. <code class="language-text">await import()</code> 를 사용해 어떤 다른 모듈을 동적으로 불러오는 것을 볼 수 있다. <code class="language-text">t=</code> 로 시작하는 쿼리 파라미터가 있으며, t에는 timestamp가 존재한다. dev-tools에서 봤던 <code class="language-text">App.tsx?t=xxx</code> 는 이것이다.</p>
<p>HMRClient class를 보자.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// @vite/hmr.ts (간추린 버전)</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">HMRClient</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">importUpdatedModule</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>importUpdatedModule <span class="token operator">=</span> importUpdatedModule<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">fetchUpdate</span><span class="token punctuation">(</span><span class="token parameter">update</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> path<span class="token punctuation">,</span> acceptedPath <span class="token punctuation">}</span> <span class="token operator">=</span> update<span class="token punctuation">;</span>
    <span class="token keyword">const</span> isSelfUpdate <span class="token operator">=</span> path <span class="token operator">===</span> acceptedPath<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>isSelfUpdate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">importUpdatedModule</span><span class="token punctuation">(</span>update<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">{</span> deps<span class="token punctuation">,</span> fn <span class="token punctuation">}</span> <span class="token keyword">of</span> qualifiedCallbacks<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">fn</span><span class="token punctuation">(</span>deps<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">dep</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>dep <span class="token operator">===</span> acceptedPath <span class="token operator">?</span> fetchedModule <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">importUpdatedModule</code> 을 받는다. 이는 HMRClinet class를 생성할 때 받는 함수 자체를 말하는데, 결국 이게 실행되는 것은, <code class="language-text">await imort()</code> 동적 모듈을 가져오는 과정이다.</p>
<p>결국 <code class="language-text">@vite/client.ts</code> 에 있던 socket의 addEventListener에 등록된 <code class="language-text">handleMessage</code> 에서 넘겨받은 payload 안에 <code class="language-text">update</code> 객체가 들어있고, update 객체에서는 이것이 js인지 css인지 구분하는 값과, timestamp 값, query 등의 값이 들어있다. 이 정보는 모두 devServer에서 만들어주어 socket으로 브라우저로 전송되어 입력되며 동적 import를 통해 다시 수정된 파일을 devServer에서 다시 브라우저로 전송하는 것이다.</p>
<p>이를 도식화 해보면 아래와 같다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 56.199999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAALABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMCBAYJ/8QAFAEBAAAAAAAAAAAAAAAAAAAAAv/aAAwDAQACEAMQAAAB7fN2tNGQsK//xAAZEAADAQEBAAAAAAAAAAAAAAABAgMEBRP/2gAIAQEAAQUCniS+ms8/Wy5zYzIBJmqpCaef/8QAHREAAQQDAQEAAAAAAAAAAAAAAQIDBBMREiIUEP/aAAgBAwEBPwGMkQ3b4gEV70CXdHFDvqGmJNjeqrxWjD2bOE9cj5//xAAdEQEAAgEFAQAAAAAAAAAAAAACAQMiBBARISMT/9oACAECAQE/Abm9QYF7V4NXwItU2E0ZeJL5iKsl5xhkuu52/8QAKRAAAgECAwcEAwAAAAAAAAAAAQIDBBIAESEFFCIxMkFREyMkM1Jhgf/aAAgBAQAGPwKm2vV0G7bVjiki9useqWJA0sajhkgppL4nuuMBZTJZzQNieiqZN5hdkZ0tkpswkySxLfDKsotkReJWF3I6G0/I9ISZn6SSmXbq1zy5418Ye0fk3Ux1Ovc+f5gcCDMsTkqjv+hj/8QAHRABAQACAgMBAAAAAAAAAAAAAREAITFBUWFxkf/aAAgBAQABPyGa8ACbNMprDWa8httA6GbSIRWwrhLpt3un8G8AYIjhTadnhMDkDt2KnZztPiTLY5gEbKgFgF9Gf//aAAwDAQACAAMAAAAQjM//xAAWEQEBAQAAAAAAAAAAAAAAAAABEQD/2gAIAQMBAT8QTL6BIqYXZUkqBjv/xAAYEQEAAwEAAAAAAAAAAAAAAAABABEhYf/aAAgBAgEBPxCg9fXMMH5gDpp//8QAGhABAQADAQEAAAAAAAAAAAAAAREAITFBUf/aAAgBAQABPxAV8uSCEoM9mID9AyJpyHRyag+cYCbnd4ApFWALONMQWvo4duPw1ACfz8Pi4GmFUUxu9wr5FQFgZ//Z'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="hmr-process"
        title=""
        src="/static/7cf438b0f3030e920cede70837548650/aaf92/hmr-process.jpg"
        srcset="/static/7cf438b0f3030e920cede70837548650/953fe/hmr-process.jpg 500w,
/static/7cf438b0f3030e920cede70837548650/0a251/hmr-process.jpg 1000w,
/static/7cf438b0f3030e920cede70837548650/aaf92/hmr-process.jpg 1920w"
        sizes="(max-width: 1920px) 100vw, 1920px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>Vite는 import.meta를 통해 모듈의 정보를 이용해 HMR를 구현했다. url을 통해 모듈의 경로와 메타 데이터를 활용해 socket를 세팅하고, 소스코드 변경이 일어나면 모든 모듈을 교체하는 것이 아니라 변경된 코드가 담긴 모듈만 동적 import를 통해 교체하는 것이다.</p>
<p>App.tsx에서 <code class="language-text">import.meta.hot</code> 을 콘솔에 찍어보면</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1758px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 11.799999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAaklEQVR42l2MzQrDIBgE8/4vV3rP2WLNJxr/qTq1lxB6GHZgl91EvVHPHaM0VizeGKzWhBAJMSIiOOdJKeH9udyRc+Y4BH9GWmuUXKi10ntnS+J5PXbcOixrnEKgfTpzzosxxpV3/+9/fAFV7ZqPzoibTgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="import.meta.hot"
        title=""
        src="/static/a917e557116f09da5960c8a9995cadc2/cbcea/import.meta.hot.png"
        srcset="/static/a917e557116f09da5960c8a9995cadc2/0eb09/import.meta.hot.png 500w,
/static/a917e557116f09da5960c8a9995cadc2/1263b/import.meta.hot.png 1000w,
/static/a917e557116f09da5960c8a9995cadc2/cbcea/import.meta.hot.png 1758w"
        sizes="(max-width: 1758px) 100vw, 1758px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>이런 정보를 가지고 있고, 그중 <code class="language-text">hotModulesMap</code> 도 들어있다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 806px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 28.599999999999998%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA+UlEQVR42pVR12rEMBD0//9Z3nLE4CrccJFLXOUqe+LdcBfyFCIYVit2htmRUQcZsjcb8l1APgSqjwClLBHFMfq+x3+PoSaFKivQlBWqW6itP7HMC+Z5xr7vOI6DQf22bdBaM/G6rl9Cz97Q14lCxLdQgzTLkKYpXNeF53lIkgR5nnO1bZvfuq57iY/jyP00TT8O9alRJwX6toOUEkVRIAgCmKYJIQSiKILjOK/q+z7jOUcIw5C5bdt+OyyDlFfN7yFyY1kWD5HbpmlYgMTJ7bquUEoxyCWtSnUYBnZu0MPS9BjaEYPacN4ZEYlyo7zO8+QsiUT3vz7lC76EyZDe5Ux1AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="hotModulesMap"
        title=""
        src="/static/23b60f30ed3e8c840519669b599d7294/30577/hotModulesMap.png"
        srcset="/static/23b60f30ed3e8c840519669b599d7294/0eb09/hotModulesMap.png 500w,
/static/23b60f30ed3e8c840519669b599d7294/30577/hotModulesMap.png 806w"
        sizes="(max-width: 806px) 100vw, 806px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>hotModulesMap은, 현재 소스코드를 Vite가 code splitting을 통해 모듈로 나눠놓은 것을 담고 있다. 이 모듈에서 socket으로부터 받은 payload의 정보를 통해 모듈을 교체하기 때문에 훨씬 효율적으로 모듈을 교체할 수 있는 것이다.</p>
<p>참고로 .env 파일의 환경 변수를 담는 <code class="language-text">import.meta.env</code> 와 HMR의 모듈 교체를 위한 map을 담고 있는 <code class="language-text">import.meta.hot</code> 는 브라우저로 전송되는 <code class="language-text">.tsx</code> 모든 모듈의 상단에서 주입하고 있다. 위에서 봤던 사진을 다시 한번 보자.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1170px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 33.599999999999994%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABSUlEQVR42pWR0XKjMAxF+f+P6g/sbLJMkpIEkqbBBbKACSUp2MacikwfOn3ZWc3ckWRdXcty8PRLESU5iz8btvGZaHdiGUZsoiP7g+L38pnk+Ea42j3Ok6Nitd5L/cDL+cIi3BKu4wd3tUkI1nHB8tATHRsqfRd8cCk7LlWHllhfB+rWUDU9RSU1PVDo/sHTsy/fKQWV8Of+oHcTXXWnXWWkrzJtHJOmKSrPuaicIi+JT2+c0oLkVJCrkuw1o5Xaragw1wbTtgxNgx0GgnGC0ThsVlNsd+Txnrau6XWNsxbrHMYYnLN478CPTBJPo5Pc89MCJ4qiiX1vuYZLbirlI1Pc0zO26/inTXP39OW/C7az4EKeWnNWf2VsJ1OM/K8Fo0xtjMV0N6zW1Ne7fEKPcZ5BYL8wmJHBekaBF76XdXhZx+znix+5NXwCIv4VyibLESYAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="source-tab"
        title=""
        src="/static/79da4e50c599e0226c48d5439368c947/77666/source-tab.png"
        srcset="/static/79da4e50c599e0226c48d5439368c947/0eb09/source-tab.png 500w,
/static/79da4e50c599e0226c48d5439368c947/1263b/source-tab.png 1000w,
/static/79da4e50c599e0226c48d5439368c947/77666/source-tab.png 1170w"
        sizes="(max-width: 1170px) 100vw, 1170px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>그래서 소스코드를 수정할 때마다 새로운 timestamp가 쿼리 파라미터가 브라우저에 넘어오고, 쿼리 파라미터 정보를 import.meta로 읽어 새로운 모듈을 가져와야 한다는 정보를 얻어 devServer에 요청 후 갈아끼울 수 있는 매커니즘을 가질 수 있었다.</p>
<p>그렇다면 <code class="language-text">await import()</code> 동적 가져오기를 사용해 모듈 자체(예시: <code class="language-text">Some.tsx</code>) 가져왔다면 react에서 적용은 어떻게 하는 것일까? HMRClient class의 fetchUpdate() 함수를 다시 가져왔다.</p>
<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// @vite/hmr.ts (간추린 버전)</span>

<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">fetchUpdate</span><span class="token punctuation">(</span><span class="token parameter">update</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> path<span class="token punctuation">,</span> acceptedPath <span class="token punctuation">}</span> <span class="token operator">=</span> update<span class="token punctuation">;</span>
  <span class="token keyword">const</span> isSelfUpdate <span class="token operator">=</span> path <span class="token operator">===</span> acceptedPath<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>isSelfUpdate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">importUpdatedModule</span><span class="token punctuation">(</span>update<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">{</span> deps<span class="token punctuation">,</span> fn <span class="token punctuation">}</span> <span class="token keyword">of</span> qualifiedCallbacks<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>      <span class="token function">fn</span><span class="token punctuation">(</span>deps<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">dep</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>dep <span class="token operator">===</span> acceptedPath <span class="token operator">?</span> fetchedModule <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">qualifiedCallbacks</code> 은 허용된 콜백이라는 뜻인데, 허용된 목록 안에 있는 acceptedPath가 모듈 path(dep) 와 동일하다면 fn을 실행하는 구조로 되어있다. 외부로 노출된 <code class="language-text">import.meta.hot</code> 을 통해 콜백이 허용되었는지를 검사 후, 모듈을 교체하는 작업이다.</p>
<p>이후의 동작은 Vite 공식 문서의 <a href="https://ko.vitejs.dev/guide/features.html#hot-module-replacement" target="_blank" rel="nofollow">Hot Module Replacement</a>를 통해  사용하고 있는 프레임워크의 plugin으로 이어져 동작하게 된다.</p>
<br/>
<h2 id="마이그레이션-결과" style="position:relative;">마이그레이션 결과<a href="#%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98-%EA%B2%B0%EA%B3%BC" aria-label="마이그레이션 결과 permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<p>vue-cli를 Vite로 마이그레이션 한 결과 devServer 실행 속도뿐 아니라 build 속도도 개선되었다. 아래는 GitHub Actions 빌드 결과이다.</p>
<p><strong>vue-cli 빌드 결과</strong></p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1136px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 9%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAaklEQVR42i2NSxKAIAxDHRUURFrBH+rC+18y1uriTdJJJ6mWcoNywbRciGkXNpDoQDN4Lhh5lexUrCNYzx+/N68Kpo96V0mK/Ji10IcJdWPQtPZT06nvfJTyA+7/o1R0nPMhGSPQCheyjj6w4i7DTW5HkgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="vue-cli-build"
        title=""
        src="/static/a261ab9d1208dfc27795f784d951b073/46e29/vue-cli-build.png"
        srcset="/static/a261ab9d1208dfc27795f784d951b073/0eb09/vue-cli-build.png 500w,
/static/a261ab9d1208dfc27795f784d951b073/1263b/vue-cli-build.png 1000w,
/static/a261ab9d1208dfc27795f784d951b073/46e29/vue-cli-build.png 1136w"
        sizes="(max-width: 1136px) 100vw, 1136px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p><strong>Vite 빌드 결과</strong></p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 332px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 15.36144578313253%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAoklEQVR42jVO2wqCQBRUd921495kV5OEfJGICoIgqB/o//9oWo/4MAwzcy5TCGVQN45R1S1KSSgFodJt1sRaNAaCLMqsK7X5e76yIMO8zhZkE66PNy63F6TOS4qgh44RvzPCc4K9jPD3E6S1MMuQ9RE0J+bDFDH+FsTPmYsUUju0vge5tDXcW+SPug8M6RyksezV3vFh0VqoznOmU4CKgRv+AUAjRTsUTpctAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="vite-build"
        title=""
        src="/static/14daa32896955b7dc7db07782d7f4057/557e0/vite-build.png"
        srcset="/static/14daa32896955b7dc7db07782d7f4057/557e0/vite-build.png 332w"
        sizes="(max-width: 332px) 100vw, 332px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<p>14s → 5s로 약 62% build 속도가 증가되었다. Vite는 내부적으로 빌드 시 rollup을 사용하기 때문에 Webpack에 비해 더욱 빠른 속도로 빌드 할 수 있다. (devServer는 esbuild로 번들링)</p>
<br/>
<h2 id="마치며" style="position:relative;">마치며<a href="#%EB%A7%88%EC%B9%98%EB%A9%B0" aria-label="마치며 permalink" class="auto-link after"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a></h2>
<p>import.meta는 모듈의 메타 데이터를 저장하고 활용할 수 있는 도구다. 이전에 import.meta가 없었을 때는 Node.js 환경에서 아래 코드와 같이 파일의 경로를 알아내고, 파일을 읽어올 수 있었다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// Node.js 환경</span>

<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> bytes <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'data.bin'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>또한, 브라우저 환경에서 모듈에 대한 메타 데이터를 얻을 수 있는 방법은 아래와 같았다.</p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- 브라우저 환경 --></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">data-option</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>value<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>library.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> theOption <span class="token operator">=</span> document<span class="token punctuation">.</span>currentScript<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>option<span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre></div>
<p>하지만, Node.js 환경에서는 fs와 path 라이브러리를 항상 가지고 있어야 하며 브라우저 환경에서는 현재 실행되고 있는 스크립트가 반드시 library.js 모듈일지는 불명확했기 때문에 문제가 되었다. 따라서 TC39에 import.meta에 대한 제안이 올라왔고 구현되었다.</p>
<p>import.meta는 비교적 최신 문법이며 따라서 구형 브라우저에서는 동작하지 않는다. Vite는 import.meta를 사용하기 때문에 자연스럽게 <a href="https://ko.vitejs.dev/guide/#browser-support" target="_blank" rel="nofollow">구형 브라우저에서는 사용할 수 없다</a>. 하지만, <a href="https://github.com/vitejs/vite/tree/main/packages/plugin-legacy" target="_blank" rel="nofollow">@vitejs/plugin-legacy</a>를 사용한다면 가능하다.</p>
<p>또한 Vite의 <a href="https://github.com/vitejs/vite/discussions/8132" target="_blank" rel="nofollow">discussions</a>를 보면 process.env 대신 import.meta를 사용하는 이유에 대한 답변으로 ECMAScript 모듈의 ‘새로운’ 표준이기 때문에 사용한다라는 답변이 있다. 물론 import.meta는  ECMAScript의 새로운 표준이기도 하지만 Vite가 개발 모드에서 브라우저에 모듈을 서빙하는 과정을 보면 브라우저 자체가 모듈을 다룰 수 있도록 하고, 빠른 번들링 및 모듈 교체를 위함임을 알 수 있다. 이는 Vite의 철학과도 연관되어 있다.</p>
<p>Vite로 마이그레이션 하면서 process.env대신 import.meta를 사용하는 이유가 궁금했다. 결과, import.meta MDN 문서도 함께 번역해 보면서 번들러가 어떻게 이를 사용하고 있는지 살펴볼 수 있는 시간이었다.</p>
<blockquote>
<p>참고</p>
<ul>
<li><a href="https://www.proposals.es/proposals/import.meta" target="_blank" rel="nofollow">import.meta proposals</a></li>
<li><a href="https://dmitripavlutin.com/javascript-import-meta/" target="_blank" rel="nofollow">How to Access ES Module Metadata using import.meta</a></li>
<li><a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Operators/import.meta" target="_blank" rel="nofollow">MDN - import.meta</a></li>
<li><a href="https://ko.vitejs.dev/guide/" target="_blank" rel="nofollow">Vite</a></li>
</ul>
</blockquote></div></section></article><style data-emotion="css lhozv1">.css-lhozv1{position:relative;box-sizing:border-box;width:100%;max-width:760px;margin-right:auto;margin-left:auto;}</style><div class="css-lhozv1"><div></div></div></div></main><style data-emotion="css dcfhc9">.css-dcfhc9{position:relative;padding:0 5vw;}</style><style data-emotion="css 1iakx8z">.css-1iakx8z{background:#0b0c0f;position:relative;padding:0 5vw;}.css-1iakx8z .post-card{padding-bottom:0;border-bottom:none;}.css-1iakx8z .post-card:after{display:none;}.css-1iakx8z .post-card-primary-tag{color:#fff;opacity:0.6;}.css-1iakx8z .post-card-title{color:#fff;word-break:keep-all;opacity:0.8;-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out;}.css-1iakx8z .post-card:hover .post-card-image{opacity:1;}.css-1iakx8z .post-card-excerpt{color:rgb(255 255 255 / 0.6);}.css-1iakx8z .static-avatar{border-color:#000;}.css-1iakx8z .post-card-byline-content{color:rgb(255 255 255 / 0.6);}.css-1iakx8z .post-card-byline-content a{color:rgb(255 255 255 / 0.8);}.css-1iakx8z .author-avatar{border-color:#0a0b0c;}.css-1iakx8z .author-profile-image{background:#0a0b0c;}@media (max-width: 650px){.css-1iakx8z .post-card{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;margin:25px;padding:25px 0 0;}}</style><aside class="read-next css-1iakx8z e7ky4j51"><div class="css-8aaawc"><style data-emotion="css 2ud111">.css-2ud111{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 -25px;padding:60px 0 0;}</style><div class="read-next-feed css-2ud111 e7ky4j50"><style data-emotion="css 150cnm3">.css-150cnm3{position:relative;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:0 1 326px;-ms-flex:0 1 326px;flex:0 1 326px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0 25px 50px;padding:25px;background:linear-gradient(#1a1c20, #0b0c0f);border-radius:12px;}.css-150cnm3 a{-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out;}.css-150cnm3 a:hover{-webkit-text-decoration:none;text-decoration:none;}@media (max-width: 1170px){.css-150cnm3{-webkit-flex:1 1 261px;-ms-flex:1 1 261px;flex:1 1 261px;margin-bottom:5vw;}}@media (max-width: 650px){.css-150cnm3{display:none;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;margin:0 25px;padding:0;background:none;}}</style><article class="read-next-card css-150cnm3 ez817vd4"><header class="read-next-card-header"><style data-emotion="css 18chcim">.css-18chcim{margin:0;font-size:1.3rem;font-weight:300;line-height:1em;color:rgb(255 255 255 / 0.6);letter-spacing:0.4px;}.css-18chcim span,.css-18chcim a{font-size:inherit;}.css-18chcim a{font-weight:500;color:#fff;-webkit-text-decoration:none;text-decoration:none;opacity:0.8;}.css-18chcim a:hover{opacity:1;}</style><h3 class="css-18chcim ez817vd3"><span>More in</span> <a href="/tags/bundler/">Bundler</a></h3></header><style data-emotion="css 1vix6iq">.css-1vix6iq{font-size:1.3rem;}.css-1vix6iq ul{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0;padding:0;list-style:none;}.css-1vix6iq li{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;margin:0;padding:20px 0;border-bottom:rgb(255 255 255 / 0.1);}.css-1vix6iq li:last-of-type{padding-bottom:5px;border:none;}.css-1vix6iq h4{margin:0;font-size:1.3rem;font-weight:600;line-height:1.6em;}.css-1vix6iq li a{display:block;font-size:inherit;color:#fff;opacity:0.8;}.css-1vix6iq li a:hover{opacity:1;}</style><div class="read-next-card-content css-1vix6iq ez817vd2"><ul><li><h4><a href="/environment/webpack-boilerplate/">Webpack5 JavaScript 보일러플레이트 만들기</a></h4><style data-emotion="css 1qhf9t">.css-1qhf9t{margin-top:2px;font-size:1.2rem;font-weight:400;line-height:1.4em;}.css-1qhf9t p{margin:0;font-size:inherit;color:rgb(255 255 255 / 0.6);}.css-1qhf9t p time{font-size:inherit;}</style><div class="read-next-card-meta css-1qhf9t ez817vd1"><p><time dateTime="2023-04-05">2023-04-05</time> -<!-- --> <!-- -->34 min read</p></div></li></ul></div><style data-emotion="css ok4czd">.css-ok4czd{position:relative;margin:40px 0 5px;}.css-ok4czd a{padding:7px 12px 8px 14px;font-size:1.3rem;color:rgb(255 255 255 / 0.6);border:1px solid rgb(255 255 255 / 0.6);border-radius:999px;-webkit-transition:all 0.35s ease-in-out;transition:all 0.35s ease-in-out;}.css-ok4czd a:hover{color:#fecd35;-webkit-text-decoration:none;text-decoration:none;border-color:#fecd35;}</style><footer class="read-next-card-footer css-ok4czd ez817vd0"><a href="/tags/bundler/">See all 2 posts<!-- --> →</a></footer></article><style data-emotion="css 1a2xhz7">.css-1a2xhz7{position:relative;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 1 301px;-ms-flex:1 1 301px;flex:1 1 301px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:220px;margin:0 20px 60px;-webkit-background-size:cover;background-size:cover;}.css-1a2xhz7 img{-webkit-transform:scale(1)!important;-moz-transform:scale(1)!important;-ms-transform:scale(1)!important;transform:scale(1)!important;-webkit-transition:opacity 0.3s ease-out 0s,-webkit-transform 0.5s ease 0s!important;transition:opacity 0.3s ease-out 0s,transform 0.5s ease 0s!important;}.css-1a2xhz7:hover .post-card-image:after{opacity:var(--post-card-after-opacity);}.css-1a2xhz7:hover img[data-main-image]{-webkit-transform:scale(1.03)!important;-moz-transform:scale(1.03)!important;-ms-transform:scale(1.03)!important;transform:scale(1.03)!important;}.css-1a2xhz7.is-next .post-card-image{background:#191b1f;border:1px solid var(--image-border-color__dark);}.css-1a2xhz7.is-next .post-card-primary-tag a{color:#90a2aa;}.css-1a2xhz7.is-next .post-card-excerpt{color:#768086;}.css-1a2xhz7.is-next .post-card-byline-content{color:#90a2aa;}</style><article class="post-card   is-next css-1a2xhz7"><style data-emotion="css uih3rl">.css-uih3rl{position:relative;overflow:hidden;display:block;border-radius:12px;}</style><a class="post-card-image-link css-uih3rl" href="/tools/create-a-slack-random-drawer-app-to-deploy-with-cloudflare/"><style data-emotion="css pg199o">.css-pg199o{overflow:hidden;width:auto;height:200px;background-color:var(--background-color);-webkit-background-size:cover;background-size:cover;border:1px solid var(--image-border-color);border-radius:12px;}.css-pg199o:after{content:'';position:absolute;top:0;left:0;display:block;width:100%;height:100%;opacity:var(--post-card-opacity);background-color:var(--post-card-background);-webkit-transition:all 0.3s ease 0s;transition:all 0.3s ease 0s;}.css-pg199o img{border-radius:12px;}</style><div class="post-card-image css-pg199o ezywgfd6"><div data-gatsby-image-wrapper="" style="height:100%" class="gatsby-image-wrapper"><div aria-hidden="true" style="padding-top:66.66666666666666%"></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAYHCAn/xAAWAQEBAQAAAAAAAAAAAAAAAAAFAgj/2gAMAwEAAhADEAAAAUaxeerNpIZ7IZF5/8QAGhAAAgMBAQAAAAAAAAAAAAAAAwUBAgYEB//aAAgBAQABBQJMoM2aO/O4BxHWdlCh0/cOjPdaBvNtQ1mf/8QAIhEAAgEDBAIDAAAAAAAAAAAAAQIDBBESBQYHEwAhI2Jx/9oACAEDAQE/AY9rccRRRMZdRrFmkZ6tTTmnqII0dTFDSzfKjdikrJKyApYHGe+CttXjbJuuu3OI8jgDS6ebLcW99i39fUfnn//EACMRAAEDAwIHAAAAAAAAAAAAAAECAwQFERIAIQYHEyIjUXH/2gAIAQIBAT8Bnz+Y0qqsuQahTafBjshAbUlUnruLQpK35DPiz3sGmg8gNkZggk3Fe40AAWiglYAyIVOSCdrm3da/rI/df//EACYQAAIBBAIBAgcAAAAAAAAAAAIDAQQREhMAIQUUIjFCYWJykaH/2gAIAQEABj8CT4lDVLNxFHqTFzUguOpqdSBKpauOi1qXtx+UYEyEKzxbmiCXspq0/JTUjSmxhoijmjqj8XSDGxJlUNCpEDgWKWORAfCH0rGWm2SB3rm026YrIZ/k/ThjrTYwwL22LCYiLQUdx8L/AJd8WXkKqHmq+J6qdBTEwkbNmlQjfYULEN2crGJEJESmOdPMPtWeA/q3P//EABoQAQEBAAMBAAAAAAAAAAAAAAERIQAxQVH/2gAIAQEAAT8hG01a/RTdk2V4BLkN3aQUSnaq7bUmKRSdSywRQJRItEdY/TwdUz0JicTXbaAwUCjM0eARMIQvZ7fD5z//2gAMAwEAAgADAAAAEFPP/8QAFxEBAQEBAAAAAAAAAAAAAAAAAREAIf/aAAgBAwEBPxCOvrGp5QLsnEQzVGPiVJAlVZULN//EABcRAQEBAQAAAAAAAAAAAAAAAAERACH/2gAIAQIBAT8QOygXtFnm1tRGinQNiQFBQoI0Kl3/xAAYEAEBAQEBAAAAAAAAAAAAAAABEQAQMf/aAAgBAQABPxBav2SyHojLj3hpOvr4fEqQjcKmz1QhKgrbbxA2wgojRWcQGNE+h19op1Q2KnOpVgAkgYApKB4N/9k=" alt=""/><picture><source type="image/webp" data-srcset="/static/f1883a75a3650115622d887347cf2f5d/57584/main.webp 750w,/static/f1883a75a3650115622d887347cf2f5d/984df/main.webp 1080w,/static/f1883a75a3650115622d887347cf2f5d/4a276/main.webp 1366w,/static/f1883a75a3650115622d887347cf2f5d/9c00f/main.webp 1920w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/f1883a75a3650115622d887347cf2f5d/5267c/main.jpg" data-srcset="/static/f1883a75a3650115622d887347cf2f5d/7284f/main.jpg 750w,/static/f1883a75a3650115622d887347cf2f5d/29ba9/main.jpg 1080w,/static/f1883a75a3650115622d887347cf2f5d/c8896/main.jpg 1366w,/static/f1883a75a3650115622d887347cf2f5d/5267c/main.jpg 1920w" alt="Cloudflare로 배포하는 슬랙 랜덤 추첨기 앱 만들기 cover image"/></picture><noscript><picture><source type="image/webp" srcSet="/static/f1883a75a3650115622d887347cf2f5d/57584/main.webp 750w,/static/f1883a75a3650115622d887347cf2f5d/984df/main.webp 1080w,/static/f1883a75a3650115622d887347cf2f5d/4a276/main.webp 1366w,/static/f1883a75a3650115622d887347cf2f5d/9c00f/main.webp 1920w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/f1883a75a3650115622d887347cf2f5d/5267c/main.jpg" srcSet="/static/f1883a75a3650115622d887347cf2f5d/7284f/main.jpg 750w,/static/f1883a75a3650115622d887347cf2f5d/29ba9/main.jpg 1080w,/static/f1883a75a3650115622d887347cf2f5d/c8896/main.jpg 1366w,/static/f1883a75a3650115622d887347cf2f5d/5267c/main.jpg 1920w" alt="Cloudflare로 배포하는 슬랙 랜덤 추첨기 앱 만들기 cover image"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div></a><style data-emotion="css z5atxi">.css-z5atxi{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div class="post-card-content css-z5atxi ezywgfd5"><style data-emotion="css 1k7wcu">.css-1k7wcu{margin:15px 0 0.2em;font-size:1.2rem;font-weight:500;color:#90a2aa;letter-spacing:0.2px;}.css-1k7wcu a{font-size:1.2rem;color:var(--anchor-secondary-color);}</style><div class="post-card-primary-tag css-1k7wcu ezywgfd4"><a href="/tags/tool/">Tool</a>,  <a href="/tags/cloud/">Cloud</a>,  <a href="/tags/slack/">Slack</a></div><style data-emotion="css 1fjrpmt">.css-1fjrpmt{position:relative;display:block;color:#15171A;}.css-1fjrpmt:hover{-webkit-text-decoration:none;text-decoration:none;}</style><a class="post-card-content-link css-1fjrpmt" href="/tools/create-a-slack-random-drawer-app-to-deploy-with-cloudflare/"><header><style data-emotion="css 18yvs8h">.css-18yvs8h{margin:0 0 0.4em;line-height:1.15em;color:var(--post-card-title);word-break:keep-all;}</style><h2 class="post-card-title css-18yvs8h ezywgfd3">Cloudflare로 배포하는 슬랙 랜덤 추첨기 앱 만들기</h2></header><style data-emotion="css 13tchzb">.css-13tchzb{font-size:1.6rem;color:var(--post-card-description);}.css-13tchzb p{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;width:100%;margin-bottom:0.4em;font-size:1.4rem;text-overflow:ellipsis;word-break:keep-all;-webkit-line-clamp:2;}</style><section class="post-card-excerpt css-13tchzb ezywgfd2"><p>Bolt-js와 Ngrok을 사용한 서버 개발환경 구성, Cloudflare의 Workers에 배포하기 까지 마이그레이션 과정의 기록</p></section></a><style data-emotion="css 143c7df">.css-143c7df{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;padding:0;}</style><footer class="post-card-meta css-143c7df ezywgfd1"><style data-emotion="css 137vq87">.css-137vq87{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 1 50%;-ms-flex:1 1 50%;flex:1 1 50%;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;font-weight:400;line-height:1.4em;color:#90a2aa;letter-spacing:0.2px;}.css-137vq87 time{font-size:1.3rem;}.css-137vq87 span{margin:0;font-size:1.3rem;}.css-137vq87 a{font-weight:600;color:var(--post-card-by-line);}</style><div class="post-card-byline-content css-137vq87 ezywgfd0"><span class="post-card-byline-date"><time dateTime="2024-03-15">2024-03-15</time> <span class="bull">•</span> <span>23 min read</span></span></div></footer></div></article><article class="post-card   is-next css-1a2xhz7"><a class="post-card-image-link css-uih3rl" href="/css/explore-how-to-apply-modern-css/"><div class="post-card-image css-pg199o ezywgfd6"><div data-gatsby-image-wrapper="" style="height:100%" class="gatsby-image-wrapper"><div aria-hidden="true" style="padding-top:66.82291666666667%"></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAcICf/EABYBAQEBAAAAAAAAAAAAAAAAAAcFBv/aAAwDAQACEAMQAAABzEbqqcjgEzGUiQ81/8QAGxAAAgMAAwAAAAAAAAAAAAAAAwQBAgUABhL/2gAIAQEAAQUCxknXz9owKIt3G7M4qg+Ux0byVQPv/8QAIBEAAgICAQUBAAAAAAAAAAAAAQMCBAURBgASExRBFf/aAAgBAwEBPwG7zfA4q1mq17CLs17SV/k+CrX9jHXFrmJFtizKc7FWw6QmyCvVmpY8aj36cI80UYgjHpAI2BonQ+Df3XX/xAAeEQACAQQDAQAAAAAAAAAAAAABAgMABBESBQcT0v/aAAgBAgEBPwGXsqOBbbI5L3gkk9ljuFFvdwyLgKQVzA8R1ZH1udmU5ARylHs7kSc/Vf/EACQQAAICAQQBBAMAAAAAAAAAAAECAwQRAAUSITETInGBIzKR/9oACAEBAAY/AvSqSQGNVRpnss4WBGfgH/GGlcA5J4KcAd4yud5bZDfu7FtNmnSfdrZpx5t3IJLMUMccEhEqmsi2OQGYlkCWMPxL5HuB7Vs+QfB+9IcsGHhlZkYZ84ZGDD6PevVkjaWQjszSzS5+VeQqfgrjX6j+a//EABsQAQADAAMBAAAAAAAAAAAAAAEAESExQWGx/9oACAEBAAE/IaMOOpmZAB69oRT4BXgPmEc0tR9GAVbgzgUktD4w6aydgHYYuzq14YFmi0KixqEQABQUoCzPPk//2gAMAwEAAgADAAAAEMf/AP/EABcRAQEBAQAAAAAAAAAAAAAAAAERIQD/2gAIAQMBAT8QYd7v3iIPcXvQl/FoXUCUGLCpYXP/xAAaEQEBAAIDAAAAAAAAAAAAAAABESFRADFB/9oACAECAQE/EGRoZHE3Y+FAzoIlbLhUZca7hvzn/8QAGRABAQEBAQEAAAAAAAAAAAAAAREAMUFh/9oACAEBAAE/EJsiZVLs8ZmdBLO3H/FAjzDjRSuUq/7vxJ3qkLHEcQSkA1AEAyvkA0MofXmFwxmYANAAEAAAAAgAAb//2Q==" alt=""/><picture><source type="image/webp" data-srcset="/static/01d11114d30ea9cb1f8571db9fad39ab/d2a19/main.webp 750w,/static/01d11114d30ea9cb1f8571db9fad39ab/39bea/main.webp 1080w,/static/01d11114d30ea9cb1f8571db9fad39ab/8f28c/main.webp 1366w,/static/01d11114d30ea9cb1f8571db9fad39ab/237ec/main.webp 1920w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/01d11114d30ea9cb1f8571db9fad39ab/2e6cc/main.jpg" data-srcset="/static/01d11114d30ea9cb1f8571db9fad39ab/6cce3/main.jpg 750w,/static/01d11114d30ea9cb1f8571db9fad39ab/dec99/main.jpg 1080w,/static/01d11114d30ea9cb1f8571db9fad39ab/12c41/main.jpg 1366w,/static/01d11114d30ea9cb1f8571db9fad39ab/2e6cc/main.jpg 1920w" alt="모던 CSS 적용 방법 둘러보기(CSS-in-JS with zero-runtime) cover image"/></picture><noscript><picture><source type="image/webp" srcSet="/static/01d11114d30ea9cb1f8571db9fad39ab/d2a19/main.webp 750w,/static/01d11114d30ea9cb1f8571db9fad39ab/39bea/main.webp 1080w,/static/01d11114d30ea9cb1f8571db9fad39ab/8f28c/main.webp 1366w,/static/01d11114d30ea9cb1f8571db9fad39ab/237ec/main.webp 1920w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/01d11114d30ea9cb1f8571db9fad39ab/2e6cc/main.jpg" srcSet="/static/01d11114d30ea9cb1f8571db9fad39ab/6cce3/main.jpg 750w,/static/01d11114d30ea9cb1f8571db9fad39ab/dec99/main.jpg 1080w,/static/01d11114d30ea9cb1f8571db9fad39ab/12c41/main.jpg 1366w,/static/01d11114d30ea9cb1f8571db9fad39ab/2e6cc/main.jpg 1920w" alt="모던 CSS 적용 방법 둘러보기(CSS-in-JS with zero-runtime) cover image"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div></a><div class="post-card-content css-z5atxi ezywgfd5"><div class="post-card-primary-tag css-1k7wcu ezywgfd4"><a href="/tags/css/">CSS</a>,  <a href="/tags/performance/">Performance</a></div><a class="post-card-content-link css-1fjrpmt" href="/css/explore-how-to-apply-modern-css/"><header><h2 class="post-card-title css-18yvs8h ezywgfd3">모던 CSS 적용 방법 둘러보기(CSS-in-JS with zero-runtime)</h2></header><section class="post-card-excerpt css-13tchzb ezywgfd2"><p>전처리기부터 Atomic CSS 까지, 웹 어플리케이션 개발에 필요한 CSS 적용 방법 및 최적화에 관한 이야기</p></section></a><footer class="post-card-meta css-143c7df ezywgfd1"><div class="post-card-byline-content css-137vq87 ezywgfd0"><span class="post-card-byline-date"><time dateTime="2023-10-08">2023-10-08</time> <span class="bull">•</span> <span>29 min read</span></span></div></footer></div></article></div></div></aside><style data-emotion="css r21a16">.css-r21a16{position:relative;padding:0 5vw;position:relative;padding-top:20px;padding-bottom:22px;color:#fff;background:#0b0c0f;}</style><footer class="css-r21a16"><style data-emotion="css 98e3yl">.css-98e3yl{width:100%;max-width:1040px;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;font-size:1.3rem;color:rgb(255 255 255 / 0.7);}.css-98e3yl a{color:rgb(255 255 255 / 0.7);}.css-98e3yl a:hover{color:rgb(255 255 255 / 1);-webkit-text-decoration:none;text-decoration:none;}@media (max-width: 650px){.css-98e3yl{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="css-98e3yl"><section class="copyright">© <!-- -->2024<!-- --> <span>|  </span><a href="https://www.gatsbyjs.com/" target="_blank" rel="nofollow noreferrer">Pozafly&#x27;s Blog<!-- --> <!-- -->is based on Gatsby</a></section><style data-emotion="css 13qgqyf">.css-13qgqyf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.css-13qgqyf a{position:relative;margin-left:20px;font-size:1.3rem;}.css-13qgqyf a:before{content:'';position:absolute;top:11px;left:-11px;display:block;width:2px;height:2px;background:#fff;border-radius:100%;}.css-13qgqyf a:first-of-type:before{display:none;}@media (max-width: 650px){.css-13qgqyf a:first-of-type{margin-left:0;}}</style><nav class="css-13qgqyf e69t7dt0"><a href="/">Latest Posts</a><a href="https://github.com/pozafly" target="_blank" rel="noopener noreferrer">Github</a><a href="/rss.xml">RSS</a></nav></div></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/environment/why-do-you-use-import-meta-in-vite/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-02802b16298677e86e0b.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-667dc978376cb4fd92a2.js\"],\"component---src-pages-about-tsx\":[\"/component---src-pages-about-tsx-91233ed466eef9044852.js\"],\"component---src-pages-tags-tsx\":[\"/component---src-pages-tags-tsx-a5136c7e7b4f42e40481.js\"],\"component---src-templates-index-tsx\":[\"/component---src-templates-index-tsx-2067fc09052c044e8316.js\"],\"component---src-templates-post-tsx\":[],\"component---src-templates-tags-tsx\":[\"/component---src-templates-tags-tsx-9766b4e804c4f0ce2093.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="2a54604737ade35a9cbf";</script><script src="/webpack-runtime-ee0b2fa63a24bceb8cdd.js" async></script><script src="/app-02802b16298677e86e0b.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>