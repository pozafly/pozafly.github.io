{"componentChunkName":"component---src-templates-post-tsx","path":"/tripllo/(9)travis-auto-deploy/","result":{"data":{"logo":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACaElEQVQ4y42UX0hTcRTHz/ltFhv9mb2VWJFEyfShLIowKOifkzSUMl21VSbYn7ndu7v5ZD0XSG8+1IPQH3qKCkZUT0vYQ6wIhKEUQqskwgpjoe3e3+/0+13Llm3qOIzD4Xzu9/x+93wvhIGKRg8IHYRmJ6V6oGg1BFYcqNnx4BgbiimeLx4WEQng9ApcX4H10d/iYlFwCMw4o11wxV3ndVVvPAA34qiKC8NyQh3oHGZdUO59lqoavOuBykssF7EnWhC24g6qgXZ3i691mhq/0pL6up0Q62VFxGEOaSC1wfOlK1dVp0dTnB4RrXucdLPyM+yN/t/NFcLqVqJOqoTtnrihCSLLnDKtoEnLAh2boLnXURpWAzPaA/3ODWt2vJsc5kQkSPCkoJrXWadn+WG4H0PVVlw5wmg/9FcNJK5K0OJc0UQmN4iq+m41wk39X/ECZQfJU51toEM58ckUti4peaIRk+/9LLq3kly4MCs6NpLcB5+evzORV8KCZn7cTq5/yDcF8oZsKwrLmc8DXasV1pQt+wcWtnpuXFxeLS7KNiwBXwAaGhC57/RljL5l/8bEGP3IUaJPdMs2R4n3LPmoy4o4uVbGI2WWpkImMkxZjLp4GPl8GyaPrSljSDNKS6ob0uxiGLisREttWERZ4mcDu+3Hl0HM+DHdik8CmAngqI/d68L3J/BVB6a1giWH2Q2Rvj2CibVsn5cFt7CQ/K9lnRVs92Z2XMZBHNzGjKOYNAqWdFZZfTQ64WMPTPrxRRummvDhKcycxOHT+LYLx1vwaRBH9HmMYY8kLSnk4+Uguh0zxzbsfI4rfwF8a2BEn7K2TwAAAABJRU5ErkJggg==","width":400,"height":400,"src":"/static/8c061761f263c344f2c0416607c8adf1/3891b/pozafly.png","srcSet":"/static/8c061761f263c344f2c0416607c8adf1/3891b/pozafly.png 1x,\n/static/8c061761f263c344f2c0416607c8adf1/8c332/pozafly.png 1.5x,\n/static/8c061761f263c344f2c0416607c8adf1/bc8e0/pozafly.png 2x"}}},"markdownRemark":{"html":"<h1>Travis</h1>\n<p>Travis CI에 대해서 알아보자. 우선 <a href=\"https://docs.travis-ci.com/\">Travis 공식</a> Docs를 보고 따라해봤다. 참고 자료는 이동욱님의 스프링 부트와 AWS로 혼자 구현하는 웹 서비스 책을 참고했다.</p>\n<p>우선 travis endpoint에 대해 알아야 한다.</p>\n<ul>\n<li>travis 엔드 포인트 —pro\nAPI 엔드 포인트 : <a href=\"https://api.travis-ci.com/\">https://api.travis-ci.com/</a></li>\n<li>travis 엔드 포인트\nAPI 엔드 포인트 : <a href=\"https://api.travis-ci.org/\">https://api.travis-ci.org/</a></li>\n</ul>\n<p>endpoint를 잘 설정해주어야지 오류가 나지 않는다. springboot를 travis로 빌드 자동화를 했을 때도 겪었었지만, .org 엔드포인트는 오류가 많고 잘 되지 않는 경우가 많다. 버전 차이인듯 싶다. 어쨌든 우리는 .com인 —pro를 붙여 엔드포인트를 설정해줄 것이다.</p>\n<br/>\n<br/>\n<h2>Github repository 연동</h2>\n<p><a href=\"https://travis-ci.com/\">https://travis-ci.com/</a> 이곳에 먼저 들어가서 github ID로 로그인을 해주자. 우측 상단에 내 아이콘을 선택하고 Setting -> Repositories에 가면 무슨 프로젝트를 설정할 것인지 페이지가 나온다. 여기서 어떤 프로젝트를 CI 할 것인지 설정해줄 수 있다. Manage repositories on GitHub 을 클릭하고, github 페이지에 들어가면, </p>\n<p><img src=\"https://user-images.githubusercontent.com/59427983/113650888-f3ef3600-96cb-11eb-83a3-fe7d8b9849ad.png\" alt=\"스크린샷 2021-04-06 오전 11 33 19\"></p>\n<p>이곳에서 자신의 프로젝트를 선택해서 연동시킬 수 있다.</p>\n<br/>\n<br/>\n<h2>.travis.yml</h2>\n<p>후에, 자신의 프로젝트에 .travis.yml 파일을 만들자.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">language</span><span class=\"token punctuation\">:</span> node_js\n<span class=\"token key atrule\">node_js</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> 14.16.0\n<span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">only</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> master\n<span class=\"token key atrule\">cache</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">directories</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> node_modules\n<span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span> npm run build\n<span class=\"token key atrule\">notifications</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">email</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">recipients</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> pozafly@kakao.com</code></pre></div>\n<ul>\n<li>language : vue 프로젝트를 설정할 것이므로, language는 node_js 형태로 빌드한다. </li>\n<li>node_js : 버전은 자신이 설정한 것 대로 해주면 됨</li>\n<li>branches : master 브랜치에 push 되었을 때 자동으로 돌아가게 해줌.</li>\n<li>cache : 빌드시, node_modules가 계속 install 될 필요는 없으므로 해당 폴더를 캐시화 시켜주겠다는 말이다.</li>\n<li>script : 빌드 명령어</li>\n<li>notifications : CI가 완료되었을 때 결과를 noti 해준다. 내 메일 주소를 적었다.</li>\n</ul>\n<p>우선 기본 틀이다. 이제 이 파일을 작성했다면, master 브랜치에 push or merge 할 때마다 travis가 알아서 프로젝트를 빌드해줄 것이다. push후 travis 페이지에 가보면 build log가 실시간으로 찍힌다.</p>\n<p>첫번째 에러가 났다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">error  \nTemplate execution failed: ReferenceError: VUE_APP_GOOGLE_CLIENT_ID is not defined</code></pre></div>\n<p>VUE<em>APP</em>GOOGLE<em>CLINET</em>ID 는 .env 파일에 있는데, 이걸 build 하지 못하는 이유는 .env 파일이 github에 올라가지 않아서다. 따라서 .env 파일을 travis 서버에서 인식하도록 할 필요가 있다. 방법은 3가지가 있다. <a href=\"https://docs.travis-ci.com/user/environment-variables/\">공식 페이지 환경변수</a> 이곳에 잘 설명되어 있는데, 나는 두번째 방법인 .travis.yml에서 secret 파일 암호화하는 방법을 사용하겠다.</p>\n<br/>\n<br/>\n<h2>.evn 파일을 AES256 이용하여 .enc 파일 생성하기</h2>\n<h3>CLC 설치 &#x26; login</h3>\n<p><a href=\"https://sanghye.tistory.com/42\">여기</a> 참고하였다. 먼저 로컬 컴퓨터에서 암호화 해 .enc 파일을 생성할 것이기 때문에 travis CLC가 필요하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ gem install travis</code></pre></div>\n<p>만약 권한 오류가 난다면 sudo를 붙여주도록 하자. 이제 travis에 login을 해야 함.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ travis login --pro</code></pre></div>\n<p>—com, —org 옵션을 줄 수 있는데, pro를 붙여주자. 아니면 빌드시 오류 발생. org를 사용하고 있다면 org를 써도 된다. login을 할 때 Not Found 에러가 날 수 있다. <a href=\"https://github.com/pozafly/TIL/blob/main/%F0%9F%A7%A8%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%E1%84%8B%E1%85%AA%E1%84%8B%E1%85%B4%20%E1%84%8C%E1%85%A9%E1%84%8B%E1%85%AE/travis/travis%20login%20Not%20Found.md\">travis login Not Found 오류 정리</a> 이곳에 정리해 뒀으니, github token으로 로그인 해주자.</p>\n<br/>\n<h3>endpoint 설정</h3>\n<p>우리는 pro로 설정했으니 endpoint를 잡아주자. endpoint를 잡아주지 않으면, 암호화를 진행할 때, <code class=\"language-text\">not logged in -try running travis login --org</code> 오류가 뜰 수 있다. <a href=\"https://github.com/travis-ci/travis-ci/issues/9668\">github issues</a> 이곳을 참고 했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ travis endpoint --pro</code></pre></div>\n<br/>\n<h3>.env 파일 암호화</h3>\n<p>이제 암호화를 진행하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ travis encrypt-file --pro [파일명]</code></pre></div>\n<p>—pro를 붙여주자. 붙여주지 않으면,</p>\n<p><img src=\"https://user-images.githubusercontent.com/59427983/113652592-04ed7680-96cf-11eb-9b43-f67b49341adc.png\" alt=\"스크린샷 2021-04-06 오전 11 55 25\"></p>\n<p>push후 build 때, <code class=\"language-text\">iv undefined</code> 오류가 계속 뜰 것임.</p>\n<p>그리고 —add 옵션을 붙여주면 .travis.yml 파일에 자동으로 <code class=\"language-text\">before_install</code> 란이 생기도록 할 수 있다. build 때 install 전에 암호화한 파일을 복호화 해서 travis가 알아먹을 수 있도록 해주는 작업이다. 따라서 최종적으로는</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ travis encrypt-file --pro .env.production --add</code></pre></div>\n<p>요렇게 해줬다. 그러면 <code class=\"language-text\">DANGER ZONE: Override existing .env.production.enc? |no|</code> 이런 문구가 뜰 것인데, yes 를 입력해주자. 그러면 .env 파일 밑에 .evn.enc 라는 파일이 생겼다. 암호화된 .env 파일이다.</p>\n<p>📌 .env 파일은 반드시 gitignore 처리. .env.enc 파일은 ignore 하면 안된다.</p>\n<br/>\n<h3>빌드 test</h3>\n<p>이제 암호화 된 파일이 생겼으니, 얘를 push 해서 build 해주자. 우선 travis 서버 상 build가 성공했으면 반은 성공한거임.</p>\n<br/>\n<br/>\n<h2>s3에 호스팅 되어있는 버킷에 빌드 파일 올리기</h2>\n<p>traivs 상에서 내 파일이 build 까지 완료되었다면, 이제 호스팅 되고 있는 public s3 버킷에 내 빌드 파일을 올려서 master 브랜치에 수정한 소스가 git push 될 때마다 자동으로 배포되도록 설정해보자. 단, 기존에 s3 조건이 설정되어 있어야 함. 아래와 같음.</p>\n<ul>\n<li>s3 버킷은 public 접근 가능함.</li>\n<li>버킷 정책 JSON이 설정되어 있을 것.</li>\n</ul>\n<br/>\n<h3>AWS IAM key 받기</h3>\n<p><a href=\"https://console.aws.amazon.com/iam/home?region=ap-northeast-2#/home\">IAM</a>에 사용자 탭 -> 사용자 추가 -> 이름 설정 -> AWS 액세스 유형은 <em>프로그래밍 방식 엑세스</em> 체크 -> 기존 정책 직접 연결 -> 정책 필터에 <em>s3full</em> 검색 후 AmazonS3FullAccess 체크. -> cloudfront 검색 후 CloudFrontFullAccess 체크 -> 태그 등록 -> 권한 최종 확인 후 생성이 완료 되면 엑세스 키와 비밀 엑세스 키가 생성된다.</p>\n<p>즉, IAM 에서는 <code class=\"language-text\">AmazonS3FullAccess</code>, <code class=\"language-text\">CloudFrontFullAccess</code> 두가지 권한이 필요한 것이다.</p>\n<br/>\n<h3>Travis CI에 키 등록</h3>\n<p>aws s3에 접근할 수 있는 엑세스키와 비밀키는 절대절대절대절대 github 에 올라가서는 안된다. 따라서 travis 상에 키를 등록해놓고 .traivs.yml에서 불러다 쓰는 형태로 진행해야한다. travis.com에 가서, Settings 화면에 가자. 해당 프로젝트 우측에 Settings 를 눌러서 key를 등록할 수 있다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/59427983/113663278-b6e36d80-96e4-11eb-9379-723b135ce55a.png\" alt=\"스크린샷 2021-04-06 오후 2 29 49\"></p>\n<ul>\n<li>name  : AWS<em>ACCESS</em>KEY, AWS<em>SECRET</em>KEY 두개</li>\n<li>value : IAM에서 받은 엑세스키와 시크릿키</li>\n</ul>\n<p>이렇게 각각 등록해두면 된다. 그럼 이걸 .travis.yml 파일에서 변수로 가져올 수 있는 형태가 되는 것임.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span> s3\n  <span class=\"token key atrule\">access_key_id</span><span class=\"token punctuation\">:</span> $AWS_ACCESS_KEY   <span class=\"token comment\"># 여기</span>\n  <span class=\"token key atrule\">secret_access_key</span><span class=\"token punctuation\">:</span> $AWS_SECRET_KEY  <span class=\"token comment\"># 여기</span>\n  <span class=\"token key atrule\">bucket</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>버킷명<span class=\"token punctuation\">]</span>\n  <span class=\"token key atrule\">skip_cleanup</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">acl</span><span class=\"token punctuation\">:</span> public_read\n  <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">2</span>\n  <span class=\"token key atrule\">wait-until-deploy</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">local_dir</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>vue라면 dist<span class=\"token punctuation\">,</span> react라면 build<span class=\"token punctuation\">]</span></code></pre></div>\n<p>이런식으로. yml에 적어둔 것을 알아보자.</p>\n<ul>\n<li>provider : 배포 대상</li>\n<li>bucket : 내가 미리 생성해둔 public 접근 가능한 버킷.</li>\n<li>skip_cleanup : 공식 홈피에 따르면 빌드 중 이루어진 모든 변경 사항을 삭제하지 않게 함.</li>\n<li>acl : public 버킷이라 하더라도, 버킷에 올릴 때마다 파일을 일일이 public 객체로 바꿔주어야 하는데 이 옵션을 주면 자동으로 해줌. 하지만 aws cloudFront 설정을 따로 해줘야 한다. 자세한건 밑에 있다. 이렇게 적어주자.</li>\n<li>region : 버킷의 region</li>\n<li>wait-until-deploy : 배포 시, 기다려줌</li>\n<li>local_dir : build 후 어떤 특정 폴더를 배포할 지 설정. 나는 vue build 시 dist 폴더 안에 파일이 생성되므로 dist를 적어줬다.</li>\n</ul>\n<p>여기까지 해보고 git push해서 성공하나 확인해보는게 좋다. 만약 성공하면 S3 버킷에 새 파일이 올라온 것을 확인할 수 있다. 이제 AWS CloudFront 를 통해 CDN 되어있는 페이지를 무효화 시키고 새 캐싱을 진행할 것임.</p>\n<br/>\n<br/>\n<h2>CloudFront 배포 설정</h2>\n<p>위에서 설정한 S3를 오리진으로 CloudFront 배포를 설정해줄 것이다. <a href=\"https://docs.aws.amazon.com/ko_kr/AmazonCloudFront/latest/DeveloperGuide/private-content-restricting-access-to-s3.html#private-content-creating-oai\">aws 원본 액세스 ID를 배포에 추가</a> 여길 보고 따라하면 된다. OAI를 설정해주었다.</p>\n<hr>\n<p><strong>📌 CloudFront 콘솔을 사용하여 CloudFront OAI를 생성하려면</strong></p>\n<ol>\n<li>AWS Management Console에 로그인하여 <a href=\"https://console.aws.amazon.com/cloudfront/%EC%97%90%EC%84%9C\">https://console.aws.amazon.com/cloudfront/에서</a> CloudFront 콘솔을 엽니다.</li>\n<li>S3 오리진이 있는 배포의 ID를 선택합니다.</li>\n<li><strong>Origins and Origin Groups(오리진 및 오리진 그룹)</strong> 탭을 선택합니다.</li>\n<li>오리진 옆의 확인란을 선택한 다음 <strong>Edit(편집)</strong>을 선택합니다.</li>\n<li><strong>Restrict Bucket Access(버킷 액세스 제한)</strong>에서 <strong>예</strong>를 선택합니다.</li>\n<li>사용할 OAI가 이미 있는 경우 <strong>Use an Existing Identity(기존 자격 증명 사용)</strong>를 선택합니다. 그런 다음 <strong>Your Identities(사용자 자격 증명)</strong> 목록에서 OAI를 선택합니다.</li>\n<li>CloudFront가 <strong>오리진 도메인 이름(Origin Domain Name)</strong>에 지정된 Amazon S3 버킷의 파일에 대한 읽기 권한을 자동으로 OAI에 부여하도록 하려면 <strong>예, 버킷 정책을 업데이트합니다.(Yes, Update Bucket Policy)</strong>를 선택합니다.</li>\n<li><strong>예, 편집합니다</strong>를 선택합니다.</li>\n</ol>\n<p>OAI를 생성했다면, Amazon S3 버킷 정책 사용 해주면 되는데 나는 기존에 해두었으므로 패스. 위의 url에 자세하게 나와있다. 따라하면 됨.</p>\n<hr>\n<p>이제, .travis.yml 파일을 수정해주자.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">(<span class=\"token punctuation\">...</span>)\n<span class=\"token key atrule\">before_deploy</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> npm install <span class=\"token punctuation\">-</span>g travis<span class=\"token punctuation\">-</span>ci<span class=\"token punctuation\">-</span>cloudfront<span class=\"token punctuation\">-</span>invalidation\n\n<span class=\"token key atrule\">after_deploy</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> aws configure set preview.cloudfront true\n  <span class=\"token punctuation\">-</span> travis<span class=\"token punctuation\">-</span>ci<span class=\"token punctuation\">-</span>cloudfront<span class=\"token punctuation\">-</span>invalidation <span class=\"token punctuation\">-</span>a $AWS_ACCESS_KEY <span class=\"token punctuation\">-</span>s $AWS_SECRET_KEY <span class=\"token punctuation\">-</span>c $AWS_CLOUDFRONT_DIST_ID <span class=\"token punctuation\">-</span>i '/<span class=\"token important\">*'</span> <span class=\"token punctuation\">-</span>b $TRAVIS_BRANCH <span class=\"token punctuation\">-</span>p $TRAVIS_PULL_REQUEST <span class=\"token punctuation\">-</span>o 'master'</code></pre></div>\n<p>이렇게 설정해주었다. S3에 매번 올린 후 cloudfront에서 매번 다시 캐싱 해줄 필요없이 위 명령어로 travis가 알아서 해준다. 여기서 <code class=\"language-text\">travis-ci-cloudfront-invalidation</code> 라는 패키지를 travis 상에 설치 후, 제일 아래에 있는 명령어로 진행하는 것이다. </p>\n<p>$AWS<em>ACCESS</em>KEY, $AWS<em>SECRET</em>KEY는 기존 travis에 설정된 대로 들어갈 것이고, <code class=\"language-text\">$AWS_CLOUDFRONT_DIST_ID</code> 는 travis의 환경변수 설정에서 직접 입력해주자. aws의 cloudfront 페이지에 가장 먼저 id가 나와있다. 나머지는 필요없다. 다만 위의 yml에 적여 있어야한다.</p>\n<p>이제 git push 해주면, </p>\n<p><img src=\"https://user-images.githubusercontent.com/59427983/113683817-94128280-96ff-11eb-9a7c-e45173c60c60.png\" alt=\"스크린샷 2021-04-06 오후 5 41 15\"></p>\n<p>요런식으로 도는걸 볼 수 있다. 완료!!</p>\n<p>.travis.yml 완성본</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">language</span><span class=\"token punctuation\">:</span> node_js\n\n<span class=\"token comment\"># nodeJS 버전</span>\n<span class=\"token key atrule\">node_js</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> 14.16.0\n\n<span class=\"token comment\"># Git Commit 수신 허용 목록 master 브랜치만.</span>\n<span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">only</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> master\n\n<span class=\"token comment\"># Travis CI 에서 node_modules를 캐싱한다.</span>\n<span class=\"token comment\"># 빌드 프로세스 속도를 높여줌.</span>\n<span class=\"token key atrule\">cache</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">directories</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> node_modules\n\n<span class=\"token comment\"># Travis 서버에서 빌드 명령어</span>\n<span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span> npm run build\n\n<span class=\"token comment\"># .env.production 파일 인코딩했던 것을 디코딩해서 만들어줌.</span>\n<span class=\"token key atrule\">before_install</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> openssl aes<span class=\"token punctuation\">-</span>256<span class=\"token punctuation\">-</span>cbc <span class=\"token punctuation\">-</span>K <span class=\"token punctuation\">[</span>$encrypted_key<span class=\"token punctuation\">...</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">-</span>iv <span class=\"token punctuation\">[</span>$encrypted_iv<span class=\"token punctuation\">...</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">-</span>in .env.production.enc <span class=\"token punctuation\">-</span>out .env.production <span class=\"token punctuation\">-</span>d\n\n<span class=\"token comment\"># AWS CloudFront 캐싱을 위해 설치.</span>\n<span class=\"token key atrule\">before_deploy</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> npm install <span class=\"token punctuation\">-</span>g travis<span class=\"token punctuation\">-</span>ci<span class=\"token punctuation\">-</span>cloudfront<span class=\"token punctuation\">-</span>invalidation\n\n<span class=\"token comment\"># build후 배포 대상</span>\n<span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span> s3\n  <span class=\"token key atrule\">access_key_id</span><span class=\"token punctuation\">:</span> $AWS_ACCESS_KEY\n  <span class=\"token key atrule\">secret_access_key</span><span class=\"token punctuation\">:</span> $AWS_SECRET_KEY\n  <span class=\"token key atrule\">bucket</span><span class=\"token punctuation\">:</span> tripllo.tech\n  <span class=\"token key atrule\">skip_cleanup</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">acl</span><span class=\"token punctuation\">:</span> public_read\n  <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">2</span>\n  <span class=\"token key atrule\">wait-until-deploy</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">local_dir</span><span class=\"token punctuation\">:</span> dist\n\n<span class=\"token comment\"># 배포 완료 후 AWS CloudFront의 캐시를 무효화.</span>\n<span class=\"token key atrule\">after_deploy</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> aws configure set preview.cloudfront true\n  <span class=\"token punctuation\">-</span> travis<span class=\"token punctuation\">-</span>ci<span class=\"token punctuation\">-</span>cloudfront<span class=\"token punctuation\">-</span>invalidation <span class=\"token punctuation\">-</span>a $AWS_ACCESS_KEY <span class=\"token punctuation\">-</span>s $AWS_SECRET_KEY <span class=\"token punctuation\">-</span>c $AWS_CLOUDFRONT_DIST_ID <span class=\"token punctuation\">-</span>i '/<span class=\"token important\">*'</span> <span class=\"token punctuation\">-</span>b $TRAVIS_BRANCH <span class=\"token punctuation\">-</span>p $TRAVIS_PULL_REQUEST <span class=\"token punctuation\">-</span>o 'master'\n\n<span class=\"token comment\"># 빌드 후 알림</span>\n<span class=\"token key atrule\">notifications</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">email</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">recipients</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> pozafly@kakao.com</code></pre></div>\n<p>아쉬운 점은 npm모듈을 사용하지 않고 CloudFront 설정을 할 수 있을텐데 하지 못했다. <a href=\"https://medium.com/lunit/travis-ci%EB%A1%9C-aws-s3%EC%97%90-spa-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0-c081e25335b5\">여기1</a>, <a href=\"https://renzolucioni.com/s3-deployment-with-travis/\">여기2</a>, <a href=\"https://github.com/CircleCI-Public/aws-cli-orb/issues/24\">여기3</a> 를 보면서 연구했는데 잘 안됐다…</p>\n<br/>\n<blockquote>\n<p>프로젝트 구경하기 -> <a href=\"https://tripllo.tech\">Tripllo_메인</a>, <a href=\"https://github.com/pozafly/tripllo_vue\">Vue_Github</a>, <a href=\"https://github.com/pozafly/tripllo_springBoot\">SpringBoot_Github</a></p>\n</blockquote>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"Travis"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Travis CI에 대해서 알아보자. 우선 "},{"type":"element","tagName":"a","properties":{"href":"https://docs.travis-ci.com/"},"children":[{"type":"text","value":"Travis 공식"}]},{"type":"text","value":" Docs를 보고 따라해봤다. 참고 자료는 이동욱님의 스프링 부트와 AWS로 혼자 구현하는 웹 서비스 책을 참고했다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"우선 travis endpoint에 대해 알아야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"travis 엔드 포인트 —pro\nAPI 엔드 포인트 : "},{"type":"element","tagName":"a","properties":{"href":"https://api.travis-ci.com/"},"children":[{"type":"text","value":"https://api.travis-ci.com/"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"travis 엔드 포인트\nAPI 엔드 포인트 : "},{"type":"element","tagName":"a","properties":{"href":"https://api.travis-ci.org/"},"children":[{"type":"text","value":"https://api.travis-ci.org/"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"endpoint를 잘 설정해주어야지 오류가 나지 않는다. springboot를 travis로 빌드 자동화를 했을 때도 겪었었지만, .org 엔드포인트는 오류가 많고 잘 되지 않는 경우가 많다. 버전 차이인듯 싶다. 어쨌든 우리는 .com인 —pro를 붙여 엔드포인트를 설정해줄 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Github repository 연동"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://travis-ci.com/"},"children":[{"type":"text","value":"https://travis-ci.com/"}]},{"type":"text","value":" 이곳에 먼저 들어가서 github ID로 로그인을 해주자. 우측 상단에 내 아이콘을 선택하고 Setting -> Repositories에 가면 무슨 프로젝트를 설정할 것인지 페이지가 나온다. 여기서 어떤 프로젝트를 CI 할 것인지 설정해줄 수 있다. Manage repositories on GitHub 을 클릭하고, github 페이지에 들어가면, "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/59427983/113650888-f3ef3600-96cb-11eb-83a3-fe7d8b9849ad.png","alt":"스크린샷 2021-04-06 오전 11 33 19"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이곳에서 자신의 프로젝트를 선택해서 연동시킬 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":".travis.yml"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"후에, 자신의 프로젝트에 .travis.yml 파일을 만들자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"language"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" node_js\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"node_js"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" 14.16.0\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"branches"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"only"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" master\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"cache"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"directories"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" node_modules\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"script"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" npm run build\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"notifications"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"email"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"recipients"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" pozafly@kakao.com"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"language : vue 프로젝트를 설정할 것이므로, language는 node_js 형태로 빌드한다. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"node_js : 버전은 자신이 설정한 것 대로 해주면 됨"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"branches : master 브랜치에 push 되었을 때 자동으로 돌아가게 해줌."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"cache : 빌드시, node_modules가 계속 install 될 필요는 없으므로 해당 폴더를 캐시화 시켜주겠다는 말이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"script : 빌드 명령어"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"notifications : CI가 완료되었을 때 결과를 noti 해준다. 내 메일 주소를 적었다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"우선 기본 틀이다. 이제 이 파일을 작성했다면, master 브랜치에 push or merge 할 때마다 travis가 알아서 프로젝트를 빌드해줄 것이다. push후 travis 페이지에 가보면 build log가 실시간으로 찍힌다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"첫번째 에러가 났다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"error  \nTemplate execution failed: ReferenceError: VUE_APP_GOOGLE_CLIENT_ID is not defined"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"VUE"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"APP"}]},{"type":"text","value":"GOOGLE"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"CLINET"}]},{"type":"text","value":"ID 는 .env 파일에 있는데, 이걸 build 하지 못하는 이유는 .env 파일이 github에 올라가지 않아서다. 따라서 .env 파일을 travis 서버에서 인식하도록 할 필요가 있다. 방법은 3가지가 있다. "},{"type":"element","tagName":"a","properties":{"href":"https://docs.travis-ci.com/user/environment-variables/"},"children":[{"type":"text","value":"공식 페이지 환경변수"}]},{"type":"text","value":" 이곳에 잘 설명되어 있는데, 나는 두번째 방법인 .travis.yml에서 secret 파일 암호화하는 방법을 사용하겠다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":".evn 파일을 AES256 이용하여 .enc 파일 생성하기"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"CLC 설치 & login"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://sanghye.tistory.com/42"},"children":[{"type":"text","value":"여기"}]},{"type":"text","value":" 참고하였다. 먼저 로컬 컴퓨터에서 암호화 해 .enc 파일을 생성할 것이기 때문에 travis CLC가 필요하다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sh"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sh"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sh"]},"children":[{"type":"text","value":"$ gem install travis"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"만약 권한 오류가 난다면 sudo를 붙여주도록 하자. 이제 travis에 login을 해야 함."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"$ travis login --pro"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"—com, —org 옵션을 줄 수 있는데, pro를 붙여주자. 아니면 빌드시 오류 발생. org를 사용하고 있다면 org를 써도 된다. login을 할 때 Not Found 에러가 날 수 있다. "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/pozafly/TIL/blob/main/%F0%9F%A7%A8%E1%84%8B%E1%85%A9%E1%84%85%E1%85%B2%E1%84%8B%E1%85%AA%E1%84%8B%E1%85%B4%20%E1%84%8C%E1%85%A9%E1%84%8B%E1%85%AE/travis/travis%20login%20Not%20Found.md"},"children":[{"type":"text","value":"travis login Not Found 오류 정리"}]},{"type":"text","value":" 이곳에 정리해 뒀으니, github token으로 로그인 해주자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"endpoint 설정"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"우리는 pro로 설정했으니 endpoint를 잡아주자. endpoint를 잡아주지 않으면, 암호화를 진행할 때, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"not logged in -try running travis login --org"}]},{"type":"text","value":" 오류가 뜰 수 있다. "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/travis-ci/travis-ci/issues/9668"},"children":[{"type":"text","value":"github issues"}]},{"type":"text","value":" 이곳을 참고 했다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ travis endpoint --pro"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":".env 파일 암호화"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이제 암호화를 진행하자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sh"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sh"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sh"]},"children":[{"type":"text","value":"$ travis encrypt-file --pro [파일명]"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"—pro를 붙여주자. 붙여주지 않으면,"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/59427983/113652592-04ed7680-96cf-11eb-9b43-f67b49341adc.png","alt":"스크린샷 2021-04-06 오전 11 55 25"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"push후 build 때, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"iv undefined"}]},{"type":"text","value":" 오류가 계속 뜰 것임."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그리고 —add 옵션을 붙여주면 .travis.yml 파일에 자동으로 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"before_install"}]},{"type":"text","value":" 란이 생기도록 할 수 있다. build 때 install 전에 암호화한 파일을 복호화 해서 travis가 알아먹을 수 있도록 해주는 작업이다. 따라서 최종적으로는"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ travis encrypt-file --pro .env.production --add"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"요렇게 해줬다. 그러면 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"DANGER ZONE: Override existing .env.production.enc? |no|"}]},{"type":"text","value":" 이런 문구가 뜰 것인데, yes 를 입력해주자. 그러면 .env 파일 밑에 .evn.enc 라는 파일이 생겼다. 암호화된 .env 파일이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"📌 .env 파일은 반드시 gitignore 처리. .env.enc 파일은 ignore 하면 안된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"빌드 test"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이제 암호화 된 파일이 생겼으니, 얘를 push 해서 build 해주자. 우선 travis 서버 상 build가 성공했으면 반은 성공한거임."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"s3에 호스팅 되어있는 버킷에 빌드 파일 올리기"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"traivs 상에서 내 파일이 build 까지 완료되었다면, 이제 호스팅 되고 있는 public s3 버킷에 내 빌드 파일을 올려서 master 브랜치에 수정한 소스가 git push 될 때마다 자동으로 배포되도록 설정해보자. 단, 기존에 s3 조건이 설정되어 있어야 함. 아래와 같음."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"s3 버킷은 public 접근 가능함."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"버킷 정책 JSON이 설정되어 있을 것."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"AWS IAM key 받기"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://console.aws.amazon.com/iam/home?region=ap-northeast-2#/home"},"children":[{"type":"text","value":"IAM"}]},{"type":"text","value":"에 사용자 탭 -> 사용자 추가 -> 이름 설정 -> AWS 액세스 유형은 "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"프로그래밍 방식 엑세스"}]},{"type":"text","value":" 체크 -> 기존 정책 직접 연결 -> 정책 필터에 "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"s3full"}]},{"type":"text","value":" 검색 후 AmazonS3FullAccess 체크. -> cloudfront 검색 후 CloudFrontFullAccess 체크 -> 태그 등록 -> 권한 최종 확인 후 생성이 완료 되면 엑세스 키와 비밀 엑세스 키가 생성된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"즉, IAM 에서는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"AmazonS3FullAccess"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"CloudFrontFullAccess"}]},{"type":"text","value":" 두가지 권한이 필요한 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Travis CI에 키 등록"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"aws s3에 접근할 수 있는 엑세스키와 비밀키는 절대절대절대절대 github 에 올라가서는 안된다. 따라서 travis 상에 키를 등록해놓고 .traivs.yml에서 불러다 쓰는 형태로 진행해야한다. travis.com에 가서, Settings 화면에 가자. 해당 프로젝트 우측에 Settings 를 눌러서 key를 등록할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/59427983/113663278-b6e36d80-96e4-11eb-9379-723b135ce55a.png","alt":"스크린샷 2021-04-06 오후 2 29 49"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"name  : AWS"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"ACCESS"}]},{"type":"text","value":"KEY, AWS"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"SECRET"}]},{"type":"text","value":"KEY 두개"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"value : IAM에서 받은 엑세스키와 시크릿키"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이렇게 각각 등록해두면 된다. 그럼 이걸 .travis.yml 파일에서 변수로 가져올 수 있는 형태가 되는 것임."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"deploy"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"provider"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" s3\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"access_key_id"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" $AWS_ACCESS_KEY   "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# 여기"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"secret_access_key"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" $AWS_SECRET_KEY  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# 여기"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"bucket"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"버킷명"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"skip_cleanup"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean","important"]},"children":[{"type":"text","value":"true"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"acl"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" public_read\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"region"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" ap"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"northeast"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"wait-until-deploy"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean","important"]},"children":[{"type":"text","value":"true"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"local_dir"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"vue라면 dist"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" react라면 build"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이런식으로. yml에 적어둔 것을 알아보자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"provider : 배포 대상"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"bucket : 내가 미리 생성해둔 public 접근 가능한 버킷."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"skip_cleanup : 공식 홈피에 따르면 빌드 중 이루어진 모든 변경 사항을 삭제하지 않게 함."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"acl : public 버킷이라 하더라도, 버킷에 올릴 때마다 파일을 일일이 public 객체로 바꿔주어야 하는데 이 옵션을 주면 자동으로 해줌. 하지만 aws cloudFront 설정을 따로 해줘야 한다. 자세한건 밑에 있다. 이렇게 적어주자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"region : 버킷의 region"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"wait-until-deploy : 배포 시, 기다려줌"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"local_dir : build 후 어떤 특정 폴더를 배포할 지 설정. 나는 vue build 시 dist 폴더 안에 파일이 생성되므로 dist를 적어줬다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"여기까지 해보고 git push해서 성공하나 확인해보는게 좋다. 만약 성공하면 S3 버킷에 새 파일이 올라온 것을 확인할 수 있다. 이제 AWS CloudFront 를 통해 CDN 되어있는 페이지를 무효화 시키고 새 캐싱을 진행할 것임."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"CloudFront 배포 설정"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위에서 설정한 S3를 오리진으로 CloudFront 배포를 설정해줄 것이다. "},{"type":"element","tagName":"a","properties":{"href":"https://docs.aws.amazon.com/ko_kr/AmazonCloudFront/latest/DeveloperGuide/private-content-restricting-access-to-s3.html#private-content-creating-oai"},"children":[{"type":"text","value":"aws 원본 액세스 ID를 배포에 추가"}]},{"type":"text","value":" 여길 보고 따라하면 된다. OAI를 설정해주었다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"📌 CloudFront 콘솔을 사용하여 CloudFront OAI를 생성하려면"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"AWS Management Console에 로그인하여 "},{"type":"element","tagName":"a","properties":{"href":"https://console.aws.amazon.com/cloudfront/%EC%97%90%EC%84%9C"},"children":[{"type":"text","value":"https://console.aws.amazon.com/cloudfront/에서"}]},{"type":"text","value":" CloudFront 콘솔을 엽니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"S3 오리진이 있는 배포의 ID를 선택합니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Origins and Origin Groups(오리진 및 오리진 그룹)"}]},{"type":"text","value":" 탭을 선택합니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"오리진 옆의 확인란을 선택한 다음 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Edit(편집)"}]},{"type":"text","value":"을 선택합니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Restrict Bucket Access(버킷 액세스 제한)"}]},{"type":"text","value":"에서 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"예"}]},{"type":"text","value":"를 선택합니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"사용할 OAI가 이미 있는 경우 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Use an Existing Identity(기존 자격 증명 사용)"}]},{"type":"text","value":"를 선택합니다. 그런 다음 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Your Identities(사용자 자격 증명)"}]},{"type":"text","value":" 목록에서 OAI를 선택합니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"CloudFront가 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"오리진 도메인 이름(Origin Domain Name)"}]},{"type":"text","value":"에 지정된 Amazon S3 버킷의 파일에 대한 읽기 권한을 자동으로 OAI에 부여하도록 하려면 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"예, 버킷 정책을 업데이트합니다.(Yes, Update Bucket Policy)"}]},{"type":"text","value":"를 선택합니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"예, 편집합니다"}]},{"type":"text","value":"를 선택합니다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"OAI를 생성했다면, Amazon S3 버킷 정책 사용 해주면 되는데 나는 기존에 해두었으므로 패스. 위의 url에 자세하게 나와있다. 따라하면 됨."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이제, .travis.yml 파일을 수정해주자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"text","value":"("},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"..."}]},{"type":"text","value":")\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"before_deploy"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" npm install "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"g travis"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"ci"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"cloudfront"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"invalidation\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"after_deploy"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" aws configure set preview.cloudfront true\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" travis"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"ci"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"cloudfront"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"invalidation "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"a $AWS_ACCESS_KEY "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"s $AWS_SECRET_KEY "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"c $AWS_CLOUDFRONT_DIST_ID "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"i '/"},{"type":"element","tagName":"span","properties":{"className":["token","important"]},"children":[{"type":"text","value":"*'"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"b $TRAVIS_BRANCH "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"p $TRAVIS_PULL_REQUEST "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"o 'master'"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이렇게 설정해주었다. S3에 매번 올린 후 cloudfront에서 매번 다시 캐싱 해줄 필요없이 위 명령어로 travis가 알아서 해준다. 여기서 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"travis-ci-cloudfront-invalidation"}]},{"type":"text","value":" 라는 패키지를 travis 상에 설치 후, 제일 아래에 있는 명령어로 진행하는 것이다. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"$AWS"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"ACCESS"}]},{"type":"text","value":"KEY, $AWS"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"SECRET"}]},{"type":"text","value":"KEY는 기존 travis에 설정된 대로 들어갈 것이고, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"$AWS_CLOUDFRONT_DIST_ID"}]},{"type":"text","value":" 는 travis의 환경변수 설정에서 직접 입력해주자. aws의 cloudfront 페이지에 가장 먼저 id가 나와있다. 나머지는 필요없다. 다만 위의 yml에 적여 있어야한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이제 git push 해주면, "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/59427983/113683817-94128280-96ff-11eb-9a7c-e45173c60c60.png","alt":"스크린샷 2021-04-06 오후 5 41 15"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"요런식으로 도는걸 볼 수 있다. 완료!!"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":".travis.yml 완성본"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"language"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" node_js\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# nodeJS 버전"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"node_js"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" 14.16.0\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Git Commit 수신 허용 목록 master 브랜치만."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"branches"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"only"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" master\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Travis CI 에서 node_modules를 캐싱한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# 빌드 프로세스 속도를 높여줌."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"cache"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"directories"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" node_modules\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Travis 서버에서 빌드 명령어"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"script"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" npm run build\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# .env.production 파일 인코딩했던 것을 디코딩해서 만들어줌."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"before_install"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" openssl aes"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"256"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"cbc "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"K "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"$encrypted_key"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"..."}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"iv "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"$encrypted_iv"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"..."}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"in .env.production.enc "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"out .env.production "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"d\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# AWS CloudFront 캐싱을 위해 설치."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"before_deploy"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" npm install "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"g travis"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"ci"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"cloudfront"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"invalidation\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# build후 배포 대상"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"deploy"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"provider"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" s3\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"access_key_id"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" $AWS_ACCESS_KEY\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"secret_access_key"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" $AWS_SECRET_KEY\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"bucket"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" tripllo.tech\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"skip_cleanup"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean","important"]},"children":[{"type":"text","value":"true"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"acl"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" public_read\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"region"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" ap"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"northeast"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"wait-until-deploy"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean","important"]},"children":[{"type":"text","value":"true"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"local_dir"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" dist\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# 배포 완료 후 AWS CloudFront의 캐시를 무효화."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"after_deploy"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" aws configure set preview.cloudfront true\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" travis"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"ci"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"cloudfront"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"invalidation "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"a $AWS_ACCESS_KEY "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"s $AWS_SECRET_KEY "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"c $AWS_CLOUDFRONT_DIST_ID "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"i '/"},{"type":"element","tagName":"span","properties":{"className":["token","important"]},"children":[{"type":"text","value":"*'"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"b $TRAVIS_BRANCH "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"p $TRAVIS_PULL_REQUEST "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"o 'master'\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# 빌드 후 알림"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"notifications"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"email"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"recipients"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" pozafly@kakao.com"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"아쉬운 점은 npm모듈을 사용하지 않고 CloudFront 설정을 할 수 있을텐데 하지 못했다. "},{"type":"element","tagName":"a","properties":{"href":"https://medium.com/lunit/travis-ci%EB%A1%9C-aws-s3%EC%97%90-spa-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0-c081e25335b5"},"children":[{"type":"text","value":"여기1"}]},{"type":"text","value":", "},{"type":"element","tagName":"a","properties":{"href":"https://renzolucioni.com/s3-deployment-with-travis/"},"children":[{"type":"text","value":"여기2"}]},{"type":"text","value":", "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/CircleCI-Public/aws-cli-orb/issues/24"},"children":[{"type":"text","value":"여기3"}]},{"type":"text","value":" 를 보면서 연구했는데 잘 안됐다…"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"프로젝트 구경하기 -> "},{"type":"element","tagName":"a","properties":{"href":"https://tripllo.tech"},"children":[{"type":"text","value":"Tripllo_메인"}]},{"type":"text","value":", "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/pozafly/tripllo_vue"},"children":[{"type":"text","value":"Vue_Github"}]},{"type":"text","value":", "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/pozafly/tripllo_springBoot"},"children":[{"type":"text","value":"SpringBoot_Github"}]}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"excerpt":"Travis Travis CI에 대해서 알아보자. 우선 Travis 공식 Docs를 보고 따라해봤다. 참고 자료는 이동욱님의 스프링 부트와 AWS로 혼자 구현하는 웹 서비스 책을 참고했다. 우선 travis endpoint…","timeToRead":8,"frontmatter":{"title":"Tripllo(9) Frontend -travis 배포 자동화","userDate":"6 April 2021","date":"2021-04-06T17:13:47.149Z","tags":["Tripllo 제작기"],"excerpt":"Vue프로젝트를 aws의 S3와 CloudFront에 Travis CI를 통해 배포 자동화를 해보자.","image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFyElEQVQ4yyVSe0yb1xU/ZWn7RyclU1i6piVRCgkhJDZg8/F9fgE2tjHw+f35hR/YxviFMRgbJyQlhFdfGSQhAkOeTVqpD22tOi3R1v6RTVnXZk0apVLVqlK1bFOUrVvU16pR43t2TY/00z36/c4595x7LgC1JMuCj2FBI2mpgL1NgCEDKCSMY07OXfm1irv3WxW3TlF8Q8ndPSrjflXf2Kz7TqsCqBLB/kamguaBvbkFNqyVY0CzvwU0DS0Vj+5oBhA1Vh6UsVeutcnxTrscP9S34UcGDd6m+IuuFW9T7h2qJVj2ItTXPgpbJVBXz1TU1jAgbmQAHqJF9u9hHoLHpQCbJZUzDPfJ52ol/lUrLy4r2GJmYqZ0fPE0ef7EKTL6zFRpiZUW/6lXrt9uU2Beyr0LsO9h2gVseYrWAAltsVIKuKiowD+q4Wg3e+UDnwz/lZWtXRtgSMElxYuxNnLy2BiZH0+RS9RfEprw/SRL7g3L1q57ZTjc2bJ8JyaDP0S4nwA0AByysZv00iZQK1nhvSyHN8e54hfHOHLW30xedojI1+P7sDCRwtXxfvzmUB0umUXk1QhD7k6x5NY4V/pdmsUqMctUVzdCn47ZBB1yOjfU/HzaLL11M8PgizbJ+oqnEQc6G8mlqBhvzkiwcGoBC/Nz5NZsEy6FxCTFN5EzfgmedkuLN4YZzHZKrgJseuSJajqyrIWRvTSo/OrehS5872x36c1VHu/fDpH5KRUuzIrw/JIUh9JeHBnx4IVlCXlh8gCeOaHB+x/3k7fP8XjjJVPpb+e78HRUcbdqr/RpECyqsU+vB/C/XyZ+uPqWCZcWTeS1lx3k3BKPywsGPHeax8KCFgsntOQC5VZOdpGLKybyxitOLCzy5Pe/seLag0Tx/au9qG6T2cBiawu//oobVxeT689O5snM5EEyPZHDhfkcHhkPY1/ajIG8DX1hI4mEjHjkSJjM/zJLJiezeOxYnsxO58n5Qqq0vGjHFjnbDjt2bqvxCPbvRqcmsOewh2hDFuw56kG7xYl9gQEcGslhKj2KQymKoSyJRZIYcvsw5vORaK8XTYK9lD44jmaL8CVdxmaA2s1VpqjrP4lDg6gwK0rtDg2aXHp0GU0YtPZgv92EXouxDBKmftxhJn7BRkJWHkd9DhI0G0gyGSfGiBN3Sva54ICOvdwW5jGXzq0HerpxpNeJYYsZm1Ud6DPzGPe6ME87OHjoMPXdG5xUWdaMmAt6MCqYSS6bI3J3N9ZIGgJQx6scTT0KzGVyJBEOluKCEWO0C5tOQ7w9esyM0FEjQUyFAziayaKf78SyFhNMJGanFwb7SsOjWRT1yL/eZ1RXQm2vvFUa6MSky0qyY3n6VkMkEenH1ECEZDKjmBpM4US/cwODycGNomWtHFOOHaM5vWYDiny6Yn03uxvqlXp5lfcFVHa7v+9Wq75NhnyYjEbIYCxKkkEfyXgtmOsTMOOzYdpjxmTQ+6NWjgn5iVqp+N9uPoW0xrdMzeM7oJbTyX4Rv4zbvCc/UTbWZ7I+K06G7cUjQRvOxlxkJu4hcSddBsVsopeUubJGY0pjfityTQ3PVcZffbC9f2VN/ORj26FV3mn19o9jlzOS++LP18HJGz5+dtCPzw8F1nI0QeNMkI70/Aa0jijJB6xU6/thLulDB991BxHB6B8+648cxgO7Rc1g0eeuRW1LyGsiWUP7AFTXM+I+S/c3cwkvTsXcax5b/7pbmCMuYZb02kLrM3H32izV3Hzn9ztqmyXurmmwaAdX48IZ1KsjF4HXpo4PCCvY0RpI2wxTsKvuSajaIxLbDR2f5QM2nI66cMzvxzzFTIz6lDPr1H9/ao+I3Vz1GBxP/QN6tEOFqLCKapUnCjKOZ/Xt4Q/qRKKt4qZmaFWoNlXXiemn/9lPFRx32Nml/VPYqv93yKr/SjB03JCz3Axs2bV1114xKOXtD7cpBXpa9uvaQx/WN0i2/x96YN9QBSm5wgAAAABJRU5ErkJggg==","aspectRatio":0.9935897435897436,"src":"/static/49f04b06d4009a791ea88d198934da29/41b97/travis.png","srcSet":"/static/49f04b06d4009a791ea88d198934da29/3a443/travis.png 930w,\n/static/49f04b06d4009a791ea88d198934da29/41b97/travis.png 1053w","sizes":"(max-width: 1053px) 100vw, 1053px"}}},"author":[{"id":"Pozafly","bio":"Frontend Developer","avatar":{"children":[{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACaElEQVQ4y42UX0hTcRTHz/ltFhv9mb2VWJFEyfShLIowKOifkzSUMl21VSbYn7ndu7v5ZD0XSG8+1IPQH3qKCkZUT0vYQ6wIhKEUQqskwgpjoe3e3+/0+13Llm3qOIzD4Xzu9/x+93wvhIGKRg8IHYRmJ6V6oGg1BFYcqNnx4BgbiimeLx4WEQng9ApcX4H10d/iYlFwCMw4o11wxV3ndVVvPAA34qiKC8NyQh3oHGZdUO59lqoavOuBykssF7EnWhC24g6qgXZ3i691mhq/0pL6up0Q62VFxGEOaSC1wfOlK1dVp0dTnB4RrXucdLPyM+yN/t/NFcLqVqJOqoTtnrihCSLLnDKtoEnLAh2boLnXURpWAzPaA/3ODWt2vJsc5kQkSPCkoJrXWadn+WG4H0PVVlw5wmg/9FcNJK5K0OJc0UQmN4iq+m41wk39X/ECZQfJU51toEM58ckUti4peaIRk+/9LLq3kly4MCs6NpLcB5+evzORV8KCZn7cTq5/yDcF8oZsKwrLmc8DXasV1pQt+wcWtnpuXFxeLS7KNiwBXwAaGhC57/RljL5l/8bEGP3IUaJPdMs2R4n3LPmoy4o4uVbGI2WWpkImMkxZjLp4GPl8GyaPrSljSDNKS6ob0uxiGLisREttWERZ4mcDu+3Hl0HM+DHdik8CmAngqI/d68L3J/BVB6a1giWH2Q2Rvj2CibVsn5cFt7CQ/K9lnRVs92Z2XMZBHNzGjKOYNAqWdFZZfTQ64WMPTPrxRRummvDhKcycxOHT+LYLx1vwaRBH9HmMYY8kLSnk4+Uguh0zxzbsfI4rfwF8a2BEn7K2TwAAAABJRU5ErkJggg==","aspectRatio":1,"src":"/static/8c061761f263c344f2c0416607c8adf1/bc8e0/pozafly.png","srcSet":"/static/8c061761f263c344f2c0416607c8adf1/22f7f/pozafly.png 40w,\n/static/8c061761f263c344f2c0416607c8adf1/587c9/pozafly.png 80w,\n/static/8c061761f263c344f2c0416607c8adf1/d966b/pozafly.png 120w,\n/static/8c061761f263c344f2c0416607c8adf1/bc8e0/pozafly.png 800w,\n/static/8c061761f263c344f2c0416607c8adf1/d4b30/pozafly.png 1242w","sizes":"(max-width: 800px) 100vw, 800px"}}]}}]}},"relatedPosts":{"totalCount":12,"edges":[{"node":{"id":"6e517966-a9f1-5cca-8493-fa3df3acac13","timeToRead":4,"excerpt":"Let’s Encrypt 갱신 자동화 서비스 환경은 AWS의 EC2(Amazon linux2) + Nginx 조합으로 되어있습니다. *amazon linux2는 apt-get 패키지 관련 명령어 대신 yum 패키지 명령어를 사용합니다. Let’s…","frontmatter":{"title":"Tripllo(11) Let's Encrypt 갱신 자동화","date":"2021-04-12T10:13:47.149Z"},"fields":{"slug":"/tripllo/(11)Let's-Encrypt- automation/"}}},{"node":{"id":"8a82ef32-4da3-528d-ac78-aba0c604c33c","timeToRead":7,"excerpt":"Sentry Sentry는 Application Error Monitoring…","frontmatter":{"title":"Tripllo(10) Sentry 에러 로깅 시스템 도입","date":"2021-04-09T17:13:47.149Z"},"fields":{"slug":"/tripllo/(10)Sentry-error-system/"}}},{"node":{"id":"cc3a511d-6757-5556-89c6-e7518a4d2f27","timeToRead":8,"excerpt":"Travis Travis CI에 대해서 알아보자. 우선 Travis 공식 Docs를 보고 따라해봤다. 참고 자료는 이동욱님의 스프링 부트와 AWS로 혼자 구현하는 웹 서비스 책을 참고했다. 우선 travis endpoint…","frontmatter":{"title":"Tripllo(9) Frontend -travis 배포 자동화","date":"2021-04-06T17:13:47.149Z"},"fields":{"slug":"/tripllo/(9)travis-auto-deploy/"}}},{"node":{"id":"f339be44-8057-5b67-8921-5f98ca7a8efa","timeToRead":15,"excerpt":"멘토링 후 vue에 대해 보완해야 할 점을 듣고 정리한 내용을 정리해보자. 1. package.json 정리(안쓰는 라이브러리 제거, 개발용 배포용 라이브러리 구분) 기존 package.json 파일을 보자. 걸리는 것은 이…","frontmatter":{"title":"Tripllo(8) vue 보완","date":"2021-04-03T19:13:47.149Z"},"fields":{"slug":"/tripllo/(8)vue-supplement/"}}},{"node":{"id":"20bb999c-f353-57b9-85c1-7d2b22626ab0","timeToRead":4,"excerpt":"프로젝트를 마무리했다. 두 달 반 조금 안 되게 시간이 걸린 듯 하다. 프로젝트를 진행하면서 느꼈던 점을 조금 적어보려고 한다. 1. 서론 한창 실력에 자신이 없고 나를 검증할 만한 수단이 없다고 생각하던 차 Toy…","frontmatter":{"title":"Tripllo 후기","date":"2021-02-19"},"fields":{"slug":"/tripllo/후기/"}}}]}},"pageContext":{"slug":"/tripllo/(9)travis-auto-deploy/","prev":{"excerpt":"멘토링 후 vue에 대해 보완해야 할 점을 듣고 정리한 내용을 정리해보자. 1. package.json 정리(안쓰는 라이브러리 제거, 개발용 배포용 라이브러리 구분) 기존 package.json 파일을 보자. 걸리는 것은 이…","timeToRead":15,"frontmatter":{"title":"Tripllo(8) vue 보완","tags":["Tripllo 제작기"],"date":"2021-04-03T19:13:47.149Z","draft":false,"excerpt":"멘토링 후, 조언을 주신대로 Vue쪽 보완을 한 내용을 정리해보자.","image":{"childImageSharp":{"fluid":{"aspectRatio":1.473851030110935,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACWklEQVQ4y42Ry08TURjFZ+F/4ANoKLQIbSmP6QNB+6I0VqMbF5rowq0b1+xVdOfCv8PHRo1S3WixqIkvJBETo0ZwoTz6ms577szx3ktbBmqMX/Kbb+7Nd86cuVcIDA1i8PAA/L5+9Ho86Orphp+uB/x++CkeTw9C4VEkkylEIxGIooh4PI5AKAhffx+d88Hr7cXBA/vR3XUIQnQygdR0DsnMDFIzeeQyKUxNTGDyaAIJajJFeyQSg0iJRuMcUYxQ8xiOnDyBZDaHTC7PSaSzENJXH2P6WoEyj+xcAekrj3Ds1AXkj+eRpAPjYgzB0AhCw6PNPoax8QmMpU4jfb1ANU+a+gIy1ENYq1pYrZhtftYdnD1/Ed4+HwLBMIYCw7wzswB9D4+IOHf5Fi7N3sT3dQlrNbJLL2iqih0U6JqKpaVlPC+WUFp81aa4sIiF0kvOs+ILvH33AbpL1/IQGrIKNxLFJA4cAMQGNN2CYRI4FoFNCFpl2w6f3avvNGwwFMiKinKliq1yFb82a3j9ZRNvvm5iebWG9z9q2Kg0+EyHoWGYcGPRJIRFo6VrGssCyXBwd1nCw5UG7n+ScOdjHet1HcSyoO/RC9hTdUnmQ61yHP7E/5bgUEULVr/Xy/SXZb4mhLRhyRlmE8u26RnbzY/ueAjuDVaabvCEpskuYzdsj1+IoUOuVdtm7j/oMJQVjSaw+JrdpBtib888+Kxidr6CDXk7oe3Sdxiqqs5TMlPT3IEltOgeMz1zW8K+GxXcW9G5xrL/Ytjqiqrxs7H/kfDpNwNzRQVbyu4zZPUH/qqgq000PmwAAAAASUVORK5CYII=","sizes":"(max-width: 968px) 100vw, 968px","src":"/static/5bd75f341597ae6f4ba8adb416cce5a8/edaaa/tripllo8.png","srcSet":"/static/5bd75f341597ae6f4ba8adb416cce5a8/3a443/tripllo8.png 930w,\n/static/5bd75f341597ae6f4ba8adb416cce5a8/edaaa/tripllo8.png 968w"}}},"author":[{"id":"Pozafly","bio":"Frontend Developer","avatar":{"children":[{"fluid":{"aspectRatio":1,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACaElEQVQ4y42UX0hTcRTHz/ltFhv9mb2VWJFEyfShLIowKOifkzSUMl21VSbYn7ndu7v5ZD0XSG8+1IPQH3qKCkZUT0vYQ6wIhKEUQqskwgpjoe3e3+/0+13Llm3qOIzD4Xzu9/x+93wvhIGKRg8IHYRmJ6V6oGg1BFYcqNnx4BgbiimeLx4WEQng9ApcX4H10d/iYlFwCMw4o11wxV3ndVVvPAA34qiKC8NyQh3oHGZdUO59lqoavOuBykssF7EnWhC24g6qgXZ3i691mhq/0pL6up0Q62VFxGEOaSC1wfOlK1dVp0dTnB4RrXucdLPyM+yN/t/NFcLqVqJOqoTtnrihCSLLnDKtoEnLAh2boLnXURpWAzPaA/3ODWt2vJsc5kQkSPCkoJrXWadn+WG4H0PVVlw5wmg/9FcNJK5K0OJc0UQmN4iq+m41wk39X/ECZQfJU51toEM58ckUti4peaIRk+/9LLq3kly4MCs6NpLcB5+evzORV8KCZn7cTq5/yDcF8oZsKwrLmc8DXasV1pQt+wcWtnpuXFxeLS7KNiwBXwAaGhC57/RljL5l/8bEGP3IUaJPdMs2R4n3LPmoy4o4uVbGI2WWpkImMkxZjLp4GPl8GyaPrSljSDNKS6ob0uxiGLisREttWERZ4mcDu+3Hl0HM+DHdik8CmAngqI/d68L3J/BVB6a1giWH2Q2Rvj2CibVsn5cFt7CQ/K9lnRVs92Z2XMZBHNzGjKOYNAqWdFZZfTQ64WMPTPrxRRummvDhKcycxOHT+LYLx1vwaRBH9HmMYY8kLSnk4+Uguh0zxzbsfI4rfwF8a2BEn7K2TwAAAABJRU5ErkJggg==","sizes":"(max-width: 800px) 100vw, 800px","src":"/static/8c061761f263c344f2c0416607c8adf1/bc8e0/pozafly.png","srcSet":"/static/8c061761f263c344f2c0416607c8adf1/8ac63/pozafly.png 200w,\n/static/8c061761f263c344f2c0416607c8adf1/3891b/pozafly.png 400w,\n/static/8c061761f263c344f2c0416607c8adf1/bc8e0/pozafly.png 800w,\n/static/8c061761f263c344f2c0416607c8adf1/6050d/pozafly.png 1200w,\n/static/8c061761f263c344f2c0416607c8adf1/d4b30/pozafly.png 1242w"}}]}}]},"fields":{"layout":"post","slug":"/tripllo/(8)vue-supplement/"}},"next":{"excerpt":"Sentry Sentry는 Application Error Monitoring…","timeToRead":7,"frontmatter":{"title":"Tripllo(10) Sentry 에러 로깅 시스템 도입","tags":["Tripllo 제작기"],"date":"2021-04-09T17:13:47.149Z","draft":false,"excerpt":"Sentry를 통해 프론트엔드 에러 로깅 시스템을 도입해보자.","image":{"childImageSharp":{"fluid":{"aspectRatio":1.8,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPUlEQVQoz6VSS0/CQBDu/z948aCJGKiiEnlU+oISq5RHUygt77aQYBEVJI3xRISWLg40UigXo5PN7O58+83MfrvY6h+GeZPrugihPQStdgMI+WOPvKV5i90s6McCERe5fmWOLfd008OWy+ViYUMrs9kXeK8v23Yc2wE/n9veMQiuyaPhBD8ns0wJTsOWSPCKrEG6itii7vINtSdXOqnbe5YqkkSeIQtZutSq96EY5jjOVYSJ4nQilqtKbSAXBZVOC8dH11K5yZIFPJSORTOqrDVU4zJMXYQpRdZDp0loAWs1+9EIfXaSjN/kiDhvWZ/d9iDHikDjOamuGK8vU+GhNnqeDM2xoZtaZzB+swztaX3nWrVLph4B5lgR2pu+fxxoFnyhjebIF+wARlvlN9qgXdtmx3zYDb7Kbz/J3+wbFRVlV4l/BA0AAAAASUVORK5CYII=","sizes":"(max-width: 900px) 100vw, 900px","src":"/static/bf7a9491463863772f181d36c58051fa/03620/sentry.png","srcSet":"/static/bf7a9491463863772f181d36c58051fa/03620/sentry.png 900w"}}},"author":[{"id":"Pozafly","bio":"Frontend Developer","avatar":{"children":[{"fluid":{"aspectRatio":1,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACaElEQVQ4y42UX0hTcRTHz/ltFhv9mb2VWJFEyfShLIowKOifkzSUMl21VSbYn7ndu7v5ZD0XSG8+1IPQH3qKCkZUT0vYQ6wIhKEUQqskwgpjoe3e3+/0+13Llm3qOIzD4Xzu9/x+93wvhIGKRg8IHYRmJ6V6oGg1BFYcqNnx4BgbiimeLx4WEQng9ApcX4H10d/iYlFwCMw4o11wxV3ndVVvPAA34qiKC8NyQh3oHGZdUO59lqoavOuBykssF7EnWhC24g6qgXZ3i691mhq/0pL6up0Q62VFxGEOaSC1wfOlK1dVp0dTnB4RrXucdLPyM+yN/t/NFcLqVqJOqoTtnrihCSLLnDKtoEnLAh2boLnXURpWAzPaA/3ODWt2vJsc5kQkSPCkoJrXWadn+WG4H0PVVlw5wmg/9FcNJK5K0OJc0UQmN4iq+m41wk39X/ECZQfJU51toEM58ckUti4peaIRk+/9LLq3kly4MCs6NpLcB5+evzORV8KCZn7cTq5/yDcF8oZsKwrLmc8DXasV1pQt+wcWtnpuXFxeLS7KNiwBXwAaGhC57/RljL5l/8bEGP3IUaJPdMs2R4n3LPmoy4o4uVbGI2WWpkImMkxZjLp4GPl8GyaPrSljSDNKS6ob0uxiGLisREttWERZ4mcDu+3Hl0HM+DHdik8CmAngqI/d68L3J/BVB6a1giWH2Q2Rvj2CibVsn5cFt7CQ/K9lnRVs92Z2XMZBHNzGjKOYNAqWdFZZfTQ64WMPTPrxRRummvDhKcycxOHT+LYLx1vwaRBH9HmMYY8kLSnk4+Uguh0zxzbsfI4rfwF8a2BEn7K2TwAAAABJRU5ErkJggg==","sizes":"(max-width: 800px) 100vw, 800px","src":"/static/8c061761f263c344f2c0416607c8adf1/bc8e0/pozafly.png","srcSet":"/static/8c061761f263c344f2c0416607c8adf1/8ac63/pozafly.png 200w,\n/static/8c061761f263c344f2c0416607c8adf1/3891b/pozafly.png 400w,\n/static/8c061761f263c344f2c0416607c8adf1/bc8e0/pozafly.png 800w,\n/static/8c061761f263c344f2c0416607c8adf1/6050d/pozafly.png 1200w,\n/static/8c061761f263c344f2c0416607c8adf1/d4b30/pozafly.png 1242w"}}]}}]},"fields":{"layout":"post","slug":"/tripllo/(10)Sentry-error-system/"}},"primaryTag":"Tripllo 제작기"}},"staticQueryHashes":["1917168614","4083712403"]}