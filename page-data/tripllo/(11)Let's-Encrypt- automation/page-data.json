{"componentChunkName":"component---src-templates-post-tsx","path":"/tripllo/(11)Let's-Encrypt- automation/","result":{"data":{"logo":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACaElEQVQ4y42UX0hTcRTHz/ltFhv9mb2VWJFEyfShLIowKOifkzSUMl21VSbYn7ndu7v5ZD0XSG8+1IPQH3qKCkZUT0vYQ6wIhKEUQqskwgpjoe3e3+/0+13Llm3qOIzD4Xzu9/x+93wvhIGKRg8IHYRmJ6V6oGg1BFYcqNnx4BgbiimeLx4WEQng9ApcX4H10d/iYlFwCMw4o11wxV3ndVVvPAA34qiKC8NyQh3oHGZdUO59lqoavOuBykssF7EnWhC24g6qgXZ3i691mhq/0pL6up0Q62VFxGEOaSC1wfOlK1dVp0dTnB4RrXucdLPyM+yN/t/NFcLqVqJOqoTtnrihCSLLnDKtoEnLAh2boLnXURpWAzPaA/3ODWt2vJsc5kQkSPCkoJrXWadn+WG4H0PVVlw5wmg/9FcNJK5K0OJc0UQmN4iq+m41wk39X/ECZQfJU51toEM58ckUti4peaIRk+/9LLq3kly4MCs6NpLcB5+evzORV8KCZn7cTq5/yDcF8oZsKwrLmc8DXasV1pQt+wcWtnpuXFxeLS7KNiwBXwAaGhC57/RljL5l/8bEGP3IUaJPdMs2R4n3LPmoy4o4uVbGI2WWpkImMkxZjLp4GPl8GyaPrSljSDNKS6ob0uxiGLisREttWERZ4mcDu+3Hl0HM+DHdik8CmAngqI/d68L3J/BVB6a1giWH2Q2Rvj2CibVsn5cFt7CQ/K9lnRVs92Z2XMZBHNzGjKOYNAqWdFZZfTQ64WMPTPrxRRummvDhKcycxOHT+LYLx1vwaRBH9HmMYY8kLSnk4+Uguh0zxzbsfI4rfwF8a2BEn7K2TwAAAABJRU5ErkJggg==","width":400,"height":400,"src":"/static/8c061761f263c344f2c0416607c8adf1/3891b/pozafly.png","srcSet":"/static/8c061761f263c344f2c0416607c8adf1/3891b/pozafly.png 1x,\n/static/8c061761f263c344f2c0416607c8adf1/8c332/pozafly.png 1.5x,\n/static/8c061761f263c344f2c0416607c8adf1/bc8e0/pozafly.png 2x"}}},"markdownRemark":{"html":"<h1>Let’s Encrypt 갱신 자동화</h1>\n<blockquote>\n<p>서비스 환경은 AWS의 EC2(Amazon linux2) + Nginx 조합으로 되어있습니다. *amazon linux2는 apt-get 패키지 관련 명령어 대신 yum 패키지 명령어를 사용합니다.</p>\n</blockquote>\n<p>Let’s Encrypt는 사용자에게 무료로 TLS 인증서를 발급해주는 비영리 기관이다. 쉽게 말해서 http 프로토콜을 https 로 http 통신 규약을 암호화 해서 서로 소통하도록 해주는 것이다.</p>\n<p>Tripllo에서 frontend는 AWS Certificate Manager를 이용해, https 프로토콜을 입혀줬고, 백엔드는 EC2 자체적으로 Let’s Encrypt를 이용해 무료 TLS 인증서로 https를 입혀주었다. 참고로 만약 한쪽만 http이고, 다른 한 쪽이 https라면 Mixed Content 에러가 나게 되어있다. Let’s Encrypt에서 발급하는 인증서는 90일짜리 단기 인증서인데 3개원에 한 번은 갱신을 해주어야 한다.</p>\n<p> 어쨌든 EC2 백엔드 서버를 <code class=\"language-text\">Let&#39;s Encryp</code>, <code class=\"language-text\">Nginx</code> 설정으로 https를 입혀주었는데 그 때 당시에는 갱신 자동화를 해놓지 않았었다. 아래와 같은 메일이 도착했다.</p>\n<img width=\"681\" alt=\"스크린샷 2021-04-12 오전 10 26 42\" src=\"https://user-images.githubusercontent.com/59427983/114335026-bdf7f900-9b86-11eb-9f88-3689a881199a.png\">\n<p>만료 20일 전인데 갱신하라는 메일이다. 이번 기회를 통해 갱신을 자동화 해보자.</p>\n<br/>\n<h2>만료일 확인</h2>\n<p>ssh로 EC2에 접속 후 아래의 명령어로 인증서 만료일을 확인할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"\"</span> <span class=\"token operator\">|</span> openssl s_client -connect localhost:443 <span class=\"token operator\">|</span> openssl x509 -noout -dates\n\n혹은\n\n$ <span class=\"token function\">sudo</span> letsencrypt certificates</code></pre></div>\n<img width=\"689\" alt=\"스크린샷 2021-04-12 오후 12 09 12\" src=\"https://user-images.githubusercontent.com/59427983/114335514-e7fdeb00-9b87-11eb-9889-716a5a0ebbdb.png\">\n<p>나는 첫 번째 명령어를 사용해 확인했다. 1/28일에 처음 생성했고, 4/28일 이후에는 유효하지 않다는 메세지가 뜬다. 두번째 명령어를 사용하면 며칠 남았는지와 인증서의 시리얼 넘버를 알려준다.</p>\n<br/>\n<h2>Nginx 관련 명령어</h2>\n<p>먼저 Nginx 관련 명령어를 정리하는 이유는 Let’s Encrypt 관련 작업은 Nginx에서 리버스 프록시 기능을 사용해 통신 포트를 관리하고 있고, 인증서 갱신 전에 Nginx를 잠시 꺼두어야 Let’s Encrypt 관련 명령어가 먹기 때문이다. 단, nginx를 껐다가 갱신하고 다시 키는 작업대신 restart로 작업하기 위해, 나중에 yum 패키지로 <code class=\"language-text\">python-certbot-nginx</code> 를 설치 할 것이다.</p>\n<ul>\n<li>nginx 상태확인</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ systemctl status nginx.service</code></pre></div>\n<p>만약 Nginx가 잘 동작하고 있다면 <code class=\"language-text\">Acive: active (running)</code> 이라고 나오고, 멈춰있다면 <code class=\"language-text\">Active: inactive (dead)</code> 라고 나올 것이다.</p>\n<ul>\n<li>\n<p>nginx 끄기</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">service</span> nginx stop</code></pre></div>\n</li>\n<li>\n<p>nginx 켜기</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">service</span> nginx start</code></pre></div>\n</li>\n<li>\n<p>nginx 재시작</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">service</span> nginx restart</code></pre></div>\n</li>\n</ul>\n<p>Nginx 상태를 확인하고 인증서 갱신 테스트 전 우선 꺼보자.</p>\n<br/>\n<h2>갱신 테스트</h2>\n<p>Let’s Encrypt는 갱신 전 테스트를 할 수 있다. Nginx를 껐다면 아래 명령어로 실제로 갱신하는 것이 아니라 갱신이 가능한지 테스트 할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> certbot renew --dry-run</code></pre></div>\n<img width=\"657\" alt=\"스크린샷 2021-04-12 오후 12 17 08\" src=\"https://user-images.githubusercontent.com/59427983/114336187-58593c00-9b89-11eb-8a90-d74459ff0b34.png\">\n<p>모든 시뮬레이션 된 갱신이 성공했다고 뜬다. 만약, 인증서 갱신 기간이 아닐때 위와 같은 명령어로 갱신 테스트를 한다면 오류가 뜬다. 이렇게 되면 이제 갱신을 할 수 있는 환경이 만들어진 것이다.</p>\n<p>만약 인증서 갱신 자동화를 하지 않고 수동으로 갱신하고 싶다면</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ sudo certbot renew</code></pre></div>\n<p>이렇게 <code class=\"language-text\">--dry-run</code> 를 제외하고 갱신해주면 된다. 하지만 위 명령어를 아직은 사용하지말고 현재 인증서 갱신 전 nginx를 껐다 켰다하는 번거로움이 있으니 이를 없애보자.</p>\n<br/>\n<h2>python-certbot-nginx 설치</h2>\n<p>이제까지의 인증서 재발급 프로세스는 </p>\n<ol>\n<li>nginx 끄기</li>\n<li>인증서 재발급(테스트)</li>\n<li>nginx 켜기</li>\n</ol>\n<p>이다. 하지만, 일일이 nginx를 끄는작업을 하고 재발급을 받고 다시 nginx를 키는 작업을 했다. 물론 자동화를 하면서 shell 스크립트를 짜서 돌리면 되지만 이것 마저 귀찮기 때문에 우리는 <code class=\"language-text\">python-certbot-nginx</code> 를 설치할 것이다. 이 녀석을 설치해주면 nginx를 켜고 끄는게 아니라,</p>\n<ol>\n<li>인증서 재발급(테스트)</li>\n<li>nginx 재시작</li>\n</ol>\n<p>만 해주면 된다. 먼저 amazon linux2는 api-get 패키지가 없다. 대신 yum을 통해 패키지 관리를 하므로 yum을 사용하도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> yum update</code></pre></div>\n<p>현재 yum 패키지 목록을 업데이트 해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> yum <span class=\"token function\">install</span> python-certbot-nginx</code></pre></div>\n<p>이녀석을 깔아줬으면 이제 다시 한번 재발급 테스트를 해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> certbot renew --nginx --dry-run</code></pre></div>\n<p>이번엔, <code class=\"language-text\">--nginx</code> 옵션이 붙었다. 만약 위 패키지를 설치하지 않고 테스트 하거나 —nginx 옵션을 붙여주지 않았다면 certbot이 이 명령어를 알아듣지 못한다. 갱신 자동화를 사용하고, nginx를 재부팅 해주면 되게 되었다. 이제, Cron(스케줄러의 정규 표현식)을 이용해 해당 날짜가 되면 알아서 갱신하도록 해줄 것이다.</p>\n<br/>\n<h2>CronTab을 사용해서 인증서 갱신 자동화</h2>\n<p>이제 실제적으로 자동화를 해보자. 먼저 letsencrypt(certbot)에서 공식적으로 갱신 자동화를 지원하는 것이 아닌 linux에서 지원하는 CronTab을 사용하는 것임을 알아두자. CronTab은 정해진 일시에 반복적으로 특정 작업을 할 수 있게 해주는 스케줄러다.</p>\n<h3>CronTab 명령어 정리</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># Crontab 목록 보기</span>\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">crontab</span> -l\n\n<span class=\"token comment\"># Crontab 편집(만들기)</span>\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">crontab</span> -e\n\n<span class=\"token comment\"># Crontab 실행 로그 확인</span>\n$ view <span class=\"token punctuation\">[</span>로그 존재 경로<span class=\"token punctuation\">]</span></code></pre></div>\n<p>실제 CronTab 등록 전, test를 위해 15분 마다 갱신되도록 해보고, 성공하면 3달에 한번 지정된 날짜에 갱신되도록 설정할 것이다.</p>\n<h3>10분 마다 갱신되도록 테스트</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">crontab</span> -e</code></pre></div>\n<p>이제 CronTab을 작성할 수 있는 편집기가 열렸다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">*/10 * * * * <span class=\"token function\">sudo</span> /usr/bin/certbot renew --nginx --renew-hook<span class=\"token operator\">=</span><span class=\"token string\">\"sudo service nginx restart\"</span> <span class=\"token operator\">>></span> /var/log/le-renew.log</code></pre></div>\n<p>이 뜻은, </p>\n<ul>\n<li><code class=\"language-text\">*/10 * * * * sudo /usr/bin/certbot renew --nginx</code> : 10분마다 renew —nginx 명령어를 실행한다. </li>\n<li><code class=\"language-text\">--renew-hook=&quot;sudo service nginx restart&quot;</code> : renew 후에 nginx를 재시작하라는 hook을 실행해라. </li>\n<li><code class=\"language-text\">&gt;&gt; /var/log/le-renew.log</code> : 모두 마치면 /var/log/re-renew.log에 로그를 쌓아라라는 뜻이다.</li>\n</ul>\n<p>📌 cronTab 표현식 만들어주는 사이트</p>\n<p><a href=\"https://crontab.guru/\">CronTab guru</a> 에 들어가면 쉽게 표현식을 만들어준다. 처음에는 <a href=\"https://zamezzz.tistory.com/197\">크론(cron) 표현식 정리</a> 이곳과 <a href=\"http://www.cronmaker.com/\">CronMaker</a> 이곳에서 작성했는데 그냥 cron 표현식이었고, CronTab 표현식과는 약간 차이가 있다. 잘 구분해서 쓸것. 이것 때문에 시간을 날렸다 ㅜㅜ.</p>\n<p>이제 0분이 되면 renew 명령어가 실행되므로,</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ view /var/log/le-renew.log</code></pre></div>\n<p>명령어로 갱신 되었는지 로그를 보고,</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ systemctl status nginx.service</code></pre></div>\n<p>명령어로 nginx가 몇분전에 running 되었는지를 확인하자. 최종적으로는</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"\"</span> <span class=\"token operator\">|</span> openssl s_client -connect localhost:443 <span class=\"token operator\">|</span> openssl x509 -noout -dates</code></pre></div>\n<p>명령어로 갱신되어 언제까지 유효한지 확인하자.</p>\n<img width=\"689\" alt=\"스크린샷 2021-04-12 오후 2 52 04\" src=\"https://user-images.githubusercontent.com/59427983/114349272-a29ae700-9ba2-11eb-8312-8f6ef7a24174.png\">\n<p>이렇게 나는 7월 11일까지 유효한 인증서로 대체되었다.</p>\n<h3>3개월에 한번 갱신되도록 수정</h3>\n<p>마지막으로 3개월에 한번 12일 03시에 갱신되도록 Cron 표현식을 아래와 같이 바꿔주면된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token number\">0</span> <span class=\"token number\">3</span> <span class=\"token number\">12</span> <span class=\"token number\">1</span>-12/3 * <span class=\"token function\">sudo</span> /usr/bin/certbot renew --nginx --renew-hook<span class=\"token operator\">=</span><span class=\"token string\">\"sudo service nginx restart\"</span> <span class=\"token operator\">>></span> /var/log/le-renew.log</code></pre></div>\n<br/>\n<blockquote>\n<p>프로젝트 구경하기 -> <a href=\"https://tripllo.tech\">Tripllo_메인</a>, <a href=\"https://github.com/pozafly/tripllo_vue\">Vue_Github</a>, <a href=\"https://github.com/pozafly/tripllo_springBoot\">SpringBoot_Github</a></p>\n</blockquote>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"Let’s Encrypt 갱신 자동화"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"서비스 환경은 AWS의 EC2(Amazon linux2) + Nginx 조합으로 되어있습니다. *amazon linux2는 apt-get 패키지 관련 명령어 대신 yum 패키지 명령어를 사용합니다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let’s Encrypt는 사용자에게 무료로 TLS 인증서를 발급해주는 비영리 기관이다. 쉽게 말해서 http 프로토콜을 https 로 http 통신 규약을 암호화 해서 서로 소통하도록 해주는 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Tripllo에서 frontend는 AWS Certificate Manager를 이용해, https 프로토콜을 입혀줬고, 백엔드는 EC2 자체적으로 Let’s Encrypt를 이용해 무료 TLS 인증서로 https를 입혀주었다. 참고로 만약 한쪽만 http이고, 다른 한 쪽이 https라면 Mixed Content 에러가 나게 되어있다. Let’s Encrypt에서 발급하는 인증서는 90일짜리 단기 인증서인데 3개원에 한 번은 갱신을 해주어야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":" 어쨌든 EC2 백엔드 서버를 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Let's Encryp"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Nginx"}]},{"type":"text","value":" 설정으로 https를 입혀주었는데 그 때 당시에는 갱신 자동화를 해놓지 않았었다. 아래와 같은 메일이 도착했다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"img","properties":{"width":681,"alt":"스크린샷 2021-04-12 오전 10 26 42","src":"https://user-images.githubusercontent.com/59427983/114335026-bdf7f900-9b86-11eb-9f88-3689a881199a.png"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"만료 20일 전인데 갱신하라는 메일이다. 이번 기회를 통해 갱신을 자동화 해보자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"만료일 확인"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ssh로 EC2에 접속 후 아래의 명령어로 인증서 만료일을 확인할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ "},{"type":"element","tagName":"span","properties":{"className":["token","builtin","class-name"]},"children":[{"type":"text","value":"echo"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"\""}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" openssl s_client -connect localhost:443 "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" openssl x509 -noout -dates\n\n혹은\n\n$ "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" letsencrypt certificates"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"img","properties":{"width":689,"alt":"스크린샷 2021-04-12 오후 12 09 12","src":"https://user-images.githubusercontent.com/59427983/114335514-e7fdeb00-9b87-11eb-9889-716a5a0ebbdb.png"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"나는 첫 번째 명령어를 사용해 확인했다. 1/28일에 처음 생성했고, 4/28일 이후에는 유효하지 않다는 메세지가 뜬다. 두번째 명령어를 사용하면 며칠 남았는지와 인증서의 시리얼 넘버를 알려준다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Nginx 관련 명령어"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"먼저 Nginx 관련 명령어를 정리하는 이유는 Let’s Encrypt 관련 작업은 Nginx에서 리버스 프록시 기능을 사용해 통신 포트를 관리하고 있고, 인증서 갱신 전에 Nginx를 잠시 꺼두어야 Let’s Encrypt 관련 명령어가 먹기 때문이다. 단, nginx를 껐다가 갱신하고 다시 키는 작업대신 restart로 작업하기 위해, 나중에 yum 패키지로 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"python-certbot-nginx"}]},{"type":"text","value":" 를 설치 할 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"nginx 상태확인"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ systemctl status nginx.service"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"만약 Nginx가 잘 동작하고 있다면 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Acive: active (running)"}]},{"type":"text","value":" 이라고 나오고, 멈춰있다면 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Active: inactive (dead)"}]},{"type":"text","value":" 라고 나올 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"nginx 끄기"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"service"}]},{"type":"text","value":" nginx stop"}]}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"nginx 켜기"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"service"}]},{"type":"text","value":" nginx start"}]}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"nginx 재시작"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"service"}]},{"type":"text","value":" nginx restart"}]}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Nginx 상태를 확인하고 인증서 갱신 테스트 전 우선 꺼보자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"갱신 테스트"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let’s Encrypt는 갱신 전 테스트를 할 수 있다. Nginx를 껐다면 아래 명령어로 실제로 갱신하는 것이 아니라 갱신이 가능한지 테스트 할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" certbot renew --dry-run"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"img","properties":{"width":657,"alt":"스크린샷 2021-04-12 오후 12 17 08","src":"https://user-images.githubusercontent.com/59427983/114336187-58593c00-9b89-11eb-8a90-d74459ff0b34.png"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"모든 시뮬레이션 된 갱신이 성공했다고 뜬다. 만약, 인증서 갱신 기간이 아닐때 위와 같은 명령어로 갱신 테스트를 한다면 오류가 뜬다. 이렇게 되면 이제 갱신을 할 수 있는 환경이 만들어진 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"만약 인증서 갱신 자동화를 하지 않고 수동으로 갱신하고 싶다면"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sh"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sh"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sh"]},"children":[{"type":"text","value":"$ sudo certbot renew"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이렇게 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"--dry-run"}]},{"type":"text","value":" 를 제외하고 갱신해주면 된다. 하지만 위 명령어를 아직은 사용하지말고 현재 인증서 갱신 전 nginx를 껐다 켰다하는 번거로움이 있으니 이를 없애보자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"python-certbot-nginx 설치"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이제까지의 인증서 재발급 프로세스는 "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"nginx 끄기"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"인증서 재발급(테스트)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"nginx 켜기"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이다. 하지만, 일일이 nginx를 끄는작업을 하고 재발급을 받고 다시 nginx를 키는 작업을 했다. 물론 자동화를 하면서 shell 스크립트를 짜서 돌리면 되지만 이것 마저 귀찮기 때문에 우리는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"python-certbot-nginx"}]},{"type":"text","value":" 를 설치할 것이다. 이 녀석을 설치해주면 nginx를 켜고 끄는게 아니라,"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"인증서 재발급(테스트)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"nginx 재시작"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"만 해주면 된다. 먼저 amazon linux2는 api-get 패키지가 없다. 대신 yum을 통해 패키지 관리를 하므로 yum을 사용하도록 하자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" yum update"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"현재 yum 패키지 목록을 업데이트 해준다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" yum "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"install"}]},{"type":"text","value":" python-certbot-nginx"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이녀석을 깔아줬으면 이제 다시 한번 재발급 테스트를 해보자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" certbot renew --nginx --dry-run"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이번엔, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"--nginx"}]},{"type":"text","value":" 옵션이 붙었다. 만약 위 패키지를 설치하지 않고 테스트 하거나 —nginx 옵션을 붙여주지 않았다면 certbot이 이 명령어를 알아듣지 못한다. 갱신 자동화를 사용하고, nginx를 재부팅 해주면 되게 되었다. 이제, Cron(스케줄러의 정규 표현식)을 이용해 해당 날짜가 되면 알아서 갱신하도록 해줄 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"CronTab을 사용해서 인증서 갱신 자동화"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이제 실제적으로 자동화를 해보자. 먼저 letsencrypt(certbot)에서 공식적으로 갱신 자동화를 지원하는 것이 아닌 linux에서 지원하는 CronTab을 사용하는 것임을 알아두자. CronTab은 정해진 일시에 반복적으로 특정 작업을 할 수 있게 해주는 스케줄러다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"CronTab 명령어 정리"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Crontab 목록 보기"}]},{"type":"text","value":"\n$ "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"crontab"}]},{"type":"text","value":" -l\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Crontab 편집(만들기)"}]},{"type":"text","value":"\n$ "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"crontab"}]},{"type":"text","value":" -e\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Crontab 실행 로그 확인"}]},{"type":"text","value":"\n$ view "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"로그 존재 경로"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"실제 CronTab 등록 전, test를 위해 15분 마다 갱신되도록 해보고, 성공하면 3달에 한번 지정된 날짜에 갱신되도록 설정할 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"10분 마다 갱신되도록 테스트"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"crontab"}]},{"type":"text","value":" -e"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이제 CronTab을 작성할 수 있는 편집기가 열렸다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"*/10 * * * * "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" /usr/bin/certbot renew --nginx --renew-hook"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"sudo service nginx restart\""}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">>"}]},{"type":"text","value":" /var/log/le-renew.log"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이 뜻은, "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"*/10 * * * * sudo /usr/bin/certbot renew --nginx"}]},{"type":"text","value":" : 10분마다 renew —nginx 명령어를 실행한다. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"--renew-hook=\"sudo service nginx restart\""}]},{"type":"text","value":" : renew 후에 nginx를 재시작하라는 hook을 실행해라. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":">> /var/log/le-renew.log"}]},{"type":"text","value":" : 모두 마치면 /var/log/re-renew.log에 로그를 쌓아라라는 뜻이다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"📌 cronTab 표현식 만들어주는 사이트"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://crontab.guru/"},"children":[{"type":"text","value":"CronTab guru"}]},{"type":"text","value":" 에 들어가면 쉽게 표현식을 만들어준다. 처음에는 "},{"type":"element","tagName":"a","properties":{"href":"https://zamezzz.tistory.com/197"},"children":[{"type":"text","value":"크론(cron) 표현식 정리"}]},{"type":"text","value":" 이곳과 "},{"type":"element","tagName":"a","properties":{"href":"http://www.cronmaker.com/"},"children":[{"type":"text","value":"CronMaker"}]},{"type":"text","value":" 이곳에서 작성했는데 그냥 cron 표현식이었고, CronTab 표현식과는 약간 차이가 있다. 잘 구분해서 쓸것. 이것 때문에 시간을 날렸다 ㅜㅜ."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이제 0분이 되면 renew 명령어가 실행되므로,"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ view /var/log/le-renew.log"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"명령어로 갱신 되었는지 로그를 보고,"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ systemctl status nginx.service"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"명령어로 nginx가 몇분전에 running 되었는지를 확인하자. 최종적으로는"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"$ "},{"type":"element","tagName":"span","properties":{"className":["token","builtin","class-name"]},"children":[{"type":"text","value":"echo"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"\""}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" openssl s_client -connect localhost:443 "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" openssl x509 -noout -dates"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"명령어로 갱신되어 언제까지 유효한지 확인하자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"img","properties":{"width":689,"alt":"스크린샷 2021-04-12 오후 2 52 04","src":"https://user-images.githubusercontent.com/59427983/114349272-a29ae700-9ba2-11eb-8312-8f6ef7a24174.png"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이렇게 나는 7월 11일까지 유효한 인증서로 대체되었다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"3개월에 한번 갱신되도록 수정"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"마지막으로 3개월에 한번 12일 03시에 갱신되도록 Cron 표현식을 아래와 같이 바꿔주면된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"3"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"12"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":"-12/3 * "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" /usr/bin/certbot renew --nginx --renew-hook"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"sudo service nginx restart\""}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">>"}]},{"type":"text","value":" /var/log/le-renew.log"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"프로젝트 구경하기 -> "},{"type":"element","tagName":"a","properties":{"href":"https://tripllo.tech"},"children":[{"type":"text","value":"Tripllo_메인"}]},{"type":"text","value":", "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/pozafly/tripllo_vue"},"children":[{"type":"text","value":"Vue_Github"}]},{"type":"text","value":", "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/pozafly/tripllo_springBoot"},"children":[{"type":"text","value":"SpringBoot_Github"}]}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"excerpt":"Let’s Encrypt 갱신 자동화 서비스 환경은 AWS의 EC2(Amazon linux2) + Nginx 조합으로 되어있습니다. *amazon linux2는 apt-get 패키지 관련 명령어 대신 yum 패키지 명령어를 사용합니다. Let’s…","timeToRead":4,"frontmatter":{"title":"Tripllo(11) Let's Encrypt 갱신 자동화","userDate":"12 April 2021","date":"2021-04-12T10:13:47.149Z","tags":["Tripllo 제작기"],"excerpt":"AWS EC2 환경에서 Nginx와 Let's Encrypt로 HTTPS TLS 인증서 갱신 자동화를 해보자.","image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA3XAAAN1wFCKJt4AAACj0lEQVQ4y42Tz0tVQRTHz73vFe4y+iFCEGG1CCPaiO89g0ySMqMysXBhVIKZ6L0VSqUJiaVgKiJCRpL27HcuBCND2uSmEgTpJ7jL/oWkQL195t6Z9562sAsfzpkzM9+Zc+YekVU+Ly6yFA8s2N6wWCAaS8VS5lf/VgjKUiCUBzkJ4f8VXLE4Hc5rkSLI5yB120pIM+IiUWc5qTGZk7ftW2R+KCSLiC48tCp+PQjn/RmyK34P2SfmB0MHiZ1Sc/hWIBhxLY0EKDFXYZ05W6juqU622VTsTchG76Xc9J7JFMx4I3LZG5PMhbgcnu1bp1NOCCEadSwlpAVFdrZKQVmJjLRkrfUeS8VkR+axqa7NX1vcnJKBxl3VHzozPk53bzrpPZHT+mA/vVIoD9J0DWmwm0OKiB9N339B+q9li+y5flVyL3nEF32Un91c1VATkzV5tWEjeIM0m3zBiFuPUDc0w6wSI9aH7fzWuz4cjtW24HvQD8PKR6hetrepvQnBJgTvwQ5E5uANtMMrvxRRp465T9gN0KoFv8NP349weFCycPCQUfcAjEE1Gx24w8RWxr3YbTrtR8TTsWXYdzCBPw6TUKj/ipARLGbTU2yNTluS1rX/eX0zTvjOXtZn+fMRHpWJK/CZYBGBKha9xq8F5d8NDnIHGd/ybxh1G6EH7kMdsffQkyqoHmKGYAEBNrqk7I4jNg378Nv8mkZU+s4P1t0m/hy/AUYZv4BKnbatBPNhgMmLLCzXNVW1KmXchX8OG9Mpf2FTDOL4o8SPYw8FlzLdZeplamdIrVXAEeId2id9NyO5NuUf1t0RSnaKgQcJusbWrZl8oNxEZ9nBvL/H3NDcwFl+o8iKk017pmazrPcDwb/tE2H9gb/bcQAAAABJRU5ErkJggg==","aspectRatio":1.2121212121212122,"src":"/static/58a4a7e8eb69b8bdbea5d60e52f4155d/23495/lets-encrypt.png","srcSet":"/static/58a4a7e8eb69b8bdbea5d60e52f4155d/23495/lets-encrypt.png 640w","sizes":"(max-width: 640px) 100vw, 640px"}}},"author":[{"id":"Pozafly","bio":"Frontend Developer","avatar":{"children":[{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACaElEQVQ4y42UX0hTcRTHz/ltFhv9mb2VWJFEyfShLIowKOifkzSUMl21VSbYn7ndu7v5ZD0XSG8+1IPQH3qKCkZUT0vYQ6wIhKEUQqskwgpjoe3e3+/0+13Llm3qOIzD4Xzu9/x+93wvhIGKRg8IHYRmJ6V6oGg1BFYcqNnx4BgbiimeLx4WEQng9ApcX4H10d/iYlFwCMw4o11wxV3ndVVvPAA34qiKC8NyQh3oHGZdUO59lqoavOuBykssF7EnWhC24g6qgXZ3i691mhq/0pL6up0Q62VFxGEOaSC1wfOlK1dVp0dTnB4RrXucdLPyM+yN/t/NFcLqVqJOqoTtnrihCSLLnDKtoEnLAh2boLnXURpWAzPaA/3ODWt2vJsc5kQkSPCkoJrXWadn+WG4H0PVVlw5wmg/9FcNJK5K0OJc0UQmN4iq+m41wk39X/ECZQfJU51toEM58ckUti4peaIRk+/9LLq3kly4MCs6NpLcB5+evzORV8KCZn7cTq5/yDcF8oZsKwrLmc8DXasV1pQt+wcWtnpuXFxeLS7KNiwBXwAaGhC57/RljL5l/8bEGP3IUaJPdMs2R4n3LPmoy4o4uVbGI2WWpkImMkxZjLp4GPl8GyaPrSljSDNKS6ob0uxiGLisREttWERZ4mcDu+3Hl0HM+DHdik8CmAngqI/d68L3J/BVB6a1giWH2Q2Rvj2CibVsn5cFt7CQ/K9lnRVs92Z2XMZBHNzGjKOYNAqWdFZZfTQ64WMPTPrxRRummvDhKcycxOHT+LYLx1vwaRBH9HmMYY8kLSnk4+Uguh0zxzbsfI4rfwF8a2BEn7K2TwAAAABJRU5ErkJggg==","aspectRatio":1,"src":"/static/8c061761f263c344f2c0416607c8adf1/bc8e0/pozafly.png","srcSet":"/static/8c061761f263c344f2c0416607c8adf1/22f7f/pozafly.png 40w,\n/static/8c061761f263c344f2c0416607c8adf1/587c9/pozafly.png 80w,\n/static/8c061761f263c344f2c0416607c8adf1/d966b/pozafly.png 120w,\n/static/8c061761f263c344f2c0416607c8adf1/bc8e0/pozafly.png 800w,\n/static/8c061761f263c344f2c0416607c8adf1/d4b30/pozafly.png 1242w","sizes":"(max-width: 800px) 100vw, 800px"}}]}}]}},"relatedPosts":{"totalCount":12,"edges":[{"node":{"id":"6e517966-a9f1-5cca-8493-fa3df3acac13","timeToRead":4,"excerpt":"Let’s Encrypt 갱신 자동화 서비스 환경은 AWS의 EC2(Amazon linux2) + Nginx 조합으로 되어있습니다. *amazon linux2는 apt-get 패키지 관련 명령어 대신 yum 패키지 명령어를 사용합니다. Let’s…","frontmatter":{"title":"Tripllo(11) Let's Encrypt 갱신 자동화","date":"2021-04-12T10:13:47.149Z"},"fields":{"slug":"/tripllo/(11)Let's-Encrypt- automation/"}}},{"node":{"id":"8a82ef32-4da3-528d-ac78-aba0c604c33c","timeToRead":7,"excerpt":"Sentry Sentry는 Application Error Monitoring…","frontmatter":{"title":"Tripllo(10) Sentry 에러 로깅 시스템 도입","date":"2021-04-09T17:13:47.149Z"},"fields":{"slug":"/tripllo/(10)Sentry-error-system/"}}},{"node":{"id":"cc3a511d-6757-5556-89c6-e7518a4d2f27","timeToRead":8,"excerpt":"Travis Travis CI에 대해서 알아보자. 우선 Travis 공식 Docs를 보고 따라해봤다. 참고 자료는 이동욱님의 스프링 부트와 AWS로 혼자 구현하는 웹 서비스 책을 참고했다. 우선 travis endpoint…","frontmatter":{"title":"Tripllo(9) Frontend -travis 배포 자동화","date":"2021-04-06T17:13:47.149Z"},"fields":{"slug":"/tripllo/(9)travis-auto-deploy/"}}},{"node":{"id":"f339be44-8057-5b67-8921-5f98ca7a8efa","timeToRead":15,"excerpt":"멘토링 후 vue에 대해 보완해야 할 점을 듣고 정리한 내용을 정리해보자. 1. package.json 정리(안쓰는 라이브러리 제거, 개발용 배포용 라이브러리 구분) 기존 package.json 파일을 보자. 걸리는 것은 이…","frontmatter":{"title":"Tripllo(8) vue 보완","date":"2021-04-03T19:13:47.149Z"},"fields":{"slug":"/tripllo/(8)vue-supplement/"}}},{"node":{"id":"20bb999c-f353-57b9-85c1-7d2b22626ab0","timeToRead":4,"excerpt":"프로젝트를 마무리했다. 두 달 반 조금 안 되게 시간이 걸린 듯 하다. 프로젝트를 진행하면서 느꼈던 점을 조금 적어보려고 한다. 1. 서론 한창 실력에 자신이 없고 나를 검증할 만한 수단이 없다고 생각하던 차 Toy…","frontmatter":{"title":"Tripllo 후기","date":"2021-02-19"},"fields":{"slug":"/tripllo/후기/"}}}]}},"pageContext":{"slug":"/tripllo/(11)Let's-Encrypt- automation/","prev":{"excerpt":"Sentry Sentry는 Application Error Monitoring…","timeToRead":7,"frontmatter":{"title":"Tripllo(10) Sentry 에러 로깅 시스템 도입","tags":["Tripllo 제작기"],"date":"2021-04-09T17:13:47.149Z","draft":false,"excerpt":"Sentry를 통해 프론트엔드 에러 로깅 시스템을 도입해보자.","image":{"childImageSharp":{"fluid":{"aspectRatio":1.8,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPUlEQVQoz6VSS0/CQBDu/z948aCJGKiiEnlU+oISq5RHUygt77aQYBEVJI3xRISWLg40UigXo5PN7O58+83MfrvY6h+GeZPrugihPQStdgMI+WOPvKV5i90s6McCERe5fmWOLfd008OWy+ViYUMrs9kXeK8v23Yc2wE/n9veMQiuyaPhBD8ns0wJTsOWSPCKrEG6itii7vINtSdXOqnbe5YqkkSeIQtZutSq96EY5jjOVYSJ4nQilqtKbSAXBZVOC8dH11K5yZIFPJSORTOqrDVU4zJMXYQpRdZDp0loAWs1+9EIfXaSjN/kiDhvWZ/d9iDHikDjOamuGK8vU+GhNnqeDM2xoZtaZzB+swztaX3nWrVLph4B5lgR2pu+fxxoFnyhjebIF+wARlvlN9qgXdtmx3zYDb7Kbz/J3+wbFRVlV4l/BA0AAAAASUVORK5CYII=","sizes":"(max-width: 900px) 100vw, 900px","src":"/static/bf7a9491463863772f181d36c58051fa/03620/sentry.png","srcSet":"/static/bf7a9491463863772f181d36c58051fa/03620/sentry.png 900w"}}},"author":[{"id":"Pozafly","bio":"Frontend Developer","avatar":{"children":[{"fluid":{"aspectRatio":1,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACaElEQVQ4y42UX0hTcRTHz/ltFhv9mb2VWJFEyfShLIowKOifkzSUMl21VSbYn7ndu7v5ZD0XSG8+1IPQH3qKCkZUT0vYQ6wIhKEUQqskwgpjoe3e3+/0+13Llm3qOIzD4Xzu9/x+93wvhIGKRg8IHYRmJ6V6oGg1BFYcqNnx4BgbiimeLx4WEQng9ApcX4H10d/iYlFwCMw4o11wxV3ndVVvPAA34qiKC8NyQh3oHGZdUO59lqoavOuBykssF7EnWhC24g6qgXZ3i691mhq/0pL6up0Q62VFxGEOaSC1wfOlK1dVp0dTnB4RrXucdLPyM+yN/t/NFcLqVqJOqoTtnrihCSLLnDKtoEnLAh2boLnXURpWAzPaA/3ODWt2vJsc5kQkSPCkoJrXWadn+WG4H0PVVlw5wmg/9FcNJK5K0OJc0UQmN4iq+m41wk39X/ECZQfJU51toEM58ckUti4peaIRk+/9LLq3kly4MCs6NpLcB5+evzORV8KCZn7cTq5/yDcF8oZsKwrLmc8DXasV1pQt+wcWtnpuXFxeLS7KNiwBXwAaGhC57/RljL5l/8bEGP3IUaJPdMs2R4n3LPmoy4o4uVbGI2WWpkImMkxZjLp4GPl8GyaPrSljSDNKS6ob0uxiGLisREttWERZ4mcDu+3Hl0HM+DHdik8CmAngqI/d68L3J/BVB6a1giWH2Q2Rvj2CibVsn5cFt7CQ/K9lnRVs92Z2XMZBHNzGjKOYNAqWdFZZfTQ64WMPTPrxRRummvDhKcycxOHT+LYLx1vwaRBH9HmMYY8kLSnk4+Uguh0zxzbsfI4rfwF8a2BEn7K2TwAAAABJRU5ErkJggg==","sizes":"(max-width: 800px) 100vw, 800px","src":"/static/8c061761f263c344f2c0416607c8adf1/bc8e0/pozafly.png","srcSet":"/static/8c061761f263c344f2c0416607c8adf1/8ac63/pozafly.png 200w,\n/static/8c061761f263c344f2c0416607c8adf1/3891b/pozafly.png 400w,\n/static/8c061761f263c344f2c0416607c8adf1/bc8e0/pozafly.png 800w,\n/static/8c061761f263c344f2c0416607c8adf1/6050d/pozafly.png 1200w,\n/static/8c061761f263c344f2c0416607c8adf1/d4b30/pozafly.png 1242w"}}]}}]},"fields":{"layout":"post","slug":"/tripllo/(10)Sentry-error-system/"}},"next":{"excerpt":"정리하면서 느꼈던 것 아래의 내용은 공식 홈페이지의 반응성(반응형)에 대해 정리된 글을 옮기고 난 후 느낀 점입니다. 혹시 틀린 내용이 있다면 댓글로 알려주시면 감사하겠습니다! 1. 객체 불변성에 대해 Vue는 내부적으로 기존의 data…","timeToRead":6,"frontmatter":{"title":"Vue2 반응성에 대해 깊이 알아보기","tags":["Vue"],"date":"2021-04-13T20:13:47.149Z","draft":false,"excerpt":"Vue 2.x 버전의 반응성에 대해 깊이 알아보자. Vue의 반응성을 제대로 알지 못한다면 UI 컴포넌트를 다룰 때, 혹은 data 객체를 다룰 때 문제가 생길 수 있다.","image":{"childImageSharp":{"fluid":{"aspectRatio":1.9047619047619047,"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAYIBAn/xAAVAQEBAAAAAAAAAAAAAAAAAAACA//aAAwDAQACEAMQAAAB7kRHUzU4KhnBT//EABgQAQEBAQEAAAAAAAAAAAAAAAUGAwEE/9oACAEBAAEFAmqAifwbb9FBHwC6rk55wBWUuSs3zPTDhu//xAAgEQEBAAEEAQUAAAAAAAAAAAABAhEDEiExQQAyYXGx/9oACAEDAQE/AU1LRKk08UVG3LQ4xW7xUo4PazVFC7WRQDvg7efHwfh9ev/EAB0RAAEEAgMAAAAAAAAAAAAAAAEAETGhAmEiUXH/2gAIAQIBAT8B4iQTlOvG6aVWhFubX//EACIQAAMBAQACAQQDAAAAAAAAAAECAwQFEhMRBhQhIgAVMv/aAAgBAQAGPwIX6u2WYO85xn+aaL0rQSmkc8w1qeVGAJVCqD9qMqgkdrC/1HT6b0dfr6PuV83n18mdmFW+mR7LGvPXTjziT9rnx2Icemmnm5H9q3WHS68HhovazRP2v2WW+NvB8tuZno7bl5vrf1ZadRY9DSJNptCKWlMHsdXm5N/T55TLj2aZClc+dXXYs5/P6/rpJqGKlgWYA+LMDWX9HzPXb/aHJFl/HyUChlPrWRZjFZ+KwLMYhPI/N8mK2yWabp65HfuqE8oSYhDbRRlT5JIQEIvyfED5/n//xAAYEAEBAQEBAAAAAAAAAAAAAAABABEhMf/aAAgBAQABPyFbjl2dvdHzNPiams1RqSjWaXAHdLM1gKifh8DsGIAEDw6YQ5dxfGyIaC2ZvEiYAntZFDjol//aAAwDAQACAAMAAAAQV8//xAAYEQEBAQEBAAAAAAAAAAAAAAABESExAP/aAAgBAwEBPxBP7WQk6MGgnj+SA0UaJlKgL3QHMcP/xAAZEQEBAQEBAQAAAAAAAAAAAAABESExQQD/2gAIAQIBAT8QJwAAaLbRQNLVWmS37rfW6I5hUOyp8vJ//8QAFxABAQEBAAAAAAAAAAAAAAAAAAERIf/aAAgBAQABPxBlxYhVfldm5WWfc+QDp2piVVLHW6lrCQrM1re1XHKlYkZ2Cskqt941KXWLYVbsWaU63//Z","sizes":"(max-width: 600px) 100vw, 600px","src":"/static/10ee2b8fdfcd49d0c97068e1a1049ccb/c3638/vue-jet.jpg","srcSet":"/static/10ee2b8fdfcd49d0c97068e1a1049ccb/c3638/vue-jet.jpg 600w"}}},"author":[{"id":"Pozafly","bio":"Frontend Developer","avatar":{"children":[{"fluid":{"aspectRatio":1,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACaElEQVQ4y42UX0hTcRTHz/ltFhv9mb2VWJFEyfShLIowKOifkzSUMl21VSbYn7ndu7v5ZD0XSG8+1IPQH3qKCkZUT0vYQ6wIhKEUQqskwgpjoe3e3+/0+13Llm3qOIzD4Xzu9/x+93wvhIGKRg8IHYRmJ6V6oGg1BFYcqNnx4BgbiimeLx4WEQng9ApcX4H10d/iYlFwCMw4o11wxV3ndVVvPAA34qiKC8NyQh3oHGZdUO59lqoavOuBykssF7EnWhC24g6qgXZ3i691mhq/0pL6up0Q62VFxGEOaSC1wfOlK1dVp0dTnB4RrXucdLPyM+yN/t/NFcLqVqJOqoTtnrihCSLLnDKtoEnLAh2boLnXURpWAzPaA/3ODWt2vJsc5kQkSPCkoJrXWadn+WG4H0PVVlw5wmg/9FcNJK5K0OJc0UQmN4iq+m41wk39X/ECZQfJU51toEM58ckUti4peaIRk+/9LLq3kly4MCs6NpLcB5+evzORV8KCZn7cTq5/yDcF8oZsKwrLmc8DXasV1pQt+wcWtnpuXFxeLS7KNiwBXwAaGhC57/RljL5l/8bEGP3IUaJPdMs2R4n3LPmoy4o4uVbGI2WWpkImMkxZjLp4GPl8GyaPrSljSDNKS6ob0uxiGLisREttWERZ4mcDu+3Hl0HM+DHdik8CmAngqI/d68L3J/BVB6a1giWH2Q2Rvj2CibVsn5cFt7CQ/K9lnRVs92Z2XMZBHNzGjKOYNAqWdFZZfTQ64WMPTPrxRRummvDhKcycxOHT+LYLx1vwaRBH9HmMYY8kLSnk4+Uguh0zxzbsfI4rfwF8a2BEn7K2TwAAAABJRU5ErkJggg==","sizes":"(max-width: 800px) 100vw, 800px","src":"/static/8c061761f263c344f2c0416607c8adf1/bc8e0/pozafly.png","srcSet":"/static/8c061761f263c344f2c0416607c8adf1/8ac63/pozafly.png 200w,\n/static/8c061761f263c344f2c0416607c8adf1/3891b/pozafly.png 400w,\n/static/8c061761f263c344f2c0416607c8adf1/bc8e0/pozafly.png 800w,\n/static/8c061761f263c344f2c0416607c8adf1/6050d/pozafly.png 1200w,\n/static/8c061761f263c344f2c0416607c8adf1/d4b30/pozafly.png 1242w"}}]}}]},"fields":{"layout":"post","slug":"/vue/Vue2-reactivity/"}},"primaryTag":"Tripllo 제작기"}},"staticQueryHashes":["1917168614","4083712403"]}