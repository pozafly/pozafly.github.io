{"version":3,"file":"8998-6fa919ec7af87a44a6c6.js","mappings":"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","sources":["webpack://record-journey/./node_modules/.pnpm/mermaid@11.8.1/node_modules/mermaid/dist/chunks/mermaid.core/chunk-AACKK3MU.mjs","webpack://record-journey/./node_modules/.pnpm/mermaid@11.8.1/node_modules/mermaid/dist/chunks/mermaid.core/diagram-3EMPZRKU.mjs"],"sourcesContent":["import {\n  __name\n} from \"./chunk-3XYRH5AP.mjs\";\n\n// src/utils/imperativeState.ts\nvar ImperativeState = class {\n  /**\n   * @param init - Function that creates the default state.\n   */\n  constructor(init) {\n    this.init = init;\n    this.records = this.init();\n  }\n  static {\n    __name(this, \"ImperativeState\");\n  }\n  reset() {\n    this.records = this.init();\n  }\n};\n\nexport {\n  ImperativeState\n};\n","import {\n  setupViewPortForSVG\n} from \"./chunk-SKB7J2MH.mjs\";\nimport {\n  isLabelStyle,\n  styles2String\n} from \"./chunk-UWXLY5YG.mjs\";\nimport {\n  populateCommonDb\n} from \"./chunk-353BL4L5.mjs\";\nimport {\n  ImperativeState\n} from \"./chunk-AACKK3MU.mjs\";\nimport {\n  cleanAndMerge\n} from \"./chunk-55PJQP7W.mjs\";\nimport {\n  selectSvgElement\n} from \"./chunk-P3VETL53.mjs\";\nimport {\n  __name,\n  clear,\n  configureSvgSize,\n  defaultConfig_default,\n  getAccDescription,\n  getAccTitle,\n  getConfig,\n  getDiagramTitle,\n  log,\n  setAccDescription,\n  setAccTitle,\n  setDiagramTitle\n} from \"./chunk-3XYRH5AP.mjs\";\n\n// src/diagrams/treemap/db.ts\nvar defaultTreemapData = {\n  nodes: [],\n  levels: /* @__PURE__ */ new Map(),\n  outerNodes: [],\n  classes: /* @__PURE__ */ new Map()\n};\nvar state = new ImperativeState(() => structuredClone(defaultTreemapData));\nvar getConfig2 = /* @__PURE__ */ __name(() => {\n  const defaultConfig = defaultConfig_default;\n  const userConfig = getConfig();\n  return cleanAndMerge({\n    ...defaultConfig.treemap,\n    ...userConfig.treemap ?? {}\n  });\n}, \"getConfig\");\nvar getNodes = /* @__PURE__ */ __name(() => state.records.nodes, \"getNodes\");\nvar addNode = /* @__PURE__ */ __name((node, level) => {\n  const data = state.records;\n  data.nodes.push(node);\n  data.levels.set(node, level);\n  if (level === 0) {\n    data.outerNodes.push(node);\n  }\n  if (level === 0 && !data.root) {\n    data.root = node;\n  }\n}, \"addNode\");\nvar getRoot = /* @__PURE__ */ __name(() => ({ name: \"\", children: state.records.outerNodes }), \"getRoot\");\nvar addClass = /* @__PURE__ */ __name((id, _style) => {\n  const classes = state.records.classes;\n  const styleClass = classes.get(id) ?? { id, styles: [], textStyles: [] };\n  classes.set(id, styleClass);\n  const styles = _style.replace(/\\\\,/g, \"\\xA7\\xA7\\xA7\").replace(/,/g, \";\").replace(/§§§/g, \",\").split(\";\");\n  if (styles) {\n    styles.forEach((s) => {\n      if (isLabelStyle(s)) {\n        if (styleClass?.textStyles) {\n          styleClass.textStyles.push(s);\n        } else {\n          styleClass.textStyles = [s];\n        }\n      }\n      if (styleClass?.styles) {\n        styleClass.styles.push(s);\n      } else {\n        styleClass.styles = [s];\n      }\n    });\n  }\n  classes.set(id, styleClass);\n}, \"addClass\");\nvar getClasses = /* @__PURE__ */ __name(() => {\n  return state.records.classes;\n}, \"getClasses\");\nvar getStylesForClass = /* @__PURE__ */ __name((classSelector) => {\n  return state.records.classes.get(classSelector)?.styles ?? [];\n}, \"getStylesForClass\");\nvar clear2 = /* @__PURE__ */ __name(() => {\n  clear();\n  state.reset();\n}, \"clear\");\nvar db = {\n  getNodes,\n  addNode,\n  getRoot,\n  getConfig: getConfig2,\n  clear: clear2,\n  setAccTitle,\n  getAccTitle,\n  setDiagramTitle,\n  getDiagramTitle,\n  getAccDescription,\n  setAccDescription,\n  addClass,\n  getClasses,\n  getStylesForClass\n};\n\n// src/diagrams/treemap/parser.ts\nimport { parse } from \"@mermaid-js/parser\";\n\n// src/diagrams/treemap/utils.ts\nfunction buildHierarchy(items) {\n  if (!items.length) {\n    return [];\n  }\n  const root = [];\n  const stack = [];\n  items.forEach((item) => {\n    const node = {\n      name: item.name,\n      children: item.type === \"Leaf\" ? void 0 : []\n    };\n    node.classSelector = item?.classSelector;\n    if (item?.cssCompiledStyles) {\n      node.cssCompiledStyles = [item.cssCompiledStyles];\n    }\n    if (item.type === \"Leaf\" && item.value !== void 0) {\n      node.value = item.value;\n    }\n    while (stack.length > 0 && stack[stack.length - 1].level >= item.level) {\n      stack.pop();\n    }\n    if (stack.length === 0) {\n      root.push(node);\n    } else {\n      const parent = stack[stack.length - 1].node;\n      if (parent.children) {\n        parent.children.push(node);\n      } else {\n        parent.children = [node];\n      }\n    }\n    if (item.type !== \"Leaf\") {\n      stack.push({ node, level: item.level });\n    }\n  });\n  return root;\n}\n__name(buildHierarchy, \"buildHierarchy\");\n\n// src/diagrams/treemap/parser.ts\nvar populate = /* @__PURE__ */ __name((ast) => {\n  populateCommonDb(ast, db);\n  const items = [];\n  for (const row of ast.TreemapRows ?? []) {\n    if (row.$type === \"ClassDefStatement\") {\n      db.addClass(row.className ?? \"\", row.styleText ?? \"\");\n    }\n  }\n  for (const row of ast.TreemapRows ?? []) {\n    const item = row.item;\n    if (!item) {\n      continue;\n    }\n    const level = row.indent ? parseInt(row.indent) : 0;\n    const name = getItemName(item);\n    const styles = item.classSelector ? db.getStylesForClass(item.classSelector) : [];\n    const cssCompiledStyles = styles.length > 0 ? styles.join(\";\") : void 0;\n    const itemData = {\n      level,\n      name,\n      type: item.$type,\n      value: item.value,\n      classSelector: item.classSelector,\n      cssCompiledStyles\n    };\n    items.push(itemData);\n  }\n  const hierarchyNodes = buildHierarchy(items);\n  const addNodesRecursively = /* @__PURE__ */ __name((nodes, level) => {\n    for (const node of nodes) {\n      db.addNode(node, level);\n      if (node.children && node.children.length > 0) {\n        addNodesRecursively(node.children, level + 1);\n      }\n    }\n  }, \"addNodesRecursively\");\n  addNodesRecursively(hierarchyNodes, 0);\n}, \"populate\");\nvar getItemName = /* @__PURE__ */ __name((item) => {\n  return item.name ? String(item.name) : \"\";\n}, \"getItemName\");\nvar parser = {\n  parse: /* @__PURE__ */ __name(async (text) => {\n    try {\n      const parseFunc = parse;\n      const ast = await parseFunc(\"treemap\", text);\n      log.debug(\"Treemap AST:\", ast);\n      populate(ast);\n    } catch (error) {\n      log.error(\"Error parsing treemap:\", error);\n      throw error;\n    }\n  }, \"parse\")\n};\n\n// src/diagrams/treemap/renderer.ts\nimport { scaleOrdinal, treemap, hierarchy, format, select } from \"d3\";\nvar DEFAULT_INNER_PADDING = 10;\nvar SECTION_INNER_PADDING = 10;\nvar SECTION_HEADER_HEIGHT = 25;\nvar draw = /* @__PURE__ */ __name((_text, id, _version, diagram2) => {\n  const treemapDb = diagram2.db;\n  const config = treemapDb.getConfig();\n  const treemapInnerPadding = config.padding ?? DEFAULT_INNER_PADDING;\n  const title = treemapDb.getDiagramTitle();\n  const root = treemapDb.getRoot();\n  const { themeVariables } = getConfig();\n  if (!root) {\n    return;\n  }\n  const titleHeight = title ? 30 : 0;\n  const svg = selectSvgElement(id);\n  const width = config.nodeWidth ? config.nodeWidth * SECTION_INNER_PADDING : 960;\n  const height = config.nodeHeight ? config.nodeHeight * SECTION_INNER_PADDING : 500;\n  const svgWidth = width;\n  const svgHeight = height + titleHeight;\n  svg.attr(\"viewBox\", `0 0 ${svgWidth} ${svgHeight}`);\n  configureSvgSize(svg, svgHeight, svgWidth, config.useMaxWidth);\n  let valueFormat;\n  try {\n    const formatStr = config.valueFormat || \",\";\n    if (formatStr === \"$0,0\") {\n      valueFormat = /* @__PURE__ */ __name((value) => \"$\" + format(\",\")(value), \"valueFormat\");\n    } else if (formatStr.startsWith(\"$\") && formatStr.includes(\",\")) {\n      const precision = /\\.\\d+/.exec(formatStr);\n      const precisionStr = precision ? precision[0] : \"\";\n      valueFormat = /* @__PURE__ */ __name((value) => \"$\" + format(\",\" + precisionStr)(value), \"valueFormat\");\n    } else if (formatStr.startsWith(\"$\")) {\n      const restOfFormat = formatStr.substring(1);\n      valueFormat = /* @__PURE__ */ __name((value) => \"$\" + format(restOfFormat || \"\")(value), \"valueFormat\");\n    } else {\n      valueFormat = format(formatStr);\n    }\n  } catch (error) {\n    log.error(\"Error creating format function:\", error);\n    valueFormat = format(\",\");\n  }\n  const colorScale = scaleOrdinal().range([\n    \"transparent\",\n    themeVariables.cScale0,\n    themeVariables.cScale1,\n    themeVariables.cScale2,\n    themeVariables.cScale3,\n    themeVariables.cScale4,\n    themeVariables.cScale5,\n    themeVariables.cScale6,\n    themeVariables.cScale7,\n    themeVariables.cScale8,\n    themeVariables.cScale9,\n    themeVariables.cScale10,\n    themeVariables.cScale11\n  ]);\n  const colorScalePeer = scaleOrdinal().range([\n    \"transparent\",\n    themeVariables.cScalePeer0,\n    themeVariables.cScalePeer1,\n    themeVariables.cScalePeer2,\n    themeVariables.cScalePeer3,\n    themeVariables.cScalePeer4,\n    themeVariables.cScalePeer5,\n    themeVariables.cScalePeer6,\n    themeVariables.cScalePeer7,\n    themeVariables.cScalePeer8,\n    themeVariables.cScalePeer9,\n    themeVariables.cScalePeer10,\n    themeVariables.cScalePeer11\n  ]);\n  const colorScaleLabel = scaleOrdinal().range([\n    themeVariables.cScaleLabel0,\n    themeVariables.cScaleLabel1,\n    themeVariables.cScaleLabel2,\n    themeVariables.cScaleLabel3,\n    themeVariables.cScaleLabel4,\n    themeVariables.cScaleLabel5,\n    themeVariables.cScaleLabel6,\n    themeVariables.cScaleLabel7,\n    themeVariables.cScaleLabel8,\n    themeVariables.cScaleLabel9,\n    themeVariables.cScaleLabel10,\n    themeVariables.cScaleLabel11\n  ]);\n  if (title) {\n    svg.append(\"text\").attr(\"x\", svgWidth / 2).attr(\"y\", titleHeight / 2).attr(\"class\", \"treemapTitle\").attr(\"text-anchor\", \"middle\").attr(\"dominant-baseline\", \"middle\").text(title);\n  }\n  const g = svg.append(\"g\").attr(\"transform\", `translate(0, ${titleHeight})`).attr(\"class\", \"treemapContainer\");\n  const hierarchyRoot = hierarchy(root).sum((d) => d.value ?? 0).sort((a, b) => (b.value ?? 0) - (a.value ?? 0));\n  const treemapLayout = treemap().size([width, height]).paddingTop(\n    (d) => d.children && d.children.length > 0 ? SECTION_HEADER_HEIGHT + SECTION_INNER_PADDING : 0\n  ).paddingInner(treemapInnerPadding).paddingLeft((d) => d.children && d.children.length > 0 ? SECTION_INNER_PADDING : 0).paddingRight((d) => d.children && d.children.length > 0 ? SECTION_INNER_PADDING : 0).paddingBottom((d) => d.children && d.children.length > 0 ? SECTION_INNER_PADDING : 0).round(true);\n  const treemapData = treemapLayout(hierarchyRoot);\n  const branchNodes = treemapData.descendants().filter((d) => d.children && d.children.length > 0);\n  const sections = g.selectAll(\".treemapSection\").data(branchNodes).enter().append(\"g\").attr(\"class\", \"treemapSection\").attr(\"transform\", (d) => `translate(${d.x0},${d.y0})`);\n  sections.append(\"rect\").attr(\"width\", (d) => d.x1 - d.x0).attr(\"height\", SECTION_HEADER_HEIGHT).attr(\"class\", \"treemapSectionHeader\").attr(\"fill\", \"none\").attr(\"fill-opacity\", 0.6).attr(\"stroke-width\", 0.6).attr(\"style\", (d) => {\n    if (d.depth === 0) {\n      return \"display: none;\";\n    }\n    return \"\";\n  });\n  sections.append(\"clipPath\").attr(\"id\", (_d, i) => `clip-section-${id}-${i}`).append(\"rect\").attr(\"width\", (d) => Math.max(0, d.x1 - d.x0 - 12)).attr(\"height\", SECTION_HEADER_HEIGHT);\n  sections.append(\"rect\").attr(\"width\", (d) => d.x1 - d.x0).attr(\"height\", (d) => d.y1 - d.y0).attr(\"class\", (_d, i) => {\n    return `treemapSection section${i}`;\n  }).attr(\"fill\", (d) => colorScale(d.data.name)).attr(\"fill-opacity\", 0.6).attr(\"stroke\", (d) => colorScalePeer(d.data.name)).attr(\"stroke-width\", 2).attr(\"stroke-opacity\", 0.4).attr(\"style\", (d) => {\n    if (d.depth === 0) {\n      return \"display: none;\";\n    }\n    const styles = styles2String({ cssCompiledStyles: d.data.cssCompiledStyles });\n    return styles.nodeStyles + \";\" + styles.borderStyles.join(\";\");\n  });\n  sections.append(\"text\").attr(\"class\", \"treemapSectionLabel\").attr(\"x\", 6).attr(\"y\", SECTION_HEADER_HEIGHT / 2).attr(\"dominant-baseline\", \"middle\").text((d) => d.depth === 0 ? \"\" : d.data.name).attr(\"font-weight\", \"bold\").attr(\"style\", (d) => {\n    if (d.depth === 0) {\n      return \"display: none;\";\n    }\n    const labelStyles = \"dominant-baseline: middle; font-size: 12px; fill:\" + colorScaleLabel(d.data.name) + \"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\";\n    const styles = styles2String({ cssCompiledStyles: d.data.cssCompiledStyles });\n    return labelStyles + styles.labelStyles.replace(\"color:\", \"fill:\");\n  }).each(function(d) {\n    if (d.depth === 0) {\n      return;\n    }\n    const self = select(this);\n    const originalText = d.data.name;\n    self.text(originalText);\n    const totalHeaderWidth = d.x1 - d.x0;\n    const labelXPosition = 6;\n    let spaceForTextContent;\n    if (config.showValues !== false && d.value) {\n      const valueEndsAtXRelative = totalHeaderWidth - 10;\n      const estimatedValueTextActualWidth = 30;\n      const gapBetweenLabelAndValue = 10;\n      const labelMustEndBeforeX = valueEndsAtXRelative - estimatedValueTextActualWidth - gapBetweenLabelAndValue;\n      spaceForTextContent = labelMustEndBeforeX - labelXPosition;\n    } else {\n      const labelOwnRightPadding = 6;\n      spaceForTextContent = totalHeaderWidth - labelXPosition - labelOwnRightPadding;\n    }\n    const minimumWidthToDisplay = 15;\n    const actualAvailableWidth = Math.max(minimumWidthToDisplay, spaceForTextContent);\n    const textNode = self.node();\n    const currentTextContentLength = textNode.getComputedTextLength();\n    if (currentTextContentLength > actualAvailableWidth) {\n      const ellipsis = \"...\";\n      let currentTruncatedText = originalText;\n      while (currentTruncatedText.length > 0) {\n        currentTruncatedText = originalText.substring(0, currentTruncatedText.length - 1);\n        if (currentTruncatedText.length === 0) {\n          self.text(ellipsis);\n          if (textNode.getComputedTextLength() > actualAvailableWidth) {\n            self.text(\"\");\n          }\n          break;\n        }\n        self.text(currentTruncatedText + ellipsis);\n        if (textNode.getComputedTextLength() <= actualAvailableWidth) {\n          break;\n        }\n      }\n    }\n  });\n  if (config.showValues !== false) {\n    sections.append(\"text\").attr(\"class\", \"treemapSectionValue\").attr(\"x\", (d) => d.x1 - d.x0 - 10).attr(\"y\", SECTION_HEADER_HEIGHT / 2).attr(\"text-anchor\", \"end\").attr(\"dominant-baseline\", \"middle\").text((d) => d.value ? valueFormat(d.value) : \"\").attr(\"font-style\", \"italic\").attr(\"style\", (d) => {\n      if (d.depth === 0) {\n        return \"display: none;\";\n      }\n      const labelStyles = \"text-anchor: end; dominant-baseline: middle; font-size: 10px; fill:\" + colorScaleLabel(d.data.name) + \"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\";\n      const styles = styles2String({ cssCompiledStyles: d.data.cssCompiledStyles });\n      return labelStyles + styles.labelStyles.replace(\"color:\", \"fill:\");\n    });\n  }\n  const leafNodes = treemapData.leaves();\n  const cell = g.selectAll(\".treemapLeafGroup\").data(leafNodes).enter().append(\"g\").attr(\"class\", (d, i) => {\n    return `treemapNode treemapLeafGroup leaf${i}${d.data.classSelector ? ` ${d.data.classSelector}` : \"\"}x`;\n  }).attr(\"transform\", (d) => `translate(${d.x0},${d.y0})`);\n  cell.append(\"rect\").attr(\"width\", (d) => d.x1 - d.x0).attr(\"height\", (d) => d.y1 - d.y0).attr(\"class\", \"treemapLeaf\").attr(\"fill\", (d) => {\n    return d.parent ? colorScale(d.parent.data.name) : colorScale(d.data.name);\n  }).attr(\"style\", (d) => {\n    const styles = styles2String({ cssCompiledStyles: d.data.cssCompiledStyles });\n    return styles.nodeStyles;\n  }).attr(\"fill-opacity\", 0.3).attr(\"stroke\", (d) => {\n    return d.parent ? colorScale(d.parent.data.name) : colorScale(d.data.name);\n  }).attr(\"stroke-width\", 3);\n  cell.append(\"clipPath\").attr(\"id\", (_d, i) => `clip-${id}-${i}`).append(\"rect\").attr(\"width\", (d) => Math.max(0, d.x1 - d.x0 - 4)).attr(\"height\", (d) => Math.max(0, d.y1 - d.y0 - 4));\n  const leafLabels = cell.append(\"text\").attr(\"class\", \"treemapLabel\").attr(\"x\", (d) => (d.x1 - d.x0) / 2).attr(\"y\", (d) => (d.y1 - d.y0) / 2).attr(\"style\", (d) => {\n    const labelStyles = \"text-anchor: middle; dominant-baseline: middle; font-size: 38px;fill:\" + colorScaleLabel(d.data.name) + \";\";\n    const styles = styles2String({ cssCompiledStyles: d.data.cssCompiledStyles });\n    return labelStyles + styles.labelStyles.replace(\"color:\", \"fill:\");\n  }).attr(\"clip-path\", (_d, i) => `url(#clip-${id}-${i})`).text((d) => d.data.name);\n  leafLabels.each(function(d) {\n    const self = select(this);\n    const nodeWidth = d.x1 - d.x0;\n    const nodeHeight = d.y1 - d.y0;\n    const textNode = self.node();\n    const padding = 4;\n    const availableWidth = nodeWidth - 2 * padding;\n    const availableHeight = nodeHeight - 2 * padding;\n    if (availableWidth < 10 || availableHeight < 10) {\n      self.style(\"display\", \"none\");\n      return;\n    }\n    let currentLabelFontSize = parseInt(self.style(\"font-size\"), 10);\n    const minLabelFontSize = 8;\n    const originalValueRelFontSize = 28;\n    const valueScaleFactor = 0.6;\n    const minValueFontSize = 6;\n    const spacingBetweenLabelAndValue = 2;\n    while (textNode.getComputedTextLength() > availableWidth && currentLabelFontSize > minLabelFontSize) {\n      currentLabelFontSize--;\n      self.style(\"font-size\", `${currentLabelFontSize}px`);\n    }\n    let prospectiveValueFontSize = Math.max(\n      minValueFontSize,\n      Math.min(originalValueRelFontSize, Math.round(currentLabelFontSize * valueScaleFactor))\n    );\n    let combinedHeight = currentLabelFontSize + spacingBetweenLabelAndValue + prospectiveValueFontSize;\n    while (combinedHeight > availableHeight && currentLabelFontSize > minLabelFontSize) {\n      currentLabelFontSize--;\n      prospectiveValueFontSize = Math.max(\n        minValueFontSize,\n        Math.min(originalValueRelFontSize, Math.round(currentLabelFontSize * valueScaleFactor))\n      );\n      if (prospectiveValueFontSize < minValueFontSize && currentLabelFontSize === minLabelFontSize) {\n        break;\n      }\n      self.style(\"font-size\", `${currentLabelFontSize}px`);\n      combinedHeight = currentLabelFontSize + spacingBetweenLabelAndValue + prospectiveValueFontSize;\n      if (prospectiveValueFontSize <= minValueFontSize && combinedHeight > availableHeight) {\n      }\n    }\n    self.style(\"font-size\", `${currentLabelFontSize}px`);\n    if (textNode.getComputedTextLength() > availableWidth || currentLabelFontSize < minLabelFontSize || availableHeight < currentLabelFontSize) {\n      self.style(\"display\", \"none\");\n    }\n  });\n  if (config.showValues !== false) {\n    const leafValues = cell.append(\"text\").attr(\"class\", \"treemapValue\").attr(\"x\", (d) => (d.x1 - d.x0) / 2).attr(\"y\", function(d) {\n      return (d.y1 - d.y0) / 2;\n    }).attr(\"style\", (d) => {\n      const labelStyles = \"text-anchor: middle; dominant-baseline: hanging; font-size: 28px;fill:\" + colorScaleLabel(d.data.name) + \";\";\n      const styles = styles2String({ cssCompiledStyles: d.data.cssCompiledStyles });\n      return labelStyles + styles.labelStyles.replace(\"color:\", \"fill:\");\n    }).attr(\"clip-path\", (_d, i) => `url(#clip-${id}-${i})`).text((d) => d.value ? valueFormat(d.value) : \"\");\n    leafValues.each(function(d) {\n      const valueTextElement = select(this);\n      const parentCellNode = this.parentNode;\n      if (!parentCellNode) {\n        valueTextElement.style(\"display\", \"none\");\n        return;\n      }\n      const labelElement = select(parentCellNode).select(\".treemapLabel\");\n      if (labelElement.empty() || labelElement.style(\"display\") === \"none\") {\n        valueTextElement.style(\"display\", \"none\");\n        return;\n      }\n      const finalLabelFontSize = parseFloat(labelElement.style(\"font-size\"));\n      const originalValueFontSize = 28;\n      const valueScaleFactor = 0.6;\n      const minValueFontSize = 6;\n      const spacingBetweenLabelAndValue = 2;\n      const actualValueFontSize = Math.max(\n        minValueFontSize,\n        Math.min(originalValueFontSize, Math.round(finalLabelFontSize * valueScaleFactor))\n      );\n      valueTextElement.style(\"font-size\", `${actualValueFontSize}px`);\n      const labelCenterY = (d.y1 - d.y0) / 2;\n      const valueTopActualY = labelCenterY + finalLabelFontSize / 2 + spacingBetweenLabelAndValue;\n      valueTextElement.attr(\"y\", valueTopActualY);\n      const nodeWidth = d.x1 - d.x0;\n      const nodeTotalHeight = d.y1 - d.y0;\n      const cellBottomPadding = 4;\n      const maxValueBottomY = nodeTotalHeight - cellBottomPadding;\n      const availableWidthForValue = nodeWidth - 2 * 4;\n      if (valueTextElement.node().getComputedTextLength() > availableWidthForValue || valueTopActualY + actualValueFontSize > maxValueBottomY || actualValueFontSize < minValueFontSize) {\n        valueTextElement.style(\"display\", \"none\");\n      } else {\n        valueTextElement.style(\"display\", null);\n      }\n    });\n  }\n  const diagramPadding = config.diagramPadding ?? 8;\n  setupViewPortForSVG(svg, diagramPadding, \"flowchart\", config?.useMaxWidth || false);\n}, \"draw\");\nvar getClasses2 = /* @__PURE__ */ __name(function(_text, diagramObj) {\n  return diagramObj.db.getClasses();\n}, \"getClasses\");\nvar renderer = { draw, getClasses: getClasses2 };\n\n// src/diagrams/treemap/styles.ts\nvar defaultTreemapStyleOptions = {\n  sectionStrokeColor: \"black\",\n  sectionStrokeWidth: \"1\",\n  sectionFillColor: \"#efefef\",\n  leafStrokeColor: \"black\",\n  leafStrokeWidth: \"1\",\n  leafFillColor: \"#efefef\",\n  labelColor: \"black\",\n  labelFontSize: \"12px\",\n  valueFontSize: \"10px\",\n  valueColor: \"black\",\n  titleColor: \"black\",\n  titleFontSize: \"14px\"\n};\nvar getStyles = /* @__PURE__ */ __name(({\n  treemap: treemap2\n} = {}) => {\n  const options = cleanAndMerge(defaultTreemapStyleOptions, treemap2);\n  return `\n  .treemapNode.section {\n    stroke: ${options.sectionStrokeColor};\n    stroke-width: ${options.sectionStrokeWidth};\n    fill: ${options.sectionFillColor};\n  }\n  .treemapNode.leaf {\n    stroke: ${options.leafStrokeColor};\n    stroke-width: ${options.leafStrokeWidth};\n    fill: ${options.leafFillColor};\n  }\n  .treemapLabel {\n    fill: ${options.labelColor};\n    font-size: ${options.labelFontSize};\n  }\n  .treemapValue {\n    fill: ${options.valueColor};\n    font-size: ${options.valueFontSize};\n  }\n  .treemapTitle {\n    fill: ${options.titleColor};\n    font-size: ${options.titleFontSize};\n  }\n  `;\n}, \"getStyles\");\nvar styles_default = getStyles;\n\n// src/diagrams/treemap/diagram.ts\nvar diagram = {\n  parser,\n  db,\n  renderer,\n  styles: styles_default\n};\nexport {\n  diagram\n};\n"],"names":["ImperativeState","constructor","init","this","records","reset","defaultTreemapData","nodes","levels","Map","outerNodes","classes","state","structuredClone","getConfig2","defaultConfig","userConfig","treemap","getNodes","addNode","node","level","data","push","set","root","getRoot","name","children","addClass","id","_style","styleClass","get","styles","textStyles","replace","split","forEach","s","getClasses","getStylesForClass","classSelector","db","getConfig","clear","setAccTitle","getAccTitle","setDiagramTitle","getDiagramTitle","getAccDescription","setAccDescription","buildHierarchy","items","length","stack","item","type","cssCompiledStyles","value","pop","parent","populate","ast","row","TreemapRows","$type","className","styleText","indent","parseInt","getItemName","join","itemData","hierarchyNodes","addNodesRecursively","String","SECTION_INNER_PADDING","defaultTreemapStyleOptions","sectionStrokeColor","sectionStrokeWidth","sectionFillColor","leafStrokeColor","leafStrokeWidth","leafFillColor","labelColor","labelFontSize","valueFontSize","valueColor","titleColor","titleFontSize","diagram","parser","parse","async","text","parseFunc","debug","error","renderer","draw","_text","_version","diagram2","treemapDb","config","treemapInnerPadding","padding","title","themeVariables","titleHeight","svg","width","nodeWidth","height","nodeHeight","svgWidth","svgHeight","valueFormat","attr","useMaxWidth","formatStr","startsWith","includes","precision","exec","precisionStr","restOfFormat","substring","colorScale","range","cScale0","cScale1","cScale2","cScale3","cScale4","cScale5","cScale6","cScale7","cScale8","cScale9","cScale10","cScale11","colorScalePeer","cScalePeer0","cScalePeer1","cScalePeer2","cScalePeer3","cScalePeer4","cScalePeer5","cScalePeer6","cScalePeer7","cScalePeer8","cScalePeer9","cScalePeer10","cScalePeer11","colorScaleLabel","cScaleLabel0","cScaleLabel1","cScaleLabel2","cScaleLabel3","cScaleLabel4","cScaleLabel5","cScaleLabel6","cScaleLabel7","cScaleLabel8","cScaleLabel9","cScaleLabel10","cScaleLabel11","append","g","hierarchyRoot","sum","d","sort","a","b","treemapData","size","paddingTop","SECTION_HEADER_HEIGHT","paddingInner","paddingLeft","paddingRight","paddingBottom","round","treemapLayout","branchNodes","descendants","filter","sections","selectAll","enter","x0","y0","x1","depth","_d","i","Math","max","y1","nodeStyles","borderStyles","labelStyles","each","self","originalText","totalHeaderWidth","spaceForTextContent","showValues","actualAvailableWidth","textNode","getComputedTextLength","ellipsis","currentTruncatedText","leafNodes","leaves","cell","availableWidth","availableHeight","style","currentLabelFontSize","prospectiveValueFontSize","min","combinedHeight","valueTextElement","parentCellNode","parentNode","labelElement","select","empty","finalLabelFontSize","parseFloat","actualValueFontSize","valueTopActualY","maxValueBottomY","availableWidthForValue","diagramPadding","diagramObj","treemap2","options"],"sourceRoot":""}